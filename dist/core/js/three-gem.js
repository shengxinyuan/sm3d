var _0x2df2=['origin\x20-=\x20centreOffset;','direction.y\x20/=\x20squashFactor;','float\x20A\x20=\x20dot(direction,\x20direction);','float\x20B\x20=\x202.0*dot(origin,\x20direction);','float\x20C\x20=\x20dot(origin,\x20origin)\x20-\x20radius\x20*\x20radius;','if(disc\x20>\x200.0)','disc\x20=\x20sqrt(disc);','float\x20t2\x20=\x20(-B\x20-\x20disc)*geometryFactor/A;','float\x20t\x20=\x20(t1\x20>\x20t2)\x20?\x20t1\x20:\x20t2;','return\x20vec3(origin\x20+\x20centreOffset\x20+\x20direction\x20*\x20t);','return\x20vec3(0.0);','vec3\x20debugBounces(int\x20count)\x20{','vec3\x20color\x20=\x20vec3(1.,1.,1.);','if(count\x20==\x201)','color\x20=\x20vec3(0.0,1.0,0.0);','else\x20if(count\x20==\x202)','color\x20=\x20vec3(0.0,0.0,1.0);','else\x20if(count\x20==\x203)','else\x20if(count\x20==\x204)','color\x20=\x20vec3(0.0,1.0,1.0);','if(count\x20==0)','color\x20=\x20vec3(1.0,0.0,0.0);','return\x20color;','vec3\x20traceRay(vec3\x20origin,\x20vec3\x20direction,\x20vec3\x20normal)\x20{','//\x20Reflect/Refract\x20ray\x20entering\x20the\x20diamond','const\x20float\x20n1\x20=\x201.0;','float\x20f0\x20=\x20(2.4-\x20n1)/(2.4\x20+\x20n1);','f0\x20*=\x20f0;','vec3\x20attenuationFactor\x20=\x20vec3(1.0);','vec3\x20brdfReflected\x20=\x20BRDF_Specular_GGX_Environment(reflectedDirection,\x20normal,\x20vec3(f0),\x200.0);','attenuationFactor\x20*=\x20(\x20vec3(1.0)\x20-\x20brdfRefracted);','outColor\x20+=\x20SampleSpecularReflection(vec4(1.0),\x20reflectedDirection\x20).rgb\x20*\x20brdfReflected;','int\x20count\x20=\x200;','newDirection\x20=\x20(InverseModelMatrix\x20*\x20vec4(newDirection,\x200.0)).xyz;','newDirection\x20=\x20normalize(newDirection);','origin\x20=\x20(InverseModelMatrix\x20*\x20vec4(origin,\x201.0)).xyz;','vec3\x20intersectedPos;','intersectedPos\x20=\x20intersectSphere(origin\x20+\x20vec3(epsilon),\x20newDirection);','vec3\x20dist\x20=\x20intersectedPos\x20-\x20origin;','vec3\x20d\x20=\x20normalize(intersectedPos\x20-\x20centreOffset);','vec3\x20mappedNormal\x20=\x20textureCube(\x20tCubeMapNormals,\x20d\x20).xyz;','mappedNormal\x20=\x202.\x20*\x20mappedNormal\x20-\x201.;','mappedNormal.y\x20+=\x20normalOffset;','mappedNormal\x20=\x20normalize(mappedNormal);','float\x20r\x20=\x20sqrt(dot(dist,\x20dist));','attenuationFactor\x20*=\x20exp(-r*Absorbption);','//\x20refract\x20the\x20ray\x20at\x20first\x20intersection\x20','vec3\x20oldOrigin\x20=\x20origin;','origin\x20=\x20intersectedPos\x20-\x20normalize(intersectedPos\x20-\x20centreOffset)\x20*\x20distanceOffset;','vec3\x20oldDir\x20=\x20newDirection;','newDirection\x20=\x20refract(newDirection,\x20mappedNormal,\x20refractiveIndex/n1);','newDirection\x20=\x20reflect(oldDir,\x20mappedNormal);','if(i\x20==\x20RAY_BOUNCES-1\x20)\x20//If\x20the\x20ray\x20got\x20trapped\x20even\x20after\x20max\x20iterations,\x20simply\x20sample\x20along\x20the\x20outgoing\x20refraction!\x20','vec3\x20d1\x20=\x20(modelMatrix\x20*\x20vec4(oldDir,\x200.0)).xyz;','outColor\x20+=\x20SampleSpecularContribution(vec4(1.0),\x20d1\x20).rgb\x20*\x20colorCorrection\x20*\x20attenuationFactor\x20\x20*\x20boostFactors\x20*\x20(vec3(1.0)\x20-\x20brdfReflected);','//outColor\x20=\x20vec3(1.,0.,0.);','//if(d1.y\x20>\x200.95)\x20{','//outColor\x20+=\x20d1.y\x20*\x20vec3(1.,0.,0)\x20*\x20attenuationFactor\x20*\x20(vec3(1.0)\x20-\x20brdfReflected)\x20*\x20boostFactors;','//}','vec3\x20brdfRefracted\x20=\x20BRDF_Specular_GGX_Environment(newDirection,\x20-mappedNormal,\x20vec3(f0),\x200.0);','//\x20outgoing(refracted)\x20ray\x27s\x20contribution\x20','vec3\x20d1\x20=\x20(modelMatrix\x20*\x20vec4(newDirection,\x200.0)).xyz;','vec3\x20colorG\x20=\x20SampleSpecularContribution(vec4(1.0),\x20d1\x20).rgb\x20*\x20(\x20vec3(1.0)\x20-\x20brdfRefracted);','vec3\x20dir1\x20=\x20refract(oldDir,\x20mappedNormal,\x20(refractiveIndex+rIndexDelta)/n1);','vec3\x20dir2\x20=\x20refract(oldDir,\x20mappedNormal,\x20(refractiveIndex-rIndexDelta)/n1);','vec3\x20d2\x20=\x20(modelMatrix\x20*\x20vec4(dir1,\x200.0)).xyz;','vec3\x20colorR\x20=\x20SampleSpecularContribution(vec4(1.0),\x20d2\x20).rgb\x20*\x20(\x20vec3(1.0)\x20-\x20brdfRefracted);','outColor\x20+=\x20vec3(colorR.r,\x20colorG.g,\x20colorB.b)\x20*\x20colorCorrection\x20*\x20attenuationFactor\x20*\x20boostFactors;','//new\x20reflected\x20ray\x20inside\x20the\x20diamond\x20','attenuationFactor\x20*=\x20brdfReflected\x20*\x20boostFactors;','count++;','if(false)','outColor\x20=\x20debugBounces(count);','return\x20outColor;','vec3\x20normalizedNormal\x20=\x20normalize(worldNormal);','vec3\x20viewVector\x20=\x20normalize(vecPos\x20-\x20cameraPosition);','gl_FragColor\x20=\x20vec4(color.rgb,1.);','#include\x20<tonemapping_fragment>','//#include\x20<encodings_fragment>','//gl_FragColor\x20=\x20textureCube(tCubeMapNormals,\x20normalize(Normal));','SparkleShader','varying\x20vec4\x20sparkleProjectedCentre;','uniform\x20mat4\x20ModelViewMatrix;','uniform\x20float\x20scale;','uniform\x20float\x20rotation;','void\x20main()\x20{\x20','vUv\x20=\x20uv;\x20','vec4\x20finalPosition;','vec2\x20alignedPosition\x20=\x20position.xy\x20*\x20scale;','vec2\x20rotatedPosition;','rotatedPosition.x\x20=\x20cos(\x20rotation\x20)\x20*\x20alignedPosition.x\x20-\x20sin(\x20rotation\x20)\x20*\x20alignedPosition.y;','rotatedPosition.y\x20=\x20sin(\x20rotation\x20)\x20*\x20alignedPosition.x\x20+\x20cos(\x20rotation\x20)\x20*\x20alignedPosition.y;','finalPosition\x20=\x20ModelViewMatrix\x20*\x20vec4(\x200.0,\x200.0,\x200.0,\x201.0\x20);','finalPosition.xy\x20+=\x20rotatedPosition;','finalPosition\x20=\x20projectionMatrix\x20*\x20finalPosition;','sparkleProjectedCentre\x20=\x20projectionMatrix\x20*\x20ModelViewMatrix\x20*\x20vec4(0.0,0.0,0.0,1.0\x20);','gl_Position\x20=\x20finalPosition;','uniform\x20sampler2D\x20sparkleTexture;','uniform\x20float\x20intensity;','vec3\x20ClosestPrimaryColor(vec3\x20color)\x20{','vec3\x20diffColor1\x20=\x20vec3(1.0,0.0,0.0)\x20-\x20color;','vec3\x20diffColor3\x20=\x20vec3(0.0,0.0,1.0)\x20-\x20color;','if(dot(diffColor1,\x20diffColor1)\x20<\x20margin)','return\x20vec3(1.0,\x20margin,\x20margin);\x20','if(dot(diffColor2,\x20diffColor2)\x20<\x20margin)','return\x20vec3(margin,\x20margin,\x201.0);','vec2\x20uv\x20=\x20(sparkleProjectedCentre.xy/sparkleProjectedCentre.w\x20+\x201.0)*0.5;','float\x20noise\x20=\x20texture2D(\x20noiseTexture,\x20uv\x20).r;','screenColor.xyz\x20*=\x20screenColor.xyz;','//float\x20luminance\x20=\x20dot(vec3(0.3,\x200.59,\x200.11),\x20screenColor.xyz);','//luminance\x20=\x20luminance\x20>\x200.0\x20?\x20luminance\x20:\x200.0;','vec4\x20spriteColor\x20=\x20vec4(1.)\x20*\x20texture2D(\x20sparkleTexture,\x20vUv\x20).a\x20*\x20screenColor\x20*\x20noise\x20*\x20intensity;','gl_FragColor\x20=\x20spriteColor;','NormalMapCaptureShader','DiamondShader','Sparkle','PlaneGeometry','depthTest','depthWrite','transparent','side','AdditiveBlending','texture','sparkleTexture','noiseTexture','Mesh','shallowCopy','positionOffset','intensity','screenTexture','ModelViewMatrix','setIntensity','setRotationSpeedFactor','updateMatrix','matrixWorldInverse','modelViewMatrix','applyMatrix4','apply','{}.constructor(\x22return\x20this\x22)(\x20)','console','log','warn','debug','info','error','exception','trace','exports','call','defineProperty','__esModule','default','prototype','hasOwnProperty','traverse','isMesh','name','geometry','transformed','set','getAttribute','array','index','length','sub','cross','add','normalize','computeBoundingBox','computeBoundingSphere','identity','boundingSphere','center','makeTranslation','dot','abs','crossVectors','Matrix4','elements','getInverse','applyMatrix','radius','makeScale','multiply','compose','position','quaternion','Quaternion','Vector3','decompose','copy','prototypeMaterials','toLowerCase','includes','substring','configurationParams','diamondConfiguration','material','uniforms','color','Color','boostFactors','squashFactor','value','rIndexDelta','geometryFactor','refractiveIndex','needsUpdate','DiamondUtils','processScene','quality','medium','DiamondMaterial','updateMatrixWorld','envMap','Diamond','push','setGemstoneConfig','envCubeMap','getMesh','diamond','clone','boundingBox','getCenter','centreOffset','updateDiamond','getCentreOffset','getBoundingRadius','setPosition','rotation','setScale','sparkles','setTransform','matrix','matrixWorld','InverseModelMatrix','syncWithTransform','mesh','setRotation','rotationSpeedFactor','alignWithCamera','CubeCamera','ShaderMaterial','extensions','defines','diamondMaterial','vertexShader','renderTarget','generateMipmaps','magFilter','NearestFilter','minFilter','format','RGBAFormat','normalMapCaptureMaterial','scale','prepareNormalsCubeMap','UniformsUtils','fragmentShader','update','tCubeMapNormals','dispose','varying\x20vec3\x20vNormal;','void\x20main()\x20{','vNormal\x20=\x20normal;','gl_Position\x20=\x20projectionMatrix\x20*\x20modelViewMatrix\x20*\x20vec4(\x20position,\x201.0\x20);','join','vec3\x20color\x20=\x20normalize(vNormal);','color\x20=\x20color\x20*\x200.5\x20+\x200.5;','gl_FragColor\x20=\x20vec4(\x20color.x,\x20color.y,\x20color.z,\x201.0\x20);','DoubleSide','varying\x20vec2\x20vUv;','varying\x20vec3\x20Normal;','varying\x20vec3\x20worldNormal;','varying\x20vec3\x20vecPos;','varying\x20vec3\x20viewPos;','vUv\x20=\x20uv;','worldNormal\x20=\x20(modelMatrix\x20*\x20vec4(normal,0.0)).xyz;','vecPos\x20=\x20(modelMatrix\x20*\x20vec4(position,\x201.0\x20)).xyz;','viewPos\x20=\x20(modelViewMatrix\x20*\x20vec4(position,\x201.0\x20)).xyz;','uniform\x20samplerCube\x20tCubeMapNormals;','uniform\x20samplerCube\x20envMap;','uniform\x20samplerCube\x20envRefractionMap;','uniform\x20sampler2D\x20sphereMap;','uniform\x20float\x20envMapIntensity;','uniform\x20float\x20tanAngleSqCone;','uniform\x20int\x20maxBounces;','uniform\x20mat4\x20modelMatrix;','uniform\x20mat4\x20InverseModelMatrix;','uniform\x20float\x20refractiveIndex;','uniform\x20float\x20radius;','uniform\x20bool\x20bDebugBounces;','uniform\x20float\x20rIndexDelta;','uniform\x20float\x20normalOffset;','uniform\x20float\x20distanceOffset;','uniform\x20vec3\x20Absorbption;','uniform\x20vec3\x20colorCorrection;','uniform\x20vec3\x20boostFactors;','float\x20dotNV\x20=\x20abs(\x20dot(\x20normal,\x20viewDir\x20)\x20);','const\x20vec4\x20c1\x20=\x20vec4(\x201,\x200.0425,\x201.04,\x20-\x200.04\x20);','vec4\x20r\x20=\x20roughness\x20*\x20c0\x20+\x20c1;','vec2\x20AB\x20=\x20vec2(\x20-1.04,\x201.04\x20)\x20*\x20a004\x20+\x20r.zw;','return\x20specularColor\x20*\x20AB.x\x20+\x20AB.y;','vec4\x20SampleSpecularReflection(vec4\x20specularColor,\x20vec3\x20direction\x20)\x20{','direction.z\x20*=\x20-1.0;','vec3\x20tempDir\x20=\x20normalize(vec3(0.,\x200.,\x201.)\x20+\x20direction);','vec4\x20sampleColorRGB\x20=\x20envMapIntensity\x20*\x20envMapTexelToLinear(\x20textureCube(\x20envMap,\x20direction\x20)\x20);','vec4\x20sampleColorRefraction\x20=\x20envMapIntensity\x20*\x20(\x20texture2D(\x20sphereMap,\x20tempDir.xy\x20*\x200.5\x20+\x200.5\x20)\x20);','vec3\x20toneMappedColor\x20=\x20pow(toneMapping(sampleColorRGB.rgb),vec3(1./1.));','return\x20vec4(toneMappedColor,\x201.0);','vec4\x20SampleSpecularContribution(vec4\x20specularColor,\x20vec3\x20direction\x20)\x20{','direction\x20=\x20normalize(direction);','float\x20m\x20=\x202.8284271247461903\x20*\x20sqrt(\x20direction.z+1.0\x20);','vec4\x20sampleColorRefraction\x20=\x20envMapIntensity\x20*\x20texture2D(\x20sphereMap,\x20clamp(direction.xy\x20/\x20m\x20+\x200.45,\x20vec2(0.),\x20vec2(1.))\x20);','vec3\x20toneMappedColor\x20=\x20pow(toneMapping(\x20sampleColorRGB.rgb\x20),vec3(1./1.));','vec3\x20intersectSphere(vec3\x20origin,\x20vec3\x20direction)\x20{'];(function(_0x548817,_0x40b2fe){var _0x5a771c=function(_0x33a0be){while(--_0x33a0be){_0x548817['push'](_0x548817['shift']());}};_0x5a771c(++_0x40b2fe);}(_0x2df2,0x1c5));var _0x3028=function(_0x2b0235,_0x5a4bb8){_0x2b0235=_0x2b0235-0x0;var _0x13d51d=_0x2df2[_0x2b0235];return _0x13d51d;};!function(_0x2a4370){var _0x18035a=function(){var _0x4e5b2a=!![];return function(_0x9eac4e,_0x1a1ffd){var _0x1a9f38=_0x4e5b2a?function(){if(_0x1a1ffd){var _0x3500f8=_0x1a1ffd[_0x3028('0x0')](_0x9eac4e,arguments);_0x1a1ffd=null;return _0x3500f8;}}:function(){};_0x4e5b2a=![];return _0x1a9f38;};}();var _0x50e468={};function _0x529400(_0x556abe){var _0x27ee7c=_0x18035a(this,function(){var _0x3b3ccb=function(){};var _0x34c390;try{var _0x3509a3=Function('return\x20(function()\x20'+_0x3028('0x1')+');');_0x34c390=_0x3509a3();}catch(_0x4a3840){_0x34c390=window;}if(!_0x34c390['console']){_0x34c390[_0x3028('0x2')]=function(_0x3b3ccb){var _0x498003={};_0x498003[_0x3028('0x3')]=_0x3b3ccb;_0x498003[_0x3028('0x4')]=_0x3b3ccb;_0x498003[_0x3028('0x5')]=_0x3b3ccb;_0x498003[_0x3028('0x6')]=_0x3b3ccb;_0x498003[_0x3028('0x7')]=_0x3b3ccb;_0x498003[_0x3028('0x8')]=_0x3b3ccb;_0x498003[_0x3028('0x9')]=_0x3b3ccb;return _0x498003;}(_0x3b3ccb);}else{_0x34c390[_0x3028('0x2')][_0x3028('0x3')]=_0x3b3ccb;_0x34c390[_0x3028('0x2')][_0x3028('0x4')]=_0x3b3ccb;_0x34c390[_0x3028('0x2')][_0x3028('0x5')]=_0x3b3ccb;_0x34c390[_0x3028('0x2')][_0x3028('0x6')]=_0x3b3ccb;_0x34c390[_0x3028('0x2')][_0x3028('0x7')]=_0x3b3ccb;_0x34c390[_0x3028('0x2')]['exception']=_0x3b3ccb;_0x34c390['console'][_0x3028('0x9')]=_0x3b3ccb;}});_0x27ee7c();if(_0x50e468[_0x556abe])return _0x50e468[_0x556abe][_0x3028('0xa')];var _0x4cd010=_0x50e468[_0x556abe]={'i':_0x556abe,'l':!0x1,'exports':{}};return _0x2a4370[_0x556abe][_0x3028('0xb')](_0x4cd010[_0x3028('0xa')],_0x4cd010,_0x4cd010[_0x3028('0xa')],_0x529400),_0x4cd010['l']=!0x0,_0x4cd010[_0x3028('0xa')];}_0x529400['m']=_0x2a4370,_0x529400['c']=_0x50e468,_0x529400['d']=function(_0x2a4370,_0x50e468,_0x5e6aa6){_0x529400['o'](_0x2a4370,_0x50e468)||Object[_0x3028('0xc')](_0x2a4370,_0x50e468,{'configurable':!0x1,'enumerable':!0x0,'get':_0x5e6aa6});},_0x529400['n']=function(_0x2a4370){var _0x50e468=_0x2a4370&&_0x2a4370[_0x3028('0xd')]?function(){return _0x2a4370[_0x3028('0xe')];}:function(){return _0x2a4370;};return _0x529400['d'](_0x50e468,'a',_0x50e468),_0x50e468;},_0x529400['o']=function(_0x2a4370,_0x50e468){return Object[_0x3028('0xf')][_0x3028('0x10')]['call'](_0x2a4370,_0x50e468);},_0x529400['p']='',_0x529400(_0x529400['s']=0x0);}([function(_0x13619a,_0x40443c,_0x812055){_0x13619a[_0x3028('0xa')]=IJEWEL={},_0x812055(0x1),_0x812055(0x2);},function(_0x1bd397,_0x1b4840){function _0x19943f(_0x1bd397,_0x1b4840){_0x1bd397[_0x3028('0x11')](_0x1bd397=>{if(_0x1bd397[_0x3028('0x12')]){const _0x19943f=_0x36ea18(_0x1bd397,_0x1b4840)||_0x4484a1(_0x1bd397,_0x1b4840);let _0x41103f=_0x19943f&&_0x19943f[_0x3028('0x13')];_0x41103f||(_0x41103f=_0x1bd397[_0x3028('0x13')]['toLowerCase']()['includes']('diamond')?'diamond':void 0x0),_0x41103f&&(!function(_0x1bd397){let _0x1b4840=_0x1bd397[_0x3028('0x14')];if(_0x1b4840[_0x3028('0x15')])return;_0x205a9c[_0x3028('0x16')](0x0,0x0,0x0);let _0x19943f=_0x1b4840[_0x3028('0x17')]('position')[_0x3028('0x18')],_0x152f0a=_0x1b4840[_0x3028('0x19')];if(_0x152f0a){let _0x1bd397=_0x152f0a['array'];for(let _0x1b4840=0x0;_0x1b4840<_0x1bd397[_0x3028('0x1a')]/0x3;_0x1b4840+=0x3){let _0x152f0a=0x3*_0x1bd397[_0x1b4840],_0x8d7925=0x3*_0x1bd397[_0x1b4840+0x1],_0x41103f=0x3*_0x1bd397[_0x1b4840+0x2];_0x40861b[_0x3028('0x16')](_0x19943f[_0x152f0a],_0x19943f[_0x152f0a+0x1],_0x19943f[_0x152f0a+0x2]),_0x41d085[_0x3028('0x16')](_0x19943f[_0x8d7925],_0x19943f[_0x8d7925+0x1],_0x19943f[_0x8d7925+0x2]),_0x5c0c6b[_0x3028('0x16')](_0x19943f[_0x41103f],_0x19943f[_0x41103f+0x1],_0x19943f[_0x41103f+0x2]),_0x41d085['sub'](_0x40861b),_0x5c0c6b[_0x3028('0x1b')](_0x40861b),_0x5c0c6b[_0x3028('0x1c')](_0x41d085),_0x205a9c[_0x3028('0x1d')](_0x5c0c6b);}}else for(let _0x1bd397=0x0;_0x1bd397<_0x19943f[_0x3028('0x1a')];_0x1bd397+=0x9)_0x40861b[_0x3028('0x16')](_0x19943f[_0x1bd397],_0x19943f[_0x1bd397+0x1],_0x19943f[_0x1bd397+0x2]),_0x41d085['set'](_0x19943f[_0x1bd397+0x3],_0x19943f[_0x1bd397+0x4],_0x19943f[_0x1bd397+0x5]),_0x5c0c6b[_0x3028('0x16')](_0x19943f[_0x1bd397+0x6],_0x19943f[_0x1bd397+0x7],_0x19943f[_0x1bd397+0x8]),_0x41d085['sub'](_0x40861b),_0x5c0c6b[_0x3028('0x1b')](_0x40861b),_0x5c0c6b[_0x3028('0x1c')](_0x41d085),_0x5c0c6b[_0x3028('0x1e')](),_0x205a9c[_0x3028('0x1d')](_0x5c0c6b);_0x205a9c['normalize'](),_0x1b4840[_0x3028('0x1f')](),_0x1b4840[_0x3028('0x20')]();let _0x19ba39=new THREE['Matrix4']();_0x19ba39[_0x3028('0x21')]();let _0x41103f=_0x1b4840[_0x3028('0x22')][_0x3028('0x23')];_0x19ba39[_0x3028('0x24')](_0x41103f['x'],_0x41103f['y'],_0x41103f['z']),_0x1b4840['center']();let _0x4707c8=!0x1,_0x54c1e=0x0;for(;!_0x4707c8;){_0x40861b[_0x3028('0x16')](_0x19943f[_0x54c1e],_0x19943f[_0x54c1e+0x1],_0x19943f[_0x54c1e+0x2]),_0x40861b[_0x3028('0x1e')]();let _0x1bd397=_0x205a9c[_0x3028('0x25')](_0x40861b);Math[_0x3028('0x26')](_0x1bd397-0x1)>0.001&&(_0x4707c8=!0x0),_0x54c1e+=0x3;}_0x41d085['crossVectors'](_0x40861b,_0x205a9c),_0x41d085['normalize']();let _0x2c8524=_0x205a9c[_0x3028('0x25')](_0x41d085);_0x40861b[_0x3028('0x27')](_0x205a9c,_0x41d085),_0x40861b[_0x3028('0x1e')](),_0x2c8524=_0x205a9c[_0x3028('0x25')](_0x40861b),_0x2c8524=_0x41d085[_0x3028('0x25')](_0x40861b);let _0x4edc95=new THREE[(_0x3028('0x28'))]();_0x4edc95[_0x3028('0x29')][0x0]=_0x40861b['x'],_0x4edc95[_0x3028('0x29')][0x1]=_0x40861b['y'],_0x4edc95['elements'][0x2]=_0x40861b['z'],_0x4edc95[_0x3028('0x29')][0x3]=0x0,_0x4edc95[_0x3028('0x29')][0x4]=_0x205a9c['x'],_0x4edc95['elements'][0x5]=_0x205a9c['y'],_0x4edc95['elements'][0x6]=_0x205a9c['z'],_0x4edc95[_0x3028('0x29')][0x7]=0x0,_0x4edc95[_0x3028('0x29')][0x8]=_0x41d085['x'],_0x4edc95[_0x3028('0x29')][0x9]=_0x41d085['y'],_0x4edc95[_0x3028('0x29')][0xa]=_0x41d085['z'],_0x4edc95[_0x3028('0x29')][0xb]=0x0,_0x4edc95[_0x3028('0x29')][0xc]=0x0,_0x4edc95[_0x3028('0x29')][0xd]=0x0,_0x4edc95[_0x3028('0x29')][0xe]=0x0,_0x4edc95[_0x3028('0x29')][0xf]=0x1;let _0x5d8cc0=new THREE[(_0x3028('0x28'))]();_0x5d8cc0[_0x3028('0x2a')](_0x4edc95),_0x1b4840[_0x3028('0x2b')](_0x5d8cc0),_0x1b4840[_0x3028('0x20')]();let _0x4a1319=_0x1b4840[_0x3028('0x22')][_0x3028('0x2c')],_0xe7ce2b=new THREE[(_0x3028('0x28'))]();_0xe7ce2b[_0x3028('0x21')](),_0xe7ce2b[_0x3028('0x2d')](_0x4a1319,_0x4a1319,_0x4a1319);let _0x56b89f=new THREE[(_0x3028('0x28'))]();_0x56b89f[_0x3028('0x2a')](_0xe7ce2b),_0x1b4840[_0x3028('0x2b')](_0x56b89f),_0x4edc95[_0x3028('0x2e')](_0xe7ce2b),_0x19ba39['multiply'](_0x4edc95);let _0x554b50=new THREE[(_0x3028('0x28'))]();_0x554b50[_0x3028('0x2f')](_0x1bd397[_0x3028('0x30')],_0x1bd397[_0x3028('0x31')],_0x1bd397['scale']),_0x554b50[_0x3028('0x2e')](_0x19ba39);let _0x768566=new THREE['Vector3'](),_0x2136bc=new THREE[(_0x3028('0x32'))](),_0x1d6e7a=new THREE[(_0x3028('0x33'))]();_0x554b50[_0x3028('0x34')](_0x768566,_0x2136bc,_0x1d6e7a),_0x1bd397[_0x3028('0x30')][_0x3028('0x35')](_0x768566),_0x1bd397[_0x3028('0x31')]['copy'](_0x2136bc),_0x1bd397['scale'][_0x3028('0x35')](_0x1d6e7a),_0x1b4840[_0x3028('0x15')]=!0x0;}(_0x1bd397),IJEWEL['DiamondUtils'][_0x3028('0x36')][_0x41103f]||(IJEWEL['DiamondUtils'][_0x3028('0x36')][_0x41103f]=_0x1bd397));}});}function _0x4484a1(_0x1bd397,_0x1b4840){let _0x19943f;const _0x4484a1=_0x1bd397[_0x3028('0x13')][_0x3028('0x37')]();if(_0x1b4840&&_0x1b4840['diamondClass']){const _0x1bd397=_0x1b4840['diamondClass'];for(let _0x1b4840 in _0x1bd397){let _0x19943f=_0x1bd397[_0x1b4840];if(_0x19943f[_0x3028('0x13')]&&_0x4484a1[_0x3028('0x38')](_0x19943f[_0x3028('0x13')]['toLowerCase']()))return _0x19943f;}}else _0x1b4840&&!_0x1b4840['diamondConfiguration']&&_0x4484a1[_0x3028('0x38')]('diamond')&&(_0x19943f={'name':_0x1bd397[_0x3028('0x13')][_0x3028('0x39')](0x0,0x8)});return _0x19943f;}function _0x36ea18(_0x1bd397,_0x1b4840){_0x1b4840=_0x1b4840||this[_0x3028('0x3a')];const _0x19943f=_0x1bd397['name'][_0x3028('0x37')]();if(_0x1b4840&&_0x1b4840['diamondConfiguration']){const _0x1bd397=_0x1b4840[_0x3028('0x3b')];for(let _0x1b4840 in _0x1bd397){let _0x4484a1=_0x1bd397[_0x1b4840];if(_0x4484a1[_0x3028('0x13')]&&_0x19943f===_0x4484a1[_0x3028('0x13')][_0x3028('0x37')]())return _0x4484a1;}}else _0x19943f[_0x3028('0x38')]('diamond');}function _0x5ce20e(_0x1bd397,_0x1b4840){const _0x19943f=_0x1bd397[_0x3028('0x3c')],_0x4484a1=_0x19943f[_0x3028('0x3d')]['Absorbption']['value'];if(void 0x0!==_0x1b4840[_0x3028('0x3e')]){const _0x1bd397=new THREE[(_0x3028('0x3f'))](_0x1b4840[_0x3028('0x3e')]);_0x4484a1['x']=0x1-_0x1bd397['r'],_0x4484a1['y']=0x1-_0x1bd397['g'],_0x4484a1['z']=0x1-_0x1bd397['b'];}const _0x36ea18=_0x19943f['uniforms'][_0x3028('0x40')]['value'];if(void 0x0!==_0x1b4840[_0x3028('0x40')]){new THREE[(_0x3028('0x3f'))](_0x1b4840['boostFactors']);_0x36ea18['x']=_0x1b4840[_0x3028('0x40')]['x'],_0x36ea18['y']=_0x1b4840[_0x3028('0x40')]['y'],_0x36ea18['z']=_0x1b4840[_0x3028('0x40')]['z'];}void 0x0!==_0x1b4840[_0x3028('0x41')]&&(_0x19943f[_0x3028('0x3d')][_0x3028('0x41')][_0x3028('0x42')]=_0x1b4840[_0x3028('0x41')]),void 0x0!==_0x1b4840[_0x3028('0x43')]&&(_0x19943f[_0x3028('0x3d')][_0x3028('0x43')][_0x3028('0x42')]=_0x1b4840[_0x3028('0x43')]),void 0x0!==_0x1b4840[_0x3028('0x44')]&&(_0x19943f[_0x3028('0x3d')][_0x3028('0x44')][_0x3028('0x42')]=_0x1b4840[_0x3028('0x44')]),void 0x0!==_0x1b4840[_0x3028('0x45')]&&(_0x19943f[_0x3028('0x3d')]['refractiveIndex'][_0x3028('0x42')]=_0x1b4840[_0x3028('0x45')]),_0x19943f[_0x3028('0x46')]=!0x0;}const _0x40861b=new THREE[(_0x3028('0x33'))](),_0x41d085=new THREE['Vector3'](),_0x5c0c6b=new THREE[(_0x3028('0x33'))](),_0x205a9c=new THREE[(_0x3028('0x33'))]();IJEWEL[_0x3028('0x47')]={},_0x1bd397[_0x3028('0xa')]=IJEWEL[_0x3028('0x47')][_0x3028('0x48')]=function(_0x1bd397,_0x1b4840,_0x40861b){return IJEWEL[_0x3028('0x47')]['prototypeMaterials']=[],_0x19943f(_0x1b4840,_0x40861b),function(_0x1bd397,_0x1b4840,_0x19943f){let _0x40861b=[],_0x41d085=_0x19943f&&_0x19943f['envCubeMap'];for(var _0x5c0c6b in IJEWEL[_0x3028('0x47')][_0x3028('0x36')]){const _0x1b4840=IJEWEL[_0x3028('0x47')]['prototypeMaterials'][_0x5c0c6b];let _0x4484a1;_0x4484a1=_0x19943f&&_0x19943f[_0x3028('0x49')]?'low'===_0x19943f[_0x3028('0x49')]?0x40:_0x3028('0x4a')===_0x19943f[_0x3028('0x49')]?0x100:'high'===_0x19943f['quality']?0x400:0x100:0x100;const _0x36ea18=new IJEWEL[(_0x3028('0x4b'))](_0x1b4840,_0x41d085,_0x1bd397,_0x4484a1);IJEWEL[_0x3028('0x47')]['prototypeMaterials'][_0x5c0c6b]=_0x36ea18;}return _0x1b4840[_0x3028('0x4c')](),_0x1b4840['traverse'](_0x1bd397=>{if(_0x1bd397[_0x3028('0x12')]){_0x1bd397[_0x3028('0x3c')]&&(_0x1bd397['material'][_0x3028('0x4d')]=_0x41d085);const _0x1b4840=_0x4484a1(_0x1bd397,_0x19943f),_0x5c0c6b=_0x36ea18(_0x1bd397,_0x19943f);let _0x205a9c=_0x5c0c6b&&_0x5c0c6b['name'];if((_0x205a9c=_0x205a9c||_0x1b4840&&_0x1b4840['name'])||(_0x205a9c=_0x1bd397[_0x3028('0x13')][_0x3028('0x37')]()[_0x3028('0x38')]('diamond')?'diamond':void 0x0),_0x205a9c&&IJEWEL[_0x3028('0x47')][_0x3028('0x36')][_0x205a9c]){let _0x19943f=IJEWEL[_0x3028('0x47')][_0x3028('0x36')][_0x205a9c];const _0x4484a1=new IJEWEL[(_0x3028('0x4e'))](_0x1bd397,_0x19943f);_0x5ce20e(_0x1bd397,_0x5c0c6b||_0x1b4840||{'name':_0x205a9c}),_0x40861b[_0x3028('0x4f')](_0x4484a1);}}}),_0x40861b;}(_0x1bd397,_0x1b4840,_0x40861b);},_0x1bd397['exports']=IJEWEL[_0x3028('0x47')][_0x3028('0x50')]=function(_0x1bd397,_0x1b4840){let _0x19943f=_0x1b4840&&_0x1b4840[_0x3028('0x51')];_0x1bd397['forEach'](_0x1bd397=>{const _0x40861b=_0x1bd397[_0x3028('0x52')]();if(_0x40861b[_0x3028('0x12')]){_0x40861b['material']&&_0x19943f&&(_0x40861b[_0x3028('0x3c')][_0x3028('0x3d')]['envMap'][_0x3028('0x42')]=_0x19943f,_0x40861b[_0x3028('0x3c')][_0x3028('0x4d')]=_0x19943f);const _0x1bd397=_0x4484a1(_0x40861b,_0x1b4840),_0x41d085=_0x36ea18(_0x40861b,_0x1b4840);let _0x5c0c6b=_0x1bd397&&_0x1bd397[_0x3028('0x13')];if(_0x5c0c6b=_0x5c0c6b||_0x41d085&&_0x41d085[_0x3028('0x13')]||_0x3028('0x53')){_0x5ce20e(_0x40861b,_0x41d085||_0x1bd397||{'name':_0x5c0c6b});}}});};},function(_0x9e2626,_0x5df325,_0x467a9e){_0x467a9e(0x3),_0x467a9e(0x4),_0x9e2626[_0x3028('0xa')]=IJEWEL[_0x3028('0x4e')]=class{constructor(_0x9e2626,_0x5df325){this['t']=_0x9e2626,this['t'][_0x3028('0x3c')]=_0x5df325[_0x3028('0x54')](),this['v']=[],this['t'][_0x3028('0x14')][_0x3028('0x1f')](),this['u']=new THREE[(_0x3028('0x33'))](),this['t'][_0x3028('0x14')][_0x3028('0x55')][_0x3028('0x56')](this['u']),this['t'][_0x3028('0x3c')][_0x3028('0x3d')][_0x3028('0x57')][_0x3028('0x42')]['copy'](this['u']),this['t']['geometry'][_0x3028('0x20')](),this['h']=this['t'][_0x3028('0x14')][_0x3028('0x22')]['radius'],this['t'][_0x3028('0x3c')][_0x3028('0x3d')][_0x3028('0x2c')][_0x3028('0x42')]=this['h'];let _0x467a9e=this;this['t']['onBeforeRender']=function(_0x9e2626,_0x5df325,_0x3c1e1c){_0x467a9e[_0x3028('0x58')](_0x3c1e1c);};}[_0x3028('0x59')](){return this['u'];}[_0x3028('0x5a')](){return this['h'];}[_0x3028('0x52')](){return this['t'];}[_0x3028('0x5b')](_0x9e2626,_0x5df325,_0x467a9e){this['t'][_0x3028('0x30')][_0x3028('0x16')](_0x9e2626,_0x5df325,_0x467a9e);}['setRotation'](_0x9e2626,_0x5df325,_0x467a9e){this['t'][_0x3028('0x5c')][_0x3028('0x16')](_0x9e2626,_0x5df325,_0x467a9e);}['setQuaternion'](_0x9e2626,_0x5df325,_0x467a9e,_0x95162e){this['t'][_0x3028('0x31')][_0x3028('0x16')](_0x9e2626,_0x5df325,_0x467a9e,_0x95162e);}[_0x3028('0x5d')](_0x9e2626,_0x5df325,_0x467a9e){this['t']['scale'][_0x3028('0x16')](_0x9e2626,_0x5df325,_0x467a9e);for(var _0xbbbe1=0x0;_0xbbbe1<this[_0x3028('0x5e')][_0x3028('0x1a')];_0xbbbe1++)this['v'][_0xbbbe1][_0x3028('0x5d')](_0x9e2626);}[_0x3028('0x5f')](_0x9e2626){this['t'][_0x3028('0x60')][_0x3028('0x35')](_0x9e2626);}[_0x3028('0x58')](_0x9e2626){let _0x5df325=new THREE[(_0x3028('0x33'))]();this['t'][_0x3028('0x4c')]();let _0x467a9e=this['t'][_0x3028('0x61')],_0x4cfe3b=this['t'][_0x3028('0x3c')][_0x3028('0x3d')][_0x3028('0x62')];if(_0x4cfe3b){_0x4cfe3b[_0x3028('0x42')][_0x3028('0x2a')](_0x467a9e);}for(var _0x1e1228=0x0;_0x1e1228<this['v'][_0x3028('0x1a')];_0x1e1228++){this['v'][_0x1e1228][_0x3028('0x63')](this['t'][_0x3028('0x61')]),_0x5df325[_0x3028('0x35')](_0x9e2626[_0x3028('0x30')]),_0x5df325[_0x3028('0x1b')](this['v'][_0x1e1228][_0x3028('0x64')]['position']),_0x5df325[_0x3028('0x1e')]();var _0xf6b95d=_0x5df325['x']+_0x5df325['y']+_0x5df325['z'];this['v'][_0x1e1228][_0x3028('0x65')](_0xf6b95d*this['v'][_0x1e1228][_0x3028('0x66')]),this['v'][_0x1e1228][_0x3028('0x67')](_0x9e2626);}}['addSparkle'](_0x9e2626){this['v'][_0x3028('0x4f')](_0x9e2626);}},_0x9e2626[_0x3028('0xa')]=IJEWEL[_0x3028('0x4b')]=class{constructor(_0x9e2626,_0x5df325,_0x467a9e,_0xbcbfb){this['C']=null,this['t']=null,this['R']=null,_0xbcbfb=_0xbcbfb||0x400,this['M']=_0x5df325,this['T']=new THREE[(_0x3028('0x68'))](0.0001,0x64,_0xbcbfb),this['I']=new THREE['Scene'](),this['I'][_0x3028('0x1d')](this['T']),this['D']=new THREE[(_0x3028('0x69'))](),this['D'][_0x3028('0x6a')]=IJEWEL['diamondMaterial'][_0x3028('0x6a')],this['D'][_0x3028('0x6b')]=IJEWEL[_0x3028('0x6c')][_0x3028('0x6b')],this['D'][_0x3028('0x3d')]=THREE['UniformsUtils'][_0x3028('0x54')](IJEWEL[_0x3028('0x6c')]['uniforms']),this['D'][_0x3028('0x3d')][_0x3028('0x4d')][_0x3028('0x42')]=this['M'],this['D'][_0x3028('0x6d')]=IJEWEL[_0x3028('0x6c')][_0x3028('0x6d')],this['D']['fragmentShader']=IJEWEL[_0x3028('0x6c')]['fragmentShader'],this['T'][_0x3028('0x6e')]['texture'][_0x3028('0x6f')]=!0x1,this['T'][_0x3028('0x6e')]['texture'][_0x3028('0x70')]=THREE[_0x3028('0x71')],this['T'][_0x3028('0x6e')]['texture'][_0x3028('0x72')]=THREE['NearestFilter'],this['T']['renderTarget']['texture'][_0x3028('0x73')]=THREE[_0x3028('0x74')],this['H']=!0x0,this['t']=_0x9e2626,this['R']=this['t'][_0x3028('0x54')](),this['R'][_0x3028('0x3c')]=IJEWEL[_0x3028('0x75')],this['R'][_0x3028('0x14')]=_0x9e2626[_0x3028('0x14')]['clone'](),this['R']['geometry'][_0x3028('0x23')](),this['C']=_0x9e2626[_0x3028('0x14')],this['C'][_0x3028('0x1f')](),this['u']=new THREE[(_0x3028('0x33'))](),this['C'][_0x3028('0x55')][_0x3028('0x56')](this['u']),this['C']['computeBoundingSphere'](),this['R'][_0x3028('0x30')]['set'](0x0,0x0,0x0),this['R'][_0x3028('0x5c')][_0x3028('0x16')](0x0,0x0,0x0),this['R'][_0x3028('0x31')][_0x3028('0x16')](0x0,0x0,0x0,0x1),this['R'][_0x3028('0x76')][_0x3028('0x16')](0x1,0x1,0x1),this['I'][_0x3028('0x1d')](this['R']),this[_0x3028('0x77')](_0x467a9e),this['v']=[];}[_0x3028('0x54')](){const _0x9e2626=new THREE[(_0x3028('0x69'))]();return _0x9e2626['uniforms']=THREE[_0x3028('0x78')][_0x3028('0x54')](this['D'][_0x3028('0x3d')]),_0x9e2626[_0x3028('0x6a')]=this['D'][_0x3028('0x6a')],_0x9e2626[_0x3028('0x6b')]=this['D'][_0x3028('0x6b')],_0x9e2626[_0x3028('0x3d')]['tCubeMapNormals'][_0x3028('0x42')]=this['T']['renderTarget']['texture'],_0x9e2626[_0x3028('0x3d')]['envMap'][_0x3028('0x42')]=this['M'],_0x9e2626[_0x3028('0x4d')]=this['M'],_0x9e2626[_0x3028('0x6d')]=this['D'][_0x3028('0x6d')],_0x9e2626[_0x3028('0x79')]=this['D'][_0x3028('0x79')],_0x9e2626;}['prepareNormalsCubeMap'](_0x9e2626){this['H']&&(this['T'][_0x3028('0x7a')](_0x9e2626,this['I']),this['D'][_0x3028('0x3d')][_0x3028('0x7b')][_0x3028('0x42')]=this['T'][_0x3028('0x6e')],this['H']=!0x1);}[_0x3028('0x7c')](){this['T'][_0x3028('0x6e')]['dispose'](),this['R'][_0x3028('0x14')][_0x3028('0x7c')](),this['D'][_0x3028('0x7c')]();}};},function(_0x198e27,_0x21b4a2){_0x198e27['exports']=IJEWEL['NormalMapCaptureShader']={'vertexShader':[_0x3028('0x7d'),_0x3028('0x7e'),_0x3028('0x7f'),_0x3028('0x80'),'}'][_0x3028('0x81')]('\x0a'),'fragmentShader':[_0x3028('0x7d'),_0x3028('0x7e'),_0x3028('0x82'),_0x3028('0x83'),_0x3028('0x84'),'}'][_0x3028('0x81')]('\x0a'),'side':THREE[_0x3028('0x85')]},_0x198e27[_0x3028('0xa')]=IJEWEL['DiamondShader']={'defines':{'RAY_BOUNCES':0x5},'vertexShader':[_0x3028('0x86'),_0x3028('0x87'),_0x3028('0x88'),_0x3028('0x89'),_0x3028('0x8a'),_0x3028('0x7e'),_0x3028('0x8b'),'Normal\x20=\x20\x20normal;',_0x3028('0x8c'),_0x3028('0x8d'),_0x3028('0x8e'),'gl_Position\x20=\x20projectionMatrix\x20*\x20modelViewMatrix\x20*\x20vec4(\x20position,\x201.0\x20);','}']['join']('\x0a'),'fragmentShader':[_0x3028('0x86'),_0x3028('0x87'),_0x3028('0x88'),_0x3028('0x89'),_0x3028('0x8a'),_0x3028('0x8f'),_0x3028('0x90'),_0x3028('0x91'),_0x3028('0x92'),_0x3028('0x93'),_0x3028('0x94'),'uniform\x20float\x20coneHeight;',_0x3028('0x95'),_0x3028('0x96'),_0x3028('0x97'),_0x3028('0x98'),_0x3028('0x99'),_0x3028('0x9a'),_0x3028('0x9b'),_0x3028('0x9c'),'uniform\x20float\x20squashFactor;',_0x3028('0x9d'),'uniform\x20float\x20geometryFactor;',_0x3028('0x9e'),_0x3028('0x9f'),_0x3028('0xa0'),'uniform\x20vec3\x20centreOffset;','vec3\x20BRDF_Specular_GGX_Environment(\x20const\x20in\x20vec3\x20viewDir,\x20const\x20in\x20vec3\x20normal,\x20const\x20in\x20vec3\x20specularColor,\x20const\x20in\x20float\x20roughness\x20)\x20{',_0x3028('0xa1'),'const\x20vec4\x20c0\x20=\x20vec4(\x20-\x201,\x20-\x200.0275,\x20-\x200.572,\x200.022\x20);',_0x3028('0xa2'),_0x3028('0xa3'),'float\x20a004\x20=\x20min(\x20r.x\x20*\x20r.x,\x20exp2(\x20-\x209.28\x20*\x20dotNV\x20)\x20)\x20*\x20r.x\x20+\x20r.y;',_0x3028('0xa4'),_0x3028('0xa5'),'}',_0x3028('0xa6'),'direction.x\x20*=\x20-1.0;',_0x3028('0xa7'),_0x3028('0xa8'),_0x3028('0xa9'),_0x3028('0xaa'),_0x3028('0xab'),_0x3028('0xac'),'}',_0x3028('0xad'),_0x3028('0xae'),'direction.x\x20*=\x20-1.0;',_0x3028('0xa7'),_0x3028('0xa9'),_0x3028('0xa8'),_0x3028('0xaf'),_0x3028('0xb0'),_0x3028('0xb1'),_0x3028('0xac'),'}',_0x3028('0xb2'),_0x3028('0xb3'),_0x3028('0xb4'),_0x3028('0xb5'),_0x3028('0xb6'),_0x3028('0xb7'),'float\x20disc\x20=\x20B*B\x20-\x204.0\x20*\x20A\x20*\x20C;',_0x3028('0xb8'),'{',_0x3028('0xb9'),'float\x20t1\x20=\x20(-B\x20+\x20disc)*geometryFactor/A;',_0x3028('0xba'),_0x3028('0xbb'),'direction.y\x20*=\x20squashFactor;',_0x3028('0xbc'),'}',_0x3028('0xbd'),'}',_0x3028('0xbe'),_0x3028('0xbf'),_0x3028('0xc0'),_0x3028('0xc1'),_0x3028('0xc2'),_0x3028('0xc3'),_0x3028('0xc4'),'color\x20=\x20vec3(1.0,1.0,0.0);',_0x3028('0xc5'),_0x3028('0xc6'),'else',_0x3028('0xc1'),_0x3028('0xc7'),_0x3028('0xc8'),_0x3028('0xc9'),'}',_0x3028('0xca'),'vec3\x20outColor\x20=\x20vec3(0.0);',_0x3028('0xcb'),_0x3028('0xcc'),'const\x20float\x20epsilon\x20=\x201e-4;',_0x3028('0xcd'),_0x3028('0xce'),_0x3028('0xcf'),'vec3\x20newDirection\x20=\x20refract(direction,\x20normal,\x20n1/refractiveIndex);','vec3\x20reflectedDirection\x20=\x20reflect(direction,\x20normal);',_0x3028('0xd0'),'vec3\x20brdfRefracted\x20=\x20BRDF_Specular_GGX_Environment(newDirection,\x20-normal,\x20vec3(f0),\x200.0);',_0x3028('0xd1'),_0x3028('0xd2'),_0x3028('0xd3'),_0x3028('0xd4'),_0x3028('0xd5'),_0x3028('0xd6'),'//\x20ray\x20bounces\x20','for(\x20int\x20i=0;\x20i<RAY_BOUNCES;\x20i++)\x20{\x20',_0x3028('0xd7'),_0x3028('0xd8'),_0x3028('0xd9'),_0x3028('0xda'),_0x3028('0xdb'),_0x3028('0xdc'),_0x3028('0xdd'),_0x3028('0xde'),'//dist\x20=\x20(modelMatrix\x20*\x20vec4(dist,\x201.)).xyz;',_0x3028('0xdf'),_0x3028('0xe0'),_0x3028('0xe1'),_0x3028('0xe2'),_0x3028('0xe3'),_0x3028('0xe4'),_0x3028('0xe5'),'if(\x20dot(newDirection,\x20newDirection)\x20==\x200.0)\x20{\x20//\x20Total\x20Internal\x20Reflection.\x20Continue\x20inside\x20the\x20diamond\x20',_0x3028('0xe6'),_0x3028('0xe7'),'{','vec3\x20brdfReflected\x20=\x20BRDF_Specular_GGX_Environment(-oldDir,\x20mappedNormal,\x20vec3(f0),\x200.0);',_0x3028('0xe8'),_0x3028('0xe9'),_0x3028('0xea'),_0x3028('0xeb'),_0x3028('0xec'),_0x3028('0xed'),'}','}\x20else\x20{\x20//\x20Add\x20the\x20contribution\x20from\x20outgoing\x20ray,\x20and\x20continue\x20the\x20reflected\x20ray\x20inside\x20the\x20diamond\x20',_0x3028('0xee'),_0x3028('0xef'),_0x3028('0xf0'),_0x3028('0xf1'),_0x3028('0xf2'),_0x3028('0xf3'),_0x3028('0xf4'),'vec3\x20d3\x20=\x20(modelMatrix\x20*\x20vec4(dir2,\x200.0)).xyz;',_0x3028('0xf5'),'vec3\x20colorB\x20=\x20SampleSpecularContribution(vec4(1.0),\x20d3\x20).rgb\x20*\x20(\x20vec3(1.0)\x20-\x20brdfRefracted);',_0x3028('0xf6'),'//outColor\x20=\x20oldDir;',_0x3028('0xf7'),_0x3028('0xe6'),'vec3\x20brdfReflected\x20=\x20BRDF_Specular_GGX_Environment(newDirection,\x20mappedNormal,\x20vec3(f0),\x200.0);',_0x3028('0xf8'),_0x3028('0xf9'),'}','}',_0x3028('0xfa'),_0x3028('0xfb'),_0x3028('0xfc'),'}','void\x20main()\x20{',_0x3028('0xfd'),_0x3028('0xfe'),'vec3\x20color\x20=\x20traceRay(vecPos,\x20viewVector,\x20normalizedNormal);',_0x3028('0xff'),_0x3028('0x100'),_0x3028('0x101'),_0x3028('0x102'),'}'][_0x3028('0x81')]('\x0a'),'uniforms':{'tCubeMapNormals':{'type':'t','value':null},'envMap':{'type':'t','value':null},'envRefractionMap':{'type':'t','value':null},'sphereMap':{'type':'t','value':null},'envMapIntensity':{'type':'f','value':0x1},'maxBounces':{'type':'i','value':0x1},'tanAngleSqCone':{'type':'f','value':0x0},'coneHeight':{'type':'f','value':0x0},'bDebugBounces':{'type':'i','value':!0x1},'rIndexDelta':{'type':'f','value':0.012},'refractiveIndex':{'type':'f','value':2.4},'radius':{'type':'f','value':0x1},'normalOffset':{'type':'f','value':0x0},'squashFactor':{'type':'f','value':0.98},'distanceOffset':{'type':'f','value':0x0},'geometryFactor':{'type':'f','value':0.28},'Absorbption':{'type':'v3','value':new THREE[(_0x3028('0x33'))](0x0,0x0,0x0)},'colorCorrection':{'type':'v3','value':new THREE['Vector3'](0x1,0x1,0x1)},'boostFactors':{'type':'v3','value':new THREE[(_0x3028('0x33'))](0.892,0.892,0.98595025)},'centreOffset':{'type':'v3','value':new THREE[(_0x3028('0x33'))](0x0,0x0,0x0)},'InverseModelMatrix':{'type':'m4','value':new THREE[(_0x3028('0x28'))]()[_0x3028('0x21')]()}},'side':THREE[_0x3028('0x85')]},_0x198e27[_0x3028('0xa')]=IJEWEL[_0x3028('0x103')]={'vertexShader':[_0x3028('0x86'),_0x3028('0x104'),_0x3028('0x105'),_0x3028('0x106'),_0x3028('0x107'),_0x3028('0x108'),_0x3028('0x109'),_0x3028('0x10a'),_0x3028('0x10b'),_0x3028('0x10c'),_0x3028('0x10d'),_0x3028('0x10e'),_0x3028('0x10f'),_0x3028('0x110'),_0x3028('0x111'),_0x3028('0x112'),_0x3028('0x113'),'}']['join']('\x0a'),'fragmentShader':[_0x3028('0x86'),_0x3028('0x104'),_0x3028('0x114'),'uniform\x20sampler2D\x20screenTexture;','uniform\x20sampler2D\x20noiseTexture;',_0x3028('0x115'),_0x3028('0x116'),_0x3028('0x117'),'vec3\x20diffColor2\x20=\x20vec3(0.0,1.0,0.0)\x20-\x20color;',_0x3028('0x118'),'const\x20float\x20margin\x20=\x200.5;\x20',_0x3028('0x119'),_0x3028('0x11a'),_0x3028('0x11b'),'return\x20vec3(margin,\x201.0,\x20margin);','if(dot(diffColor3,\x20diffColor3)\x20<\x20margin)',_0x3028('0x11c'),_0x3028('0xc9'),'}',_0x3028('0x7e'),_0x3028('0x11d'),'vec4\x20screenColor\x20=\x20texture2D(\x20screenTexture,\x20uv\x20);','//screenColor.rgb\x20=\x20ClosestPrimaryColor(screenColor.rgb);',_0x3028('0x11e'),_0x3028('0x11f'),'screenColor.xyz\x20*=\x20screenColor.xyz;',_0x3028('0x11f'),_0x3028('0x120'),_0x3028('0x121'),_0x3028('0x122'),_0x3028('0x123'),'}'][_0x3028('0x81')]('\x0a'),'uniforms':{'ModelViewMatrix':{'type':'m4','value':new THREE['Matrix4']()[_0x3028('0x21')]()},'sparkleTexture':{'type':'t','value':null},'screenTexture':{'type':'t','value':null},'noiseTexture':{'type':'t','value':null},'scale':{'type':'f','value':0x1},'rotation':{'type':'f','value':0x0},'intensity':{'type':'f','value':0x1}},'side':THREE[_0x3028('0x85')]},_0x198e27[_0x3028('0xa')]=IJEWEL[_0x3028('0x75')]=new THREE[(_0x3028('0x69'))](IJEWEL[_0x3028('0x124')]),_0x198e27[_0x3028('0xa')]=IJEWEL[_0x3028('0x6c')]=new THREE[(_0x3028('0x69'))](IJEWEL[_0x3028('0x125')]);},function(_0x169cec,_0x3baabe){_0x169cec['exports']=IJEWEL[_0x3028('0x126')]=class _0x169cec{constructor(_0x169cec,_0x3baabe){this['texture']=_0x169cec,this['noiseTexture']=_0x3baabe,this['geometry']=new THREE[(_0x3028('0x127'))](0x1,0x1,0x0),this[_0x3028('0x3c')]=new THREE[(_0x3028('0x69'))](),this['material'][_0x3028('0x128')]=!0x1,this[_0x3028('0x3c')][_0x3028('0x129')]=!0x1,this['material'][_0x3028('0x12a')]=!0x0,this[_0x3028('0x3c')][_0x3028('0x12b')]=THREE[_0x3028('0x85')],this[_0x3028('0x3c')]['blending']=THREE[_0x3028('0x12c')],this[_0x3028('0x3c')][_0x3028('0x6d')]=IJEWEL['SparkleShader'][_0x3028('0x6d')],this[_0x3028('0x3c')]['fragmentShader']=IJEWEL[_0x3028('0x103')][_0x3028('0x79')],this[_0x3028('0x3c')][_0x3028('0x3d')]=THREE[_0x3028('0x78')][_0x3028('0x54')](IJEWEL[_0x3028('0x103')][_0x3028('0x3d')]),void 0x0!==this[_0x3028('0x12d')]&&(this[_0x3028('0x3c')]['uniforms'][_0x3028('0x12e')]['value']=_0x169cec),void 0x0!==this[_0x3028('0x12f')]&&(this[_0x3028('0x3c')][_0x3028('0x3d')][_0x3028('0x12f')][_0x3028('0x42')]=_0x3baabe),this[_0x3028('0x64')]=new THREE[(_0x3028('0x130'))](this[_0x3028('0x14')],this['material']),this['mesh']['positionOffset']=new THREE[(_0x3028('0x33'))](),this['rotationSpeedFactor']=0x5;}[_0x3028('0x131')](){var _0x3baabe=new _0x169cec(this[_0x3028('0x12d')],this[_0x3028('0x12f')]);return _0x3baabe['mesh'][_0x3028('0x132')]=new THREE[(_0x3028('0x33'))](),_0x3baabe['mesh'][_0x3028('0x132')][_0x3028('0x35')](this[_0x3028('0x64')][_0x3028('0x132')]),_0x3baabe['material'][_0x3028('0x3d')][_0x3028('0x76')][_0x3028('0x42')]=this[_0x3028('0x3c')]['uniforms'][_0x3028('0x76')]['value'],_0x3baabe[_0x3028('0x3c')][_0x3028('0x3d')]['rotation'][_0x3028('0x42')]=this[_0x3028('0x3c')][_0x3028('0x3d')]['rotation'][_0x3028('0x42')],_0x3baabe[_0x3028('0x3c')][_0x3028('0x3d')][_0x3028('0x133')][_0x3028('0x42')]=this[_0x3028('0x3c')][_0x3028('0x3d')]['intensity'][_0x3028('0x42')],_0x3baabe['material'][_0x3028('0x3d')][_0x3028('0x134')][_0x3028('0x42')]=this[_0x3028('0x3c')][_0x3028('0x3d')][_0x3028('0x134')][_0x3028('0x42')],_0x3baabe['material'][_0x3028('0x3d')][_0x3028('0x12f')]['value']=this['material'][_0x3028('0x3d')]['noiseTexture']['value'],_0x3baabe[_0x3028('0x3c')][_0x3028('0x3d')]['ModelViewMatrix'][_0x3028('0x42')]['copy'](this[_0x3028('0x3c')]['uniforms'][_0x3028('0x135')]['value']),_0x3baabe['rotationSpeedFactor']=this['rotationSpeedFactor'],_0x3baabe;}[_0x3028('0x5d')](_0x169cec){this['material'][_0x3028('0x3d')][_0x3028('0x76')]['value']=_0x169cec;}[_0x3028('0x136')](_0x169cec){this[_0x3028('0x3c')][_0x3028('0x3d')][_0x3028('0x133')][_0x3028('0x42')]=_0x169cec;}[_0x3028('0x65')](_0x169cec){this[_0x3028('0x3c')]['uniforms']['rotation'][_0x3028('0x42')]=_0x169cec;}[_0x3028('0x137')](_0x169cec){this[_0x3028('0x66')]=_0x169cec;}['setPositionOffset'](_0x169cec,_0x3baabe,_0x55bfa8){this['mesh'][_0x3028('0x132')]['x']=_0x169cec,this[_0x3028('0x64')][_0x3028('0x132')]['y']=_0x3baabe,this['mesh'][_0x3028('0x132')]['z']=_0x55bfa8,this[_0x3028('0x64')][_0x3028('0x30')][_0x3028('0x35')](this['mesh']['positionOffset']),this[_0x3028('0x64')][_0x3028('0x138')]();}['alignWithCamera'](_0x169cec){this[_0x3028('0x64')]['modelViewMatrix']['multiplyMatrices'](_0x169cec[_0x3028('0x139')],this[_0x3028('0x64')]['matrix']),this[_0x3028('0x3c')]['uniforms'][_0x3028('0x135')][_0x3028('0x42')][_0x3028('0x35')](this[_0x3028('0x64')][_0x3028('0x13a')]);}[_0x3028('0x63')](_0x169cec,_0x3baabe){this['mesh'][_0x3028('0x30')][_0x3028('0x35')](this[_0x3028('0x64')]['positionOffset']),_0x3baabe&&this['mesh'][_0x3028('0x30')]['add'](_0x3baabe),this[_0x3028('0x64')]['position'][_0x3028('0x13b')](_0x169cec),this[_0x3028('0x64')][_0x3028('0x138')]();}};}]);
