(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-common"],{1:function(e,t){},"27a6":function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return r}));var n=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},r=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"loading-cont"},[a("div",{staticClass:"loadEffect"},[a("span"),a("span"),a("span"),a("span"),a("span"),a("span"),a("span"),a("span")]),a("div",{staticClass:"tips"},[e._v("你的钻戒，我要亲手设计")])])}]},"31ca":function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return u}));var n=a("53ca"),r=a("5530"),i=(a("caad"),a("2532"),a("d3b7"),a("bc3a")),s=a.n(i),o=a("4328"),d=location.host.includes("zuanshi.dis.wanheweb.com")?"http://zuanshi.dis.wanheweb.com/":"http://zuanshi.nxm.wanheweb.com/";s.a.defaults.baseURL=d;var c=function(e){return function(t){var a=t.url,i=t.data,d=t.options,c=void 0===d?{}:d,l=t.isForm,u=void 0===l||l,m={};return localStorage.getItem("token")&&!a.includes("jcd.bavlo.com")&&(m.token=localStorage.getItem("token")),s()(Object(r["a"])(Object(r["a"])({url:a,method:e},"POST"===e?{data:u?Object(o["stringify"])(i):i}:{}),{},{params:"GET"===e?i:c.params,headers:Object(r["a"])(Object(r["a"])({"X-Requested-With":"XMLHttpRequest","Content-Type":u?"application/x-www-form-urlencoded; charset=UTF-8":"application/json"},c.headers),m)})).then((function(e){return"object"!==Object(n["a"])(e.data)?Promise.reject(e):e.data.errcode?Promise.reject(e.data):e.data})).catch((function(e){return Promise.reject(e)}))}},l=c("GET"),u=c("POST")},4360:function(e,t,a){"use strict";var n=a("2b0e"),r=a("2f62"),i=a("1da1"),s=(a("96cf"),a("d81d"),a("159b"),a("99af"),a("9e2c")),o=a("31ca"),d={state:{userNo:20230,desNo:30163,userInfo:{},designInfo:{},partId:"",parts:[],mainParts:[],mainPartId:"",metals:[],metalId:"",mark:"",currentHandInch:"",diamondId:"",diamondInfo:{},title:"",otherGems:[],metalWeb:[],metalWebDefault:[],gemWeb:[],gemWebDefault:[],materialWeb:[],materialWebDefault:[],webModelPics:[]},mutations:{setState:function(e,t){for(var a in t)e[a]=t[a]}},actions:{loadUserInfo:function(e){var t=e.commit,a=e.state;return Object(o["b"])({url:s["a"]+"app/userInfo",data:{id:a.userNo}}).then((function(e){if(0===e.code){var a=e.user;t("setState",{userInfo:a})}}))},loadMetalList:function(e){var t=e.commit,a=e.state,n=[];return Object(o["b"])({url:s["a"]+"app/findUserMetalByUser",data:{userId:a.userNo}}).then((function(e){if(0===e.code)if(e.list.length>0){var a="";n=e.list.map((function(e){return console.log(e.metal),e.metal&&e.metal.nameCn&&"铂金"===e.metal.nameCn&&(a=e.metal.id),e.metal})),a=a||n[0].id,t("setState",{metals:n,metalId:a})}else Object(o["b"])({url:s["a"]+"app/desMetalList"}).then((function(e){if(0===e.code){var a="";n=s["c"],n.forEach((function(e){e&&e.nameCn&&"铂金"===e.nameCn&&(a=e.id)})),a=a||n[0].id,t("setState",{metals:n,metalId:a})}else myAlert("数据加载失败！","alert-danger")}));else myAlert("数据加载失败！","alert-danger")}))},loadDesignInfo:function(e){var t=e.commit,a=e.state;return Object(o["b"])({url:s["a"]+"app/getVariableDesignLayerInfo",data:{id:a.desNo}}).then((function(e){if(0===e.code){var a=e.info,n=a.mainParts,r=a.mainParts[0].id,i=a.parts&&a.parts[0]||[],s=i[0]?i[0].id:"";t("setState",{designInfo:a,mainParts:n,mainPartId:r,partId:s,parts:i})}else console.log("数据加载失败！")}))},loadGemList:function(e){var t=e.commit,a=e.state;return Object(o["b"])({url:s["a"]+"app/findUserGemByUser",data:{userId:a.userNo}}).then((function(e){var a=[];0===e.code?e.list.length>0?(a=e.list.map((function(e){return e.gem})),t("setState",{gems:a})):Object(o["b"])({url:s["a"]+"app/desGemList"}).then((function(e){0===e.code?(a=e.list,t("setState",{gems:a})):myAlert("数据加载失败！","alert-danger")})):myAlert("数据加载失败！","alert-danger")}))},loadOtherGemList:function(e){var t=e.commit;e.state;Object(o["b"])({url:s["a"]+"app/otherGemList"}).then((function(e){if(0===e.code){var a=e.list;t("setState",{otherGems:a})}else myAlert("数据加载失败！","alert-danger")}))},loadMetalWeb:function(e){var t=e.commit,a=e.state;Object(o["b"])({url:s["a"]+"app/findMetalWebsByUser",data:{userId:a.userNo}}).then((function(e){if(0===e.code){var a=e.list,n=e.list;t("setState",{metalWeb:n,metalWebDefault:a})}else myAlert("数据加载失败！","alert-danger")}))},loadGemWeb:function(e){var t=e.commit,a=e.state;Object(o["b"])({url:s["a"]+"app/findGemWebsByUser",data:{userId:a.userNo}}).then((function(e){if(0===e.code){var a=e.list,n=e.list;t("setState",{gemWeb:n,gemWebDefault:a})}else myAlert("数据加载失败！","alert-danger")}))},loadMaterialWeb:function(e){var t=e.commit,a=e.state;Object(o["b"])({url:s["a"]+"app/findMaterialWebsByUserAndType",data:{userId:a.userNo}}).then((function(e){if(0===e.code){var a=e.list,n=e.list;t("setState",{materialWeb:n,materialWebDefault:a})}else myAlert("数据加载失败！","alert-danger")}))},loadModelPicList:function(e){var t=e.commit,a=e.state;return Object(o["b"])({url:s["a"]+"app/webModelPicList",data:{userId:a.userNo,desTypeId:a.designInfo.type.id}}).then((function(e){if(0===e.code){var a=e.list;t("setState",{webModelPics:a})}else myAlert("数据加载失败！","alert-danger")}))},submitDesign:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,i,s,d,c,l,u,m,f,p,b,g,h,I;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.commit,n=e.state,r=t.image,i=t.bn,a.next=4,Object(o["b"])({url:"/api/3d/design/upload_image",data:{base64:r}});case 4:if(s=a.sent,d=s.data,c=s.message,d){a.next=9;break}return a.abrupt("return",alert("err： "+c));case 9:return l=d.url,u=n.mark,m=n.mainPartId,f=n.partId,p=n.metalId,b=n.diamondId,g=n.currentHandInch,h=n.title,I={flower_head_id:f,ring_arm_id:m,diamond_id:b,ring_print:u,texture_id:p,ring_size:g,good_type:1,title:h,preview_image:l},i&&(I.bn=i),a.abrupt("return",Object(o["b"])({url:"/api/3d/saveDesign",data:I}).then((function(e){return e})));case 14:case"end":return a.stop()}}),a)})))()},getDiamondInfo:function(e,t){var a=e.commit,n=(e.state,t.id);Object(o["a"])({url:"/api/3d/get_diamond",data:{id:n}}).then((function(e){if(1===e.status){var t=e.data;t.detail="".concat(t.color,"色 ").concat(t.clarity," ").concat(t.cut," ").concat(t.symmetry," ").concat(t.polish," ").concat(t.flr_intensity),a("setState",{diamondInfo:t})}}))},getDesignInfo:function(e,t){var a=t.design_bn;return Object(o["a"])({url:"/api/3d/design_detail",data:{design_bn:a}}).then((function(e){return e}))},getDesignPrice:function(e,t){var a=t.currentHandInch,n=t.partId,r=t.mainPartId,i=t.metalId,s=t.diamondId;return Object(o["a"])({url:"/api/3d/order/compute_price",data:{diamond_id:s,texture_id:i,ring_size:a,ring_arm_id:r,flower_head_id:n}}).then((function(e){return 1===e.status?e.data.price:"-"}))}}},c={state:{optionList:[1,2,3]},mutations:{},actions:{},modules:{}},l={state:{currtAddress:{id:0,name:"",tel:"",address:""}},mutations:{setState:function(e,t){for(var a in t)e[a]=t[a]}},actions:{},modules:{}},u={state:{userNo:20230,desNo:30163,userInfo:{},designInfo:{},partId:"",parts:[],mainParts:[],mainPartId:"",metals:[],metalId:"",diamondId:"",diamondInfo:{},otherGems:[],metalWeb:[],metalWebDefault:[],gemWeb:[],gemWebDefault:[],materialWeb:[],materialWebDefault:[],webModelPics:[]},mutations:{setState:function(e,t){for(var a in t)e[a]=t[a]}},actions:{share_loadUserInfo:function(e){var t=e.commit,a=e.state;return Object(o["b"])({url:s["a"]+"app/userInfo",data:{id:a.userNo}}).then((function(e){if(0===e.code){var a=e.user;t("setState",{userInfo:a})}}))},share_loadMetalList:function(e){var t=e.commit,a=e.state,n=[];return Object(o["b"])({url:s["a"]+"app/findUserMetalByUser",data:{userId:a.userNo}}).then((function(e){if(0===e.code)if(e.list.length>0){var a="";n=e.list.map((function(e){return console.log(e.metal),e.metal&&e.metal.nameCn&&"铂金"===e.metal.nameCn&&(a=e.metal.id),e.metal})),a=a||n[0].id,t("setState",{metals:n,metalId:a})}else Object(o["b"])({url:s["a"]+"app/desMetalList"}).then((function(e){if(0===e.code){var a="";n=e.list,n.forEach((function(e){e&&e.nameCn&&"铂金"===e.nameCn&&(a=e.id)})),a=a||n[0].id,t("setState",{metals:n,metalId:a})}else myAlert("数据加载失败！","alert-danger")}));else myAlert("数据加载失败！","alert-danger")}))},share_loadDesignInfo:function(e){var t=e.commit,a=e.state;return Object(o["b"])({url:s["a"]+"app/getVariableDesignLayerInfo",data:{id:a.desNo}}).then((function(e){if(0===e.code){var a=e.info,n=a.mainParts,r=a.mainParts[0].id,i=a.parts&&a.parts[0]||[],s=i[0]?i[0].id:"";t("setState",{designInfo:a,mainParts:n,mainPartId:r,partId:s,parts:i})}else console.log("数据加载失败！")}))},share_loadGemList:function(e){var t=e.commit,a=e.state;return Object(o["b"])({url:s["a"]+"app/findUserGemByUser",data:{userId:a.userNo}}).then((function(e){var a=[];0===e.code?e.list.length>0?(a=e.list.map((function(e){return e.gem})),t("setState",{gems:a})):Object(o["b"])({url:s["a"]+"app/desGemList"}).then((function(e){0===e.code?(a=e.list,t("setState",{gems:a})):myAlert("数据加载失败！","alert-danger")})):myAlert("数据加载失败！","alert-danger")}))},share_loadMetalWeb:function(e){var t=e.commit,a=e.state;Object(o["b"])({url:s["a"]+"app/findMetalWebsByUser",data:{userId:a.userNo}}).then((function(e){if(0===e.code){var a=e.list,n=e.list;t("setState",{metalWeb:n,metalWebDefault:a})}else myAlert("数据加载失败！","alert-danger")}))},share_loadGemWeb:function(e){var t=e.commit,a=e.state;Object(o["b"])({url:s["a"]+"app/findGemWebsByUser",data:{userId:a.userNo}}).then((function(e){if(0===e.code){var a=e.list,n=e.list;t("setState",{gemWeb:n,gemWebDefault:a})}else myAlert("数据加载失败！","alert-danger")}))},share_getDesignInfo:function(e,t){var a=t.design_bn;return Object(o["a"])({url:"api/3d/design_detail",data:{design_bn:a}}).then((function(e){return e}))},share_getDesignPrice:function(e,t){var a=t.currentHandInch,n=t.partId,r=t.mainPartId,i=t.metalId,s=t.diamondId;return Object(o["a"])({url:"/api/3d/order/compute_price",data:{diamond_id:s,texture_id:i,ring_size:a,ring_arm_id:r,flower_head_id:n}}).then((function(e){return 1===e.status?e.data.price:"-"}))}}};n["a"].use(r["a"]);t["a"]=new r["a"].Store({modules:{common:c,design:d,orderConfirm:l,share:u}})},"4dee":function(e,t,a){"use strict";var n=a("99ed"),r=a.n(n);t["default"]=r.a},5160:function(e,t,a){"use strict";a("dd94")},"865f":function(e,t,a){"use strict";var n=a("27a6"),r=a("4dee"),i=(a("5160"),a("2877")),s=Object(i["a"])(r["default"],n["a"],n["b"],!1,null,"1b20d147",null);t["default"]=s.exports},"99ed":function(e,t){},"9e2c":function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return r})),a.d(t,"e",(function(){return i})),a.d(t,"d",(function(){return s})),a.d(t,"c",(function(){return o}));var n="",r="https://jcd.bavlo.com/manage/",i="https://design.bavlo.com/",s=["6","7","8","9","10","11","12","13","14","15","16","17","18","19","20"],o=[{color:"190,190,190",density:.0152,fMetallic:"1",fSmoothness:"0.9",id:2,name:"W18k",nameCn:"白18K金",parentId:0,price:310,purity:.76,type:0,userId:0,waste:.13},{color:"238, 175, 144",density:.0152,fMetallic:"1",fSmoothness:"0.9",id:3,name:"R18k",nameCn:"红18K金",parentId:0,price:310,purity:.76,type:0,userId:0,waste:.13},{color:"255,200,112",density:.0152,fMetallic:"1",fSmoothness:"0.9",id:1,name:"Y18k",nameCn:"黄18K金",parentId:0,price:310,purity:.76,type:0,userId:0,waste:.13},{color:"225,225,225",density:.0214,fMetallic:"1",fSmoothness:"0.9",id:6,name:"PT950",nameCn:"铂金",parentId:0,price:310,purity:.96,type:0,userId:0,waste:.13}]},"9f4c":function(e,t,a){},a1e1:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title-bar-box"},[a("div",{staticClass:"status-bar"}),a("van-nav-bar",{staticClass:"bag-bar",attrs:{title:e.title,"left-text":"","left-arrow":"","safe-area-inset-top":""},on:{"click-left":e.onClickLeft}})],1)},r=[],i=(a("a9e3"),{name:"TitleBar",props:{title:{type:String,default:""},type:{type:Number,default:1}},methods:{onClickLeft:function(){1===this.type?window.history.go(-1):window.uni.reLaunch&&window.uni.reLaunch({url:"../../pages/index/index"})}}}),s=i,o=(a("c12b"),a("2877")),d=Object(o["a"])(s,n,r,!1,null,"0a50832b",null);t["a"]=d.exports},c12b:function(e,t,a){"use strict";a("9f4c")},dd94:function(e,t,a){},f923:function(e,t,a){e.exports=a.p+"img/bg.fc782997.png"}}]);
//# sourceMappingURL=chunk-common.a1da92fa.js.map