{"version":3,"sources":["webpack:///./src/components/3DLoading/index.vue?bed8","webpack:///./src/util/ajax.js","webpack:///./src/util/index.js","webpack:///./src/store/design.js","webpack:///./src/store/common.js","webpack:///./src/store/orderConfirm.js","webpack:///./src/store/share.js","webpack:///./src/store/index.js","webpack:///./src/components/3DLoading/index.vue?da1b","webpack:///./src/components/3DLoading/index.vue?3526","webpack:///./src/mixins/design.js","webpack:///./src/components/3DLoading/index.vue","webpack:///./src/const/design.js","webpack:///./src/components/TitleBar/index.vue?4601","webpack:///src/components/TitleBar/index.vue","webpack:///./src/components/TitleBar/index.vue?1380","webpack:///./src/components/TitleBar/index.vue","webpack:///./src/components/TitleBar/index.vue?5e99","webpack:///./src/assets/diamond-list/bg.png"],"names":["render","_vm","this","_h","$createElement","_self","_c","_m","staticRenderFns","staticClass","_v","host","location","includes","axios","defaults","baseURL","getRequest","method","url","data","options","isForm","tokenHeader","localStorage","getItem","token","stringify","params","headers","then","res","Promise","reject","errcode","catch","err","get","post","getUrlParam","name","reg","RegExp","r","window","search","substr","match","unescape","urlParse","URL","obj","arr","forEach","item","tempArr","substring","split","key","decodeURIComponent","val","state","userNo","desNo","userInfo","designInfo","partId","parts","allParts","mainParts","mainPartId","allMainParts","metals","metalId","mark","currentHandInch","diamondId","diamondInfo","title","comboList","allComboList","comboId","otherGems","metalWeb","metalWebDefault","gemWeb","gemWebDefault","materialWeb","materialWebDefault","webModelPics","mutations","setState","payload","actions","loadUserInfo","commit","apiUrl","id","code","user","loadMetalList","userId","list","length","map","console","log","metal","nameCn","colorList","myAlert","loadDesignInfo","all","heads","rings","status","info","mainPartsFilter","d","ring_arm_id","filter","m","partsFilter","flower_id","loadGemList","gems","gem","loadOtherGemList","loadMetalWeb","loadGemWeb","loadMaterialWeb","loadModelPicList","desTypeId","type","submitDesign","image","bn","isCombo","base64","message","alert","preview_image","query","diamond_id","ring_print","texture_id","ring_size","good_type","flower_head_id","combo_id","getDiamondInfo","detail","color","clarity","cut","symmetry","polish","flr_intensity","getDesignInfo","_","design_bn","getDesignPrice","price","loadComboList","loadType","dgpage","rows","combos","filters","c","f","getComboInfo","combo","designId","layers","newComboList","optionList","modules","currtAddress","tel","address","share_loadUserInfo","share_loadMetalList","share_loadDesignInfo","share_loadGemList","share_loadMetalWeb","share_loadGemWeb","share_getDesignInfo","share_getDesignPrice","Vue","use","Vuex","Store","common","design","orderConfirm","share","components","Loading","props","loading","saveDesignInfo","created","$store","dispatch","mounted","getDiamond","Boolean","Number","setRenderParams","methods","setTimeout","changeComboId","init3D","clearAndPrepare3D","__pre_isCombo","my3d","onClose","document","querySelector","innerHTML","Bavlo","initWeb3D","baseUrl","resourceDomainName","onWindowResize","onresize","initUserMatInfo","changeBackground","loadVarDesign","toString","loaded","initCombo3D","Combo","loadDesign","getLoadModelState","setInitCameraPos","changeMetalId","printUserMark","setRotationState","changeCameraPos","material","cus","getCustomization","target","find","test","customizeMetalClass","getPrice","force","printUserTextOfLayer","switchIt","$dialog","confirm","formatIndex","num","formatCost","isNaN","component","handInch","attrs","on","onClickLeft","module","exports"],"mappings":"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","file":"js/chunk-common.66fddfab.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"loading-cont\"},[_c('div',{staticClass:\"loadEffect\"},[_c('span'),_c('span'),_c('span'),_c('span'),_c('span'),_c('span'),_c('span'),_c('span')]),_c('div',{staticClass:\"tips\"},[_vm._v(\"你的钻戒，我要亲手设计\")])])}]\n\nexport { render, staticRenderFns }","import axios from 'axios'\nimport { stringify } from 'qs'\n\n// 正式环境是dis 其他都是nxm\nconst host = location.host.includes('zuanshi.dis.wanheweb.com') ? 'http://zuanshi.dis.wanheweb.com/' : 'http://zuanshi.nxm.wanheweb.com/'\n// const host = 'https://yapi.kyy1996.com/mock/29';\n\naxios.defaults.baseURL = host;\n\nconst getRequest = method => {\n  return ({ url, data, options = {}, isForm = true }) => {\n    let tokenHeader = {}\n\n    if (localStorage.getItem('token') && !url.includes('jcd.bavlo.com')) {\n      tokenHeader.token = localStorage.getItem('token');\n    }\n    return axios({\n      url,\n      method,\n      ...(method === 'POST'\n        ? { data: isForm ? stringify(data) : data }\n        : { }),\n      params: method === 'GET' ? data : options.params,\n      headers: {\n        'X-Requested-With': 'XMLHttpRequest',\n        'Content-Type': isForm\n          ? 'application/x-www-form-urlencoded; charset=UTF-8'\n          : 'application/json',\n        ...options.headers,\n        ...tokenHeader\n      }\n    })\n      .then(res => {\n        if (typeof res.data !== 'object') {\n          return Promise.reject(res)\n        }\n        if (res.data.errcode) {\n          return Promise.reject(res.data)\n        }\n\n        return res.data\n      })\n      .catch(err => {\n        return Promise.reject(err)\n      })\n  }\n}\n\nexport const get = getRequest('GET')\n\nexport const post = getRequest('POST')\n","export function cc (s) {\n  if (/[^0-9.]/.test(s)) return 'invalid value'\n  s = s.replace(/^(\\d*)$/, '$1.')\n  s = (s + '00').replace(/(\\d*\\.\\d\\d)\\d*/, '$1')\n  s = s.replace('.', ',')\n  var re = /(\\d)(\\d{3},)/\n  while (re.test(s)) { s = s.replace(re, '$1,$2') }\n  s = s.replace(/,(\\d\\d)$/, '.$1')\n  return '￥' + s.replace(/^\\./, '0.')\n}\n\nconst loeded = {}\n\nexport function cssLoader (url) {\n  const status = loeded[url] || false\n  if (status) {\n    return Promise.resolve()\n  }\n  const style = document.createElement('link')\n  style.rel = 'stylesheet'\n  style.href = url\n  document.head.appendChild(style)\n  return new Promise((resolve) => {\n    style.addEventListener(\n      'load',\n      () => {\n        loeded[url] = true\n        resolve()\n      }\n    )\n  })\n}\n\nexport function jsLoader (url) {\n  const status = loeded[url] || false\n  if (status) {\n    return Promise.resolve()\n  }\n  const script = document.createElement('script')\n  script.src = url\n  document.body.appendChild(script)\n  return new Promise((resolve) => {\n    script.addEventListener(\n      'load',\n      () => {\n        loeded[url] = true\n        resolve()\n      })\n  })\n}\n\nexport const getUrlParam = (name) => {\n  let reg = new RegExp(`(^|&)${name}=([^&]*)(&|$)`);\n  let r = window.location.search.substr(1).match(reg);\n  if (r != null) return unescape(r[2]);\n  return null;\n}\n\nexport function urlParse(URL) {\n  let url = URL || window.location.search;\n  let obj = {};\n  let reg = /[?&][^?&]+=[^?&]+/g;\n  let arr = url.match(reg);\n  if (arr) {\n    arr.forEach((item) => {\n      let tempArr = item.substring(1).split('=');\n      let key = decodeURIComponent(tempArr[0]);\n      let val = decodeURIComponent(tempArr[1]);\n      obj[key] = val;\n    });\n  }\n  return obj;\n};\n","import { apiUrl, colorList } from '../const/design'\nimport { get, post } from '../util/ajax'\n\nexport default {\n  state: {\n    userNo: 20230,\n    desNo: 30163,\n    userInfo: {},\n    // all信息\n    designInfo: {},\n    // 花头\n    partId: '',\n    parts: [],\n    allParts: [], // 不过滤的全部\n    // 戒臂\n    mainParts: [],\n    mainPartId: '',\n    allMainParts: [], // 不过滤的全部\n    // 材质\n    metals: [],\n    metalId: '',\n    // 刻印\n    mark: '',\n    // 当前手寸\n    currentHandInch: '',\n    // 当前钻石\n    diamondId: '',\n    diamondInfo: {},\n    // 设计标题\n    title: '',\n    // 固定款\n    comboList: [],\n    allComboList: [], // 不过滤的全部\n    comboId: '',\n\n    otherGems: [],\n    metalWeb: [],\n    metalWebDefault: [],\n    gemWeb: [],\n    gemWebDefault: [],\n    materialWeb: [],\n    materialWebDefault: [],\n    webModelPics: [],\n  },\n  mutations: {\n    setState(state, payload) {\n      for (let key in payload) {\n        state[key] = payload[key]\n      }\n    },\n  },\n  actions: {\n    /**\n     * 1 加载账号信息\n     * @param userId\n     */\n    loadUserInfo({ commit, state }) {\n      return post({\n        url: apiUrl + 'app/userInfo',\n        data: {\n          id: state.userNo\n        },\n      }).then((data) => {\n        if (data.code === 0) {\n          const userInfo = data.user\n          commit('setState', { userInfo })\n        }\n      })\n    },\n\n    /**\n     * 2 获取金属材质列表（用于切换材质）\n     */\n    loadMetalList({ commit, state }) {\n      let metals = []\n      return post({\n        url: apiUrl + 'app/findUserMetalByUser',\n        data: {\n          userId: state.userNo\n        },\n      }).then((data) => {\n        if (data.code === 0) {\n          if (data.list.length > 0) {\n            let metalId = ''\n            metals = data.list.map(item => {\n              console.log(item.metal);\n              if (item.metal && item.metal.nameCn && item.metal.nameCn === '铂金') {\n                metalId = item.metal.id\n              }\n              return item.metal\n            })\n\n            metalId = metalId || metals[0].id\n\n            commit('setState', {\n              metals,\n              metalId,\n            })\n          } else {\n            post({\n              url: apiUrl + 'app/desMetalList',\n            }).then((data) => {\n              if (data.code === 0) {\n                let metalId = ''\n                // metals = data.list\n                metals = colorList\n\n                metals.forEach(item => {\n                  if (item && item.nameCn && item.nameCn === '铂金') {\n                    metalId = item.id\n                  }\n                });\n\n                metalId = metalId || metals[0].id\n\n                commit('setState', {\n                  metals,\n                  metalId\n                })\n              } else {\n                myAlert('数据加载失败！', 'alert-danger')\n              }\n            })\n          }\n        } else {\n          myAlert('数据加载失败！', 'alert-danger')\n        }\n      })\n    },\n    /**\n     * 3 加载款式信息\n     */\n    loadDesignInfo({ commit, state }) {\n      return Promise.all([\n        post({\n          url: apiUrl + 'app/getVariableDesignLayerInfo',\n          data: {\n            id: state.desNo\n          }\n        }),\n        get({ // 花头\n          url: '/api/3d/getAllHead'\n        }),\n        get({ // 戒臂\n          url: '/api/3d/getAllRing'\n        }),\n      ]).then(([data, heads, rings]) => {\n        if (data.code === 0 && heads.status === 1 && rings.status === 1) {\n          const designInfo = data.info\n\n          // let { mainParts } = designInfo\n          const allMainParts = designInfo.mainParts || []\n          const mainPartsFilter = (rings.data || []).map(d => d.ring_arm_id)\n          const mainParts = allMainParts.filter((m) => mainPartsFilter.includes(m.id))\n\n          // 花头ID列表\n          const allParts = designInfo.parts && designInfo.parts[0] || []\n          const partsFilter = (heads.data || []).map(d => d.flower_id)\n          const parts = allParts.filter((m) => partsFilter.includes(m.id))\n\n          // 当前戒臂ID （主part ID）\n          const mainPartId = mainParts[0] ? mainParts[0].id : ''\n          // 当前花头ID\n          const partId = parts[0] ? parts[0].id : ''\n\n          commit('setState', {\n            designInfo,\n            mainParts,\n            mainPartId,\n            partId,\n            parts,\n            allMainParts,\n            allParts,\n          })\n\n        } else {\n          console.log('数据加载失败！')\n        }\n      })\n    },\n\n    /**\n     * 4 获取宝石材质列表（用于切换材质）\n     */\n    loadGemList({ commit, state }) {\n      return post({\n        url: apiUrl + 'app/findUserGemByUser',\n        data: {\n          userId: state.userNo\n        }\n      }).then((data) => {\n        let gems = []\n        if (data.code === 0) {\n          if (data.list.length > 0) {\n            gems = data.list.map(item => item.gem)\n            commit('setState', { gems })\n          } else {\n            post({\n              url: apiUrl + 'app/desGemList',\n            }).then((data) => {\n              if (data.code === 0) {\n                gems = data.list\n                commit('setState', { gems })\n              } else {\n                myAlert('数据加载失败！', 'alert-danger')\n              }\n            })\n          }\n        } else {\n          myAlert('数据加载失败！', 'alert-danger')\n        }\n      })\n    },\n\n    /**\n     * 5 获取其它宝石列表（用于切换材质）\n     */\n    loadOtherGemList({ commit, state }) {\n      post({\n        url: apiUrl + 'app/otherGemList',\n      }).then((data) => {\n        if (data.code === 0) {\n          const otherGems = data.list\n          commit('setState', { otherGems })\n        } else {\n          myAlert('数据加载失败！', 'alert-danger')\n        }\n      })\n    },\n\n    /**\n     * 6 获取金属web材质参数（用于渲染）\n     * @param userId\n     */\n    loadMetalWeb({ commit, state }) {\n      post({\n        url: apiUrl + 'app/findMetalWebsByUser',\n        data: {\n          userId: state.userNo\n        }\n      }).then((data) => {\n        if (data.code === 0) {\n          const metalWebDefault = data.list\n          const metalWeb = data.list\n          commit('setState', {\n            metalWeb,\n            metalWebDefault\n          })\n        } else {\n          myAlert('数据加载失败！', 'alert-danger')\n        }\n      })\n    },\n\n    /**\n     * 7 获取宝石web材质列表（用于渲染）\n     * @param userId\n     */\n    loadGemWeb({ commit, state }) {\n      post({\n        url: apiUrl + 'app/findGemWebsByUser',\n        data: {\n          userId: state.userNo\n        }\n      }).then((data) => {\n        if (data.code === 0) {\n          const gemWebDefault = data.list\n          const gemWeb = data.list\n          commit('setState', {\n            gemWeb,\n            gemWebDefault\n          })\n        } else {\n          myAlert('数据加载失败！', 'alert-danger')\n        }\n      })\n    },\n\n    /**\n     * 8 获取其它材质web材质列表（用于渲染、切换材质）\n     * @param userId\n     */\n    loadMaterialWeb({ commit, state }) {\n      post({\n        url: apiUrl + 'app/findMaterialWebsByUserAndType',\n        data: {\n          userId: state.userNo\n        }\n      }).then((data) => {\n        if (data.code === 0) {\n          const materialWebDefault = data.list\n          const materialWeb = data.list\n          commit('setState', {\n            materialWeb,\n            materialWebDefault\n          })\n        } else {\n          myAlert('数据加载失败！', 'alert-danger')\n        }\n      })\n    },\n\n    /**\n     * 9 获取试戴背景图列表\n     */\n    loadModelPicList({ commit, state }) {\n      return post({\n        url: apiUrl + 'app/webModelPicList',\n        data: {\n          userId: state.userNo,\n          desTypeId: state.designInfo.type.id\n        },\n      }).then((data) => {\n        if (data.code === 0) {\n          const webModelPics = data.list\n          commit('setState', { webModelPics })\n        } else {\n          myAlert('数据加载失败！', 'alert-danger')\n        }\n      })\n    },\n    \n\n    /**\n     * 10 提交设计\n     */\n    async submitDesign({ commit, state }, { image, bn, isCombo }) {\n      const { data, message } = await post({\n        url:'/api/3d/design/upload_image',\n        data: {\n          base64: image\n        }\n      })\n      if (!data) {\n        return alert('err： ' + message)\n      }\n      const preview_image = data.url\n      const {\n        mark,\n        mainPartId,\n        partId,\n        metalId,\n        diamondId,\n        currentHandInch,\n        title,\n        comboId,\n      } = state\n\n      const query = {\n        diamond_id: diamondId,\n        ring_print: mark,\n        texture_id: metalId,\n        ring_size: currentHandInch,\n        good_type: 1,\n        title: title, \n        preview_image,\n        ring_arm_id: isCombo ? 0 : mainPartId,\n        flower_head_id: isCombo ? 0 : partId,\n        combo_id: isCombo ? comboId : 0,\n      }\n\n      if (bn) {\n        query.bn = bn\n      }\n\n      return post({\n        url: '/api/3d/saveDesign',\n        data: query\n      }).then((data) => {\n        return data\n      })\n    },\n\n    /**\n     * 11 获取钻石信息\n     */\n    getDiamondInfo({ commit, state }, { id }) {\n      get({\n        url: '/api/3d/get_diamond',\n        data: {\n          id\n        }\n      }).then((data) => {\n        if (data.status === 1) {\n          const diamondInfo = data.data\n          diamondInfo.detail = `${diamondInfo.color}色 ${diamondInfo.clarity} ${diamondInfo.cut} ${diamondInfo.symmetry} ${diamondInfo.polish} ${diamondInfo.flr_intensity}`\n          commit('setState', { diamondInfo })\n        }\n      })\n    },\n\n    /**\n     * 12 获取设计信息\n     */\n    getDesignInfo(_, { design_bn }) {\n      return get({\n        url: '/api/3d/design_detail',\n        data: {\n          design_bn\n        }\n      }).then((data) => {\n        return data\n      })\n    },\n\n    /**\n     * 13 实时计算价钱\n     */\n    getDesignPrice(_, {\n      isCombo,\n      currentHandInch,\n      partId,\n      mainPartId,\n      metalId,\n      diamondId,\n      comboId,\n    }) {\n      return get({\n        url: '/api/3d/order/compute_price',\n        data: {\n          diamond_id: diamondId,\n          texture_id: metalId,\n          ring_size: currentHandInch,\n          ring_arm_id: isCombo ? 0 : mainPartId,\n          flower_head_id: isCombo ? 0 : partId,\n          combo_id: isCombo ? comboId : 0,\n        }\n      }).then((data) => {\n        if (data.status === 1) {\n          return data.data.price\n        } else {\n          return '-'\n        }\n      })\n    },\n\n    /**\n     * 14 获取固定款列表\n     */\n    loadComboList({ commit, state }) {\n      return Promise.all([\n        post({\n          url: apiUrl + 'app/designList',\n          data: {\n            userId: state.userNo,\n            loadType: 1,\n            dgpage: 1,\n            rows: 200,\n          },\n        }),\n        get({\n          url: '/api/3d/getAllCombo'\n        }),\n      ]).then(([data, combos]) => {\n        if (data.code === 0 && combos.status === 1) {\n          const allComboList = data.list || []\n          const filters = (combos.data || []).map((c) => c.combo_id)\n          const comboList = allComboList.filter((f) => filters.includes(f.id))\n\n          commit('setState', { comboList, allComboList })\n        } else {\n          myAlert('数据加载失败！', 'alert-danger')\n        }\n      })\n    },\n\n    /**\n     * 15 获取固定款信息\n     */\n    getComboInfo({ commit, state }, { designId }) {\n      const {\n        comboList\n      } = state\n      let combo;\n      comboList.forEach((item) => {\n        if (+item.id === +designId) {\n          combo = item;\n        }\n      });\n\n      if (combo && combo.layers) {\n        return combo;\n      }\n\n      return post({\n        url: apiUrl + 'app/designLayerInfo',\n        data: {\n          designId\n        }\n      }).then((data) => {\n        if (data.code === 0) {\n          combo = data.designInfo\n          const newComboList = comboList.map((item) => {\n            if (+item.id === +designId) {\n              return { ...item, ...data.designInfo }\n            }\n            return item;\n          })\n          commit('setState', { comboList: newComboList })\n          return combo;\n        } else {\n          myAlert('数据加载失败！', 'alert-danger')\n        }\n      })\n    },\n    \n\n  }\n}","export default {\n  state: {\n    optionList: [\n      1,2,3\n    ]\n  },\n  mutations: {\n\n  },\n  actions: {\n\n  },\n  modules: {\n\n  }\n}","export default {\n  state: {\n    currtAddress: {\n      id: 0,\n      name: '',\n      tel: '',\n      address: ''\n    }\n  },\n  mutations: {\n    setState (state, payload) {\n      for (const key in payload) {\n        state[key] = payload[key]\n      }\n    }\n  },\n  actions: {\n\n  },\n  modules: {\n\n  }\n}\n","\nimport { apiUrl } from '../const/design'\nimport { get, post } from '../util/ajax'\n\nexport default {\n  state: {\n    userNo: 20230,\n    desNo: 30163,\n    userInfo: {},\n    // all信息\n    designInfo: {},\n    // 花头\n    partId: '',\n    parts: [],\n    // 戒臂\n    mainParts: [],\n    mainPartId: '',\n    // 材质\n    metals: [],\n    metalId: '',\n    // 当前钻石\n    diamondId: '',\n    diamondInfo: {},\n\n    otherGems: [],\n    metalWeb: [],\n    metalWebDefault: [],\n    gemWeb: [],\n    gemWebDefault: [],\n    materialWeb: [],\n    materialWebDefault: [],\n    webModelPics: [],\n    \n  },\n  mutations: {\n    setState(state, payload) {\n      for (let key in payload) {\n        state[key] = payload[key]\n      }\n    },\n  },\n  actions: {\n    /**\n     * 1 加载账号信息\n     * @param userId\n     */\n    share_loadUserInfo({ commit, state }) {\n      return post({\n        url: apiUrl + 'app/userInfo',\n        data: {\n          id: state.userNo\n        },\n      }).then((data) => {\n        if (data.code === 0) {\n          const userInfo = data.user\n          commit('setState', { userInfo })\n        }\n      })\n    },\n\n    /**\n     * 2 获取金属材质列表（用于切换材质）\n     */\n     share_loadMetalList({ commit, state }) {\n      let metals = []\n      return post({\n        url: apiUrl + 'app/findUserMetalByUser',\n        data: {\n          userId: state.userNo\n        },\n      }).then((data) => {\n        if (data.code === 0) {\n          if (data.list.length > 0) {\n            let metalId = ''\n            metals = data.list.map(item => {\n              console.log(item.metal);\n              if (item.metal && item.metal.nameCn && item.metal.nameCn === '铂金') {\n                metalId = item.metal.id\n              }\n              return item.metal\n            })\n\n            metalId = metalId || metals[0].id\n\n            commit('setState', {\n              metals,\n              metalId,\n            })\n          } else {\n            post({\n              url: apiUrl + 'app/desMetalList',\n            }).then((data) => {\n              if (data.code === 0) {\n                let metalId = ''\n                metals = data.list\n                metals.forEach(item => {\n                  if (item && item.nameCn && item.nameCn === '铂金') {\n                    metalId = item.id\n                  }\n                });\n\n                metalId = metalId || metals[0].id\n\n                commit('setState', {\n                  metals,\n                  metalId\n                })\n              } else {\n                myAlert('数据加载失败！', 'alert-danger')\n              }\n            })\n          }\n        } else {\n          myAlert('数据加载失败！', 'alert-danger')\n        }\n      })\n    },\n    /**\n     * 3 加载款式信息\n     */\n     share_loadDesignInfo({ commit, state }) {\n      return post({\n        url: apiUrl + 'app/getVariableDesignLayerInfo',\n        data: {\n          id: state.desNo\n        }\n      }).then((data) => {\n        if (data.code === 0) {\n          const designInfo = data.info\n          const { mainParts } = designInfo\n          // 当前戒臂ID （主part ID）\n          const mainPartId = designInfo.mainParts[0].id\n          // 花头ID列表\n          const parts = designInfo.parts && designInfo.parts[0] || []\n          // 当前花头ID\n          const partId = parts[0] ? parts[0].id : ''\n\n          commit('setState', {\n            designInfo,\n            mainParts,\n            mainPartId,\n            partId,\n            parts\n          })\n\n        } else {\n          console.log('数据加载失败！')\n        }\n      })\n    },\n\n    /**\n     * 4 获取宝石材质列表（用于切换材质）\n     */\n     share_loadGemList({ commit, state }) {\n      return post({\n        url: apiUrl + 'app/findUserGemByUser',\n        data: {\n          userId: state.userNo\n        }\n      }).then((data) => {\n        let gems = []\n        if (data.code === 0) {\n          if (data.list.length > 0) {\n            gems = data.list.map(item => item.gem)\n            commit('setState', { gems })\n          } else {\n            post({\n              url: apiUrl + 'app/desGemList',\n            }).then((data) => {\n              if (data.code === 0) {\n                gems = data.list\n                commit('setState', { gems })\n              } else {\n                myAlert('数据加载失败！', 'alert-danger')\n              }\n            })\n          }\n        } else {\n          myAlert('数据加载失败！', 'alert-danger')\n        }\n      })\n    },\n\n    /**\n     * 6 获取金属web材质参数（用于渲染）\n     * @param userId\n     */\n     share_loadMetalWeb({ commit, state }) {\n      post({\n        url: apiUrl + 'app/findMetalWebsByUser',\n        data: {\n          userId: state.userNo\n        }\n      }).then((data) => {\n        if (data.code === 0) {\n          const metalWebDefault = data.list\n          const metalWeb = data.list\n          commit('setState', {\n            metalWeb,\n            metalWebDefault\n          })\n        } else {\n          myAlert('数据加载失败！', 'alert-danger')\n        }\n      })\n    },\n\n    /**\n     * 7 获取宝石web材质列表（用于渲染）\n     * @param userId\n     */\n     share_loadGemWeb({ commit, state }) {\n      post({\n        url: apiUrl + 'app/findGemWebsByUser',\n        data: {\n          userId: state.userNo\n        }\n      }).then((data) => {\n        if (data.code === 0) {\n          const gemWebDefault = data.list\n          const gemWeb = data.list\n          commit('setState', {\n            gemWeb,\n            gemWebDefault\n          })\n        } else {\n          myAlert('数据加载失败！', 'alert-danger')\n        }\n      })\n    },\n\n    /**\n     * 11 获取设计信息\n     */\n    share_getDesignInfo(_, { design_bn }) {\n      return get({\n        url: 'api/3d/design_detail',\n        data: {\n          design_bn\n        }\n      }).then((data) => {\n        return data\n      })\n    },\n\n    /**\n     * 13 实时计算价钱\n     */\n     share_getDesignPrice(_, {\n      currentHandInch,\n      partId,\n      mainPartId,\n      metalId,\n      diamondId\n    }) {\n    return get({\n      url: '/api/3d/order/compute_price',\n      data: {\n        diamond_id: diamondId,\t\n        texture_id: metalId,\n        ring_size: currentHandInch,\n        ring_arm_id: mainPartId,\n        flower_head_id: partId,\n      }\n    }).then((data) => {\n      if (data.status === 1) {\n        return data.data.price\n      } else {\n        return '-'\n      }\n    })\n  },\n\n  }\n}\n","import Vue from 'vue'\nimport Vuex from 'vuex'\nimport design from './design'\nimport common from './common'\nimport orderConfirm from './orderConfirm'\nimport share from './share'\n\nVue.use(Vuex)\n\nexport default new Vuex.Store({\n  modules: {\n    common,\n    design,\n    orderConfirm,\n    share,\n  }\n})\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=1b20d147&lang=scss&scoped=true&\"","import Loading from '../components/3DLoading'\nimport { resourceDomainName, baseUrl } from '../const/design';\nimport { getUrlParam } from '../util/index';\n\nexport default {\n  components: {\n    Loading\n  },\n  props: [],\n  data() {\n    return {\n      // loading\n      loading: true,\n\n      // 保存的设计信息\n      saveDesignInfo: {},\n      design_bn: '',\n\n      // price\n      price: '-',\n\n      // 是否是固定款\n      isCombo: false,\n    };\n  },\n  created() {\n    // 加载账号信息\n    this.$store.dispatch('loadUserInfo');\n  },\n  mounted() {\n    // 请求：材质、宝石、设计数据\n    Promise.all([\n      this.$store.dispatch('loadDesignInfo'),\n      this.$store.dispatch('loadMetalList'),\n      this.$store.dispatch('loadMetalWeb'),\n      this.$store.dispatch('loadGemList'),\n      this.$store.dispatch('loadGemWeb'),\n      this.$store.dispatch('loadComboList'),\n    ]).then(() => {\n      console.log('mounted -> data loaded -> init3D');\n\n      const design_bn = getUrlParam('bn');\n      const partId = getUrlParam('partId');\n      const mainPartId = getUrlParam('mainPartId');\n      const metalId = getUrlParam('metalId');\n      const mark = getUrlParam('mark');\n      const currentHandInch = getUrlParam('currentHandInch');\n      const diamondId = getUrlParam('diamondId');\n      const comboId = getUrlParam('comboId');\n      const isCombo = getUrlParam('isCombo');\n\n      if (design_bn) {\n        this.$store.dispatch('getDesignInfo', { design_bn }).then((res) => {\n          this.saveDesignInfo = res.data\n          this.design_bn = design_bn\n          const {\n            ring_size,\n            diamond_id,\n            ring_arm_id,\n            flower_head_id,\n            combo_id,\n            texture_id,\n            ring_print,\n            title,\n          } = res.data\n\n          this.getDiamond(diamondId || diamond_id)\n          this.mark = mark || ring_print || ''\n          this.isCombo = isCombo == null ? Boolean(combo_id) : !!Number(isCombo)\n\n          this.setRenderParams({\n            partId: partId || flower_head_id,\n            mainPartId: mainPartId || ring_arm_id,\n            metalId: metalId || texture_id,\n            mark: mark || ring_print,\n            currentHandInch: currentHandInch || ring_size,\n            diamondId: diamondId || diamond_id,\n            title,\n            comboId: comboId || combo_id,\n          })\n        });\n      } else {\n        this.getDiamond(diamondId)\n        this.mark = mark || ''\n        this.isCombo = !!Number(isCombo)\n        this.setRenderParams({\n          partId,\n          mainPartId,\n          metalId,\n          mark,\n          currentHandInch,\n          comboId: comboId,\n        })\n      }\n    });\n  },\n\n  methods: {\n    // 设置参数\n    setRenderParams(obj) {\n      for(let key in obj) {\n        if (!obj[key]) {\n          delete obj[key]\n        }\n      }\n\n      this.$store.commit('setState', obj);\n      const { comboId } = this.$store.state.design;\n      setTimeout(() => {\n        if (this.isCombo) {\n          this.changeComboId(comboId);\n        } else {\n          this.init3D();\n        }\n      }, 0)\n    },\n\n    // 获取钻石信息\n    getDiamond(diamondId) {\n      if (diamondId) {\n        this.$store.dispatch('getDiamondInfo', { id: diamondId });\n        this.$store.commit('setState', {\n          diamondId,\n        });\n      }\n    },\n    // 切换前的清理工作\n    clearAndPrepare3D() {\n      if (this.__pre_isCombo == null || this.isCombo !== this.__pre_isCombo) {\n        if (this.my3d && this.my3d) {\n          this.my3d.onClose();\n        }\n        document.querySelector('#web3d').innerHTML = '';\n\n        const {\n          metalWeb,\n          metalWebDefault,\n          gemWeb,\n          gemWebDefault,\n        } = this.$store.state.design;\n\n        // 加载3D第一步：初始化3D场景\n        this.my3d = Bavlo.initWeb3D(\n          baseUrl,\n          'web3d',\n          false,\n          resourceDomainName,\n          // false\n          // 是否是固定搭配\n          this.isCombo\n        );\n\n        // 加载3D第二步：定义3D窗口尺寸\n        this.my3d.onWindowResize(2);\n        window.onresize = () => {\n          this.my3d.onWindowResize(2);\n        };\n\n        // 加载3D第三步：初始化web材质\n        this.my3d.initUserMatInfo(\n          metalWebDefault,\n          metalWeb,\n          gemWebDefault,\n          gemWeb\n        );\n\n        // 加载3D第四步：设置3D场景背景色\n        this.my3d.changeBackground('37,37,42');\n      }\n      this.__pre_isCombo = this.isCombo;\n    },\n    // 初始化定制款3D\n    async init3D() {\n      this.isCombo = false;\n      this.clearAndPrepare3D();\n\n      const {\n        designInfo,\n        partId,\n        mainPartId,\n      } = this.$store.state.design;\n\n      // 加载3D第五步：加载款式3D\n      this.my3d.loadVarDesign(designInfo, mainPartId, partId.toString());\n\n      this.loaded();\n    },\n\n    // 初始化固定款3D\n    async initCombo3D(Combo) {\n      this.isCombo = true;\n      this.clearAndPrepare3D();\n\n      // 加载3D第五步：加载款式3D\n      this.my3d.loadDesign(Combo);\n\n      this.loaded();\n    },\n    // 加载完\n    loaded() {\n      setTimeout(() => {\n        if (this.my3d.getLoadModelState() !== 2) {\n          this.loaded()\n        } else {\n          const { metalId } = this.$store.state.design;\n          // 设置材质\n          this.loading = false\n\n          // 设置角度\n          this.setInitCameraPos();\n\n          // 设置材质\n          this.changeMetalId(metalId);\n\n          // 用户刻印\n          this.printUserMark();\n          if (this.mark) {\n            setTimeout(() => {\n              this.my3d.setRotationState(true);\n            }, 200)\n          }\n        }\n      }, 1000);\n    },\n\n    /**\n     * 设置相机角度\n     */\n    setInitCameraPos() {\n      this.my3d.changeCameraPos(false, -45, 100, -65)\n    },\n\n    /**\n     * 切换材料\n     * @param metalId\n     */\n    changeMetalId(metalId) {\n      const { metals } = this.$store.state.design;\n      let material;\n      metals.forEach((item) => {\n        if (+item.id === +metalId) {\n          material = item;\n        }\n      });\n      this.$store.commit('setState', {\n        metalId,\n      });\n\n      let name = '金属图层';\n      if (this.isCombo) {\n        const cus = this.my3d.getCustomization()\n        const target = cus.find((c) => (/^Metal/i).test(c.name))\n        if (target) {\n          name = target.name\n        }\n      }\n\n      // 金属图层\n      material && this.my3d.customizeMetalClass(name, material);\n      this.getPrice()\n    },\n\n    /**\n     * 用户刻印\n     */\n    printUserMark(force = false) {\n      if (force || this.mark) {\n        let id = 940;\n        if (this.isCombo) {\n          const cus = this.my3d.getCustomization()\n          const target = cus.find((c) => (/^Engrave/i).test(c.name))\n          if (target) {\n            id = target.id\n          }\n        }\n        this.my3d.printUserTextOfLayer(id, this.mark || ' ')\n      }\n    },\n\n    /**\n     * 切换固定款\n     * @param comboId\n     */\n    changeComboId(comboId) {\n      const switchIt = async () => {\n        this.$store.commit('setState', {\n          comboId,\n        });\n        this.$store.dispatch('getComboInfo', { designId: comboId })\n          .then((combo) => {\n            combo && this.initCombo3D(combo);\n            this.getPrice()\n          });\n      }\n      if (this.isCombo) {\n        switchIt()\n      } else {\n        this.$dialog.confirm({\n          title: '提示',\n          message: '是否以当前固定款式覆盖设计款式方案？',\n        })\n          .then(switchIt);\n      }\n    },\n\n    // 实时获取金额\n    getPrice() {\n      const {\n        partId,\n        mainPartId,\n        metalId,\n        currentHandInch,\n        diamondId,\n        comboId,\n      } = this.$store.state.design;\n\n      this.$store.dispatch('getDesignPrice', {\n        isCombo: this.isCombo,\n        currentHandInch: currentHandInch || 13,\n        partId,\n        mainPartId,\n        metalId,\n        diamondId,\n        comboId: comboId,\n      }).then((price) => {\n        this.price = price\n      })\n    }\n  },\n\n  filters: {\n    formatIndex(num) {\n      num = num + 1;\n      return num < 10 ? '0' + num : num;\n    },\n    formatCost(num) {\n      if (typeof num === 'number' && !isNaN(num) ) {\n        return num.toString() + '.00'\n      }\n    },\n  },\n};","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=1b20d147&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=1b20d147&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1b20d147\",\n  null\n  \n)\n\nexport default component.exports","export const baseUrl = ''\nexport const apiUrl = 'https://jcd.bavlo.com/manage/'\nexport const resourceDomainName = 'https://design.bavlo.com/'\nexport const normalMapUrl = resourceDomainName + 'NormalFiles/'\nexport const handInch = ['6', '7', '8', '9', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20']\n\nexport const colorList = [\n{\n    \"color\":\"190,190,190\",\n    \"density\":0.0152,\n    \"fMetallic\":\"1\",\n    \"fSmoothness\":\"0.9\",\n    \"id\":2,\n    \"name\":\"W18k\",\n    \"nameCn\":\"白18K金\",\n    \"parentId\":0,\n    \"price\":310,\n    \"purity\":0.76,\n    \"type\":0,\n    \"userId\":0,\n    \"waste\":0.13\n},\n{\n    \"color\":\"238, 175, 144\",\n    \"density\":0.0152,\n    \"fMetallic\":\"1\",\n    \"fSmoothness\":\"0.9\",\n    \"id\":3,\n    \"name\":\"R18k\",\n    \"nameCn\":\"红18K金\",\n    \"parentId\":0,\n    \"price\":310,\n    \"purity\":0.76,\n    \"type\":0,\n    \"userId\":0,\n    \"waste\":0.13\n},\n{\n  \"color\":\"255,200,112\",\n  \"density\":0.0152,\n  \"fMetallic\":\"1\",\n  \"fSmoothness\":\"0.9\",\n  \"id\":1,\n  \"name\":\"Y18k\",\n  \"nameCn\":\"黄18K金\",\n  \"parentId\":0,\n  \"price\":310,\n  \"purity\":0.76,\n  \"type\":0,\n  \"userId\":0,\n  \"waste\":0.13\n},\n{\n  \"color\":\"225,225,225\",\n  \"density\":0.0214,\n  \"fMetallic\":\"1\",\n  \"fSmoothness\":\"0.9\",\n  \"id\":6,\n  \"name\":\"PT950\",\n  \"nameCn\":\"铂金\",\n  \"parentId\":0,\n  \"price\":310,\n  \"purity\":0.96,\n  \"type\":0,\n  \"userId\":0,\n  \"waste\":0.13\n},\n]","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"title-bar-box\"},[_c('div',{staticClass:\"status-bar\"}),_c('van-nav-bar',{staticClass:\"bag-bar\",attrs:{\"title\":_vm.title,\"left-text\":\"\",\"left-arrow\":\"\",\"safe-area-inset-top\":\"\"},on:{\"click-left\":_vm.onClickLeft}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"title-bar-box\">\n    <div class=\"status-bar\"></div>\n    <van-nav-bar\n      :title=\"title\"\n      left-text=\"\"\n      left-arrow\n      @click-left=\"onClickLeft\"\n      safe-area-inset-top\n      class=\"bag-bar\"\n    />\n  </div>\n</template>\n\n<script>\n  export default {\n\t\tname: 'TitleBar',\n    props: {\n      title: {\n        type: String,\n        default: ''\n      },\n\t\t\ttype: {\n\t\t\t\ttype: Number,\n\t\t\t\tdefault: 1 // 1默认返回 2uni返回\n\t\t\t}\n    },\n    methods: {\n      onClickLeft () {\n\t\t\t\tif (this.type === 1) {\n        \twindow.history.go(-1)\n\t\t\t\t} else if (window.uni.reLaunch) {\n\t\t\t\t\twindow.uni.reLaunch({\n\t\t\t\t\t\turl: '../../pages/index/index'\n\t\t\t\t\t});\n\t\t\t\t}\n      }\n    },\n  }\n</script>\n\n<style lang=\"scss\" scoped>\n.title-bar-box {\n\theight: 72px;\n  background: #fff;\n}\n.status-bar {\n  width: 100%;\n  height: 24px;\n  background: #fff;\n  position: fixed;\n  top:0;\n  z-index: 9;\n}\n/deep/.bag-bar {\n    position: fixed;\n    width: 100%;\n    top: 24px;\n    .van-icon {\n      color: #000 !important;\n    }\n    .van-nav-bar__content {\n      height: 50px;\n    }\n    .van-nav-bar__title {\n      line-height: 50px;\n      font-size: 16px;\n      font-weight: 700 !important;\n      color: #000;\n    }\n    .van-nav-bar__arrow {\n      font-size: 24px;\n    }\n    .van-nav-bar__left, .van-nav-bar__right {\n      padding: 8px;\n    }\n  }\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=0a50832b&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=0a50832b&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0a50832b\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=0a50832b&lang=scss&scoped=true&\"","module.exports = __webpack_public_path__ + \"img/bg.fc782997.png\";"],"sourceRoot":""}