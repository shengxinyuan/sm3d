(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3cb12080"],{"08b7":function(s,t,e){"use strict";e("4406")},4406:function(s,t,e){},cf2a:function(s,t,e){"use strict";e.r(t);var i=function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"order"},[e("title-bar",{attrs:{title:"设计信息"}}),e("div",{staticClass:"order-header"},[e("div",{staticClass:"design-img",style:{backgroundImage:"url("+s.preview_image}}),e("p",{staticClass:"order-tip"},[s._v("3D定制效果仅供参考，商品以实物为准")])]),s.title?e("div",{staticClass:"order-name",on:{click:s.toggleShow}},[e("span",{staticStyle:{"line-height":"24px"}},[s._v("设计名称：")]),e("span",{staticClass:"order-title"},[s._v(s._s(s.title))]),e("span",{staticClass:"tip-icon"},[e("van-icon",{attrs:{name:"edit"}})],1)]):s._e(),e("div",{staticClass:"order-tab"},[e("van-tabs",{staticClass:"order-tabs",model:{value:s.active,callback:function(t){s.active=t},expression:"active"}},[e("van-tab",{attrs:{title:"款式参数"}},[e("div",{staticClass:"order-ks"},[e("div",{staticClass:"order-cell order-cell__picker"},[e("span",{staticClass:"order-cell__label"},[s._v("手寸")]),e("span",{staticClass:"order-cell__value"},[s._v(s._s(s.ksInfo.sc))]),e("van-icon",{staticClass:"order-cell__picker-icon",attrs:{name:"question-o",size:"24px"},on:{click:s.showHelpPopup}}),e("van-popup",{attrs:{closeable:""},model:{value:s.showHelp,callback:function(t){s.showHelp=t},expression:"showHelp"}},[e("div",{staticClass:"order-help"},[e("p",[s._v("如何测量正确的手寸？")]),e("van-swipe",{staticClass:"my-swipe"},[e("van-swipe-item",[e("img",{attrs:{src:"https://h5.zbird.com/hybrid/html/custom/assets/size1.png",width:"315px",height:"220px"}})]),e("van-swipe-item",[e("img",{attrs:{src:"https://h5.zbird.com/hybrid/html/custom/assets/size2.png",width:"315px",height:"220px"}})]),e("van-swipe-item",[e("img",{attrs:{src:"https://h5.zbird.com/hybrid/html/custom/assets/size3.png",width:"315px",height:"220px"}})]),e("van-swipe-item",[e("img",{attrs:{src:"https://h5.zbird.com/hybrid/html/custom/assets/size4.png",width:"315px",height:"220px"}})])],1)],1)])],1),e("div",{staticClass:"order-cell"},[e("span",{staticClass:"order-cell__label"},[s._v("材质")]),e("span",{staticClass:"order-cell__value"},[s._v(s._s(s.ksInfo.cz))])]),e("div",{staticClass:"order-cell"},[e("span",{staticClass:"order-cell__label"},[s._v("戒臂")]),e("span",{staticClass:"order-cell__value"},[s._v(s._s(s.ksInfo.jb))])]),e("div",{staticClass:"order-cell"},[e("span",{staticClass:"order-cell__label"},[s._v("花头")]),e("span",{staticClass:"order-cell__value"},[s._v(s._s(s.ksInfo.ht))])]),e("div",{staticClass:"order-cell"},[e("span",{staticClass:"order-cell__label"},[s._v("刻字")]),e("span",{staticClass:"order-cell__value"},[s._v(s._s(s.ksInfo.kz||"-"))])])])]),e("van-tab",{attrs:{title:"钻石参数"}},[e("div",{staticClass:"order-ks"},[e("div",{staticClass:"order-cell"},[e("span",{staticClass:"order-cell__label"},[s._v("钻石价格")]),e("span",{staticClass:"order-cell__value"},[s._v("¥"+s._s(s.zsInfo.price||"1500"))])]),e("div",{staticClass:"order-cell"},[e("span",{staticClass:"order-cell__label"},[s._v("形状")]),e("span",{staticClass:"order-cell__value"},[s._v(s._s(s.zsInfo.shape))])]),e("div",{staticClass:"order-cell"},[e("span",{staticClass:"order-cell__label"},[s._v("颜色")]),e("span",{staticClass:"order-cell__value"},[s._v(s._s(s.zsInfo.color))])]),e("div",{staticClass:"order-cell"},[e("span",{staticClass:"order-cell__label"},[s._v("净度")]),e("span",{staticClass:"order-cell__value"},[s._v(s._s(s.zsInfo.clarity))])]),e("div",{staticClass:"order-cell"},[e("span",{staticClass:"order-cell__label"},[s._v("荧光")]),e("span",{staticClass:"order-cell__value"},[s._v(s._s(s.zsInfo.flr_intensity))])]),e("div",{staticClass:"order-cell"},[e("span",{staticClass:"order-cell__label"},[s._v("抛光")]),e("span",{staticClass:"order-cell__value"},[s._v(s._s(s.zsInfo.polish))])]),e("div",{staticClass:"order-cell"},[e("span",{staticClass:"order-cell__label"},[s._v("切工")]),e("span",{staticClass:"order-cell__value"},[s._v(s._s(s.zsInfo.cut))])]),e("div",{staticClass:"order-cell"},[e("span",{staticClass:"order-cell__label"},[s._v("对称")]),e("span",{staticClass:"order-cell__value"},[s._v(s._s(s.zsInfo.symmetry))])])])])],1)],1),e("div",{staticClass:"bag-btns"},[e("div",{staticClass:"price"},[s._v("¥ "+s._s(s._f("formatCost")(s.price)))]),e("div",{staticClass:"btns"},[e("van-icon",{staticClass:"icon-my-design",attrs:{name:"bag-o",color:"rgb(193, 177, 138)",size:"25"},on:{click:function(){s.$router.push("/mydesign")}}}),e("div",[e("van-button",{staticClass:"button bag-list__btn--save",attrs:{type:"primary"},on:{click:s.toggleShow}},[s._v("保存设计")])],1),e("div",{staticClass:"flex1"}),e("div",[e("van-button",{staticClass:"button bag-list__btn--buy",attrs:{type:"primary"},on:{click:s.buy}},[s._v("确认购买")])],1)],1)]),e("van-dialog",{staticClass:"dialog",attrs:{title:"设计名称","show-cancel-button":""},on:{open:s.handleOpen,confirm:s.handleConfirm,close:s.handleClose},model:{value:s.show,callback:function(t){s.show=t},expression:"show"}},[e("van-field",{ref:"inputRef",staticClass:"title-input",attrs:{label:"",placeholder:"请填写设计名称",autofocus:""},model:{value:s.curTitle,callback:function(t){s.curTitle=t},expression:"curTitle"}})],1)],1)},a=[],l=(e("2ca0"),e("159b"),e("d3b7"),e("25f0"),e("9e2c")),n={data:function(){return{price:"",bn:this.$route.query.bn||0,active:2,title:"",curTitle:"",preview_image:"",show:!1,ksInfo:{sc:0,cz:"",cz_id:2,jb:"",ht:"",fs:"",kz:""},zsInfo:{},showSc:!1,showHelp:!1}},created:function(){this.loadDesign()},methods:{loadDesign:function(){var s=this;this.$get({url:"/api/3d/design_detail",data:{design_bn:this.bn}}).then((function(t){var e=t.data;s.preview_image=e.preview_image,s.preview_image&&s.preview_image.startsWith("uploads")&&(s.preview_image=""+s.preview_image),e.title&&(s.title=e.title),s.ksInfo.sc=e.ring_size,s.ksInfo.kz=e.ring_print,s.ksInfo.ht=e.flower_head_id,s.ksInfo.jb=e.ring_arm_id,s.zsInfo=e.diamond_info,l["c"].forEach((function(t){t.id===e.texture_id&&(s.ksInfo.cz=t.nameCn)})),s.$get({url:"/api/3d/order/compute_price",data:{diamond_id:e.diamond_id,texture_id:e.texture_id,ring_size:e.ring_size,ring_arm_id:e.ring_arm_id,flower_head_id:e.flower_head_id}}).then((function(t){1===t.status?s.price=t.data.price:s.$toast.fail(t.message||"获取数据失败，请稍后重试")}))})).catch((function(){s.$toast.fail("获取数据失败，请稍后重试")}))},showScPopup:function(){this.showSc=!0},showHelpPopup:function(){this.showHelp=!0},onConfirm:function(s,t){this.ksInfo.sc.value=s,this.ksInfo.sc.index=t,this.showSc=!1},onCancel:function(){this.showSc=!1},onClickLeft:function(){this.$router.back()},toggleShow:function(){this.show=!this.show},buy:function(){this.$router.push("/orderConfirm?bn=".concat(this.bn))},handleOpen:function(){this.curTitle=this.title},handleConfirm:function(){var s=this;this.title=this.curTitle,this.$post({url:"/api/3d/saveDesign",data:{bn:this.bn,flower_head_id:this.ksInfo.ht,ring_arm_id:this.ksInfo.jb,diamond_id:this.zsInfo.zs,ring_print:this.ksInfo.kz,texture_id:this.ksInfo.cz_id,title:this.title,ring_size:this.ksInfo.sc.index,good_type:1,preview_image:this.preview_image}}).then((function(t){s.$toast.fail("保存成功")})).catch((function(){s.$toast.fail("保存失败")}))},handleClose:function(){this.curTitle=""}},filters:{formatCost:function(s){if("number"===typeof s&&!isNaN(s))return s.toString()+".00"}}},r=n,c=(e("08b7"),e("2877")),o=Object(c["a"])(r,i,a,!1,null,"d63bd396",null);t["default"]=o.exports}}]);
//# sourceMappingURL=chunk-3cb12080.007f0645.js.map