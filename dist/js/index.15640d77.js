(function(t){function e(e){for(var s,n,r=e[0],c=e[1],d=e[2],l=0,u=[];l<r.length;l++)n=r[l],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&u.push(i[n][0]),i[n]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);m&&m(e);while(u.length)u.shift()();return o.push.apply(o,d||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],s=!0,n=1;n<a.length;n++){var r=a[n];0!==i[r]&&(s=!1)}s&&(o.splice(e--,1),t=c(c.s=a[0]))}return t}var s={},n={index:0},i={index:0},o=[];function r(t){return c.p+"js/"+({}[t]||t)+"."+{"chunk-173e4fe8":"d120d583","chunk-322e0fc0":"3dc90986","chunk-35f47541":"b23151ce","chunk-65c4127e":"52c946a3","chunk-67ed77fc":"7743729d","chunk-73e37404":"e5fadaed"}[t]+".js"}function c(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.e=function(t){var e=[],a={"chunk-173e4fe8":1,"chunk-322e0fc0":1,"chunk-35f47541":1,"chunk-65c4127e":1,"chunk-67ed77fc":1,"chunk-73e37404":1};n[t]?e.push(n[t]):0!==n[t]&&a[t]&&e.push(n[t]=new Promise((function(e,a){for(var s="css/"+({}[t]||t)+"."+{"chunk-173e4fe8":"6678a8a9","chunk-322e0fc0":"eac1de04","chunk-35f47541":"67602b05","chunk-65c4127e":"4a5ee000","chunk-67ed77fc":"d7cae8d7","chunk-73e37404":"88919a8b"}[t]+".css",i=c.p+s,o=document.getElementsByTagName("link"),r=0;r<o.length;r++){var d=o[r],l=d.getAttribute("data-href")||d.getAttribute("href");if("stylesheet"===d.rel&&(l===s||l===i))return e()}var u=document.getElementsByTagName("style");for(r=0;r<u.length;r++){d=u[r],l=d.getAttribute("data-href");if(l===s||l===i)return e()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=e,m.onerror=function(e){var s=e&&e.target&&e.target.src||i,o=new Error("Loading CSS chunk "+t+" failed.\n("+s+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=s,delete n[t],m.parentNode.removeChild(m),a(o)},m.href=i;var f=document.getElementsByTagName("head")[0];f.appendChild(m)})).then((function(){n[t]=0})));var s=i[t];if(0!==s)if(s)e.push(s[2]);else{var o=new Promise((function(e,a){s=i[t]=[e,a]}));e.push(s[2]=o);var d,l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=r(t);var u=new Error;d=function(e){l.onerror=l.onload=null,clearTimeout(m);var a=i[t];if(0!==a){if(a){var s=e&&("load"===e.type?"missing":e.type),n=e&&e.target&&e.target.src;u.message="Loading chunk "+t+" failed.\n("+s+": "+n+")",u.name="ChunkLoadError",u.type=s,u.request=n,a[1](u)}i[t]=void 0}};var m=setTimeout((function(){d({type:"timeout",target:l})}),12e4);l.onerror=l.onload=d,document.head.appendChild(l)}return Promise.all(e)},c.m=t,c.c=s,c.d=function(t,e,a){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)c.d(a,s,function(e){return t[e]}.bind(null,s));return a},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/",c.oe=function(t){throw console.error(t),t};var d=window["webpackJsonp"]=window["webpackJsonp"]||[],l=d.push.bind(d);d.push=e,d=d.slice();for(var u=0;u<d.length;u++)e(d[u]);var m=l;o.push([2,"chunk-vendors","chunk-common"]),a()})({1669:function(t,e,a){},"18df":function(t,e,a){"use strict";a("5951")},1967:function(t,e,a){},"199c":function(t,e){},2:function(t,e,a){t.exports=a("56d7")},"23be":function(t,e,a){"use strict";var s=a("199c"),n=a.n(s);e["default"]=n.a},3947:function(t,e,a){},"3dfd":function(t,e,a){"use strict";var s=a("7267"),n=a("23be"),i=(a("5c0b"),a("2877")),o=Object(i["a"])(n["default"],s["a"],s["b"],!1,null,null,null);e["default"]=o.exports},"408d":function(t,e,a){"use strict";a("1967")},"54e6":function(t,e,a){"use strict";a("c385")},"56d7":function(t,e,a){"use strict";a.r(e);a("be7f");var s,n=a("565f"),i=(a("e17f"),a("2241")),o=(a("8a58"),a("e41f")),r=(a("5f5f"),a("f253")),c=(a("2994"),a("2bdd")),d=(a("e7e5"),a("d399")),l=(a("c3a6"),a("ad06")),u=(a("bda7"),a("5e46")),m=(a("da3c"),a("0b33")),f=(a("5246"),a("6b41")),h=(a("4d48"),a("d1e1")),v=(a("5f1a"),a("a3e2")),g=(a("81e6"),a("9ffb")),p=(a("66b9"),a("b650")),_=(a("4b0a"),a("2bb1")),b=(a("7844"),a("5596")),I=(a("a52c"),a("2ed4")),C=(a("537a"),a("ac28")),A=(a("2b28"),a("9ed2")),k=(a("acb7"),a("67bb")),y=(a("e260"),a("e6cf"),a("cca6"),a("a79d"),a("2b0e")),w=a("3dfd"),P=(a("d3b7"),a("3ca3"),a("ddb0"),a("8c4f")),D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("title-bar",{attrs:{title:"3D设计",type:2}}),t._m(0),t._m(1),t._m(2),a("router-link",{attrs:{to:"/mydesign",tag:"a"}},[a("div",{staticClass:"home-mydesign"})]),t._m(3),t._m(4)],1)},E=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{attrs:{href:"/design.html"}},[a("div",{staticClass:"home-banner"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{attrs:{href:"/design.html"}},[a("div",{staticClass:"home-tag"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{attrs:{href:"/design.html"}},[a("div",{staticClass:"home-design"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{attrs:{href:"/design.html"}},[a("div",{staticClass:"home-se"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{attrs:{href:"/design.html"}},[a("div",{staticClass:"home-img"})])}],x={name:"Home",components:{},created:function(){this.$route.query.hasOwnProperty("token")&&localStorage.setItem("token",this.$route.query.token)},methods:{}},$=x,M=(a("7acf"),a("2877")),O=Object(M["a"])($,D,E,!1,null,"088def69",null),j=O.exports,T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},t._l(t.routes.filter((function(t,e){return e>0})),(function(e,s){return a("router-link",{key:s,staticClass:"item",attrs:{to:e.path,tag:"div"}},[t._v(" "+t._s(e.name)+" ")])})),1)},B=[],Q={data:function(){return{routes:vt}}},S=Q,G=(a("408d"),Object(M["a"])(S,T,B,!1,null,null,null)),R=G.exports,L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"order-confirm"},[a("title-bar",{attrs:{title:"确认订单"}}),a("section",{staticClass:"order-info-item"},[a("div",{staticClass:"flex order-title-cont"},[a("van-icon",{attrs:{name:"location-o icon-style"}}),a("div",{staticClass:"title"},[t._v(" 收货地址 ")])],1),a("div",{staticClass:"order-info-cont flex"},[a("div",{staticClass:"flex1",on:{click:t.changeAddress}},[a("p",[a("span",[t._v(t._s(t.$store.state.orderConfirm.currtAddress.name||"请选择收货地址"))]),a("span",{staticClass:"phone-num"},[t._v(t._s(t.$store.state.orderConfirm.currtAddress.tel||""))])]),a("p",{staticClass:"address"},[t._v(t._s(t.$store.state.orderConfirm.currtAddress.address||""))])]),a("van-icon",{attrs:{name:"arrow"}})],1)]),a("section",{staticClass:"order-info-item"},[a("div",{staticClass:"flex order-title-cont"},[a("van-icon",{attrs:{name:"completed icon-style"}}),a("div",{staticClass:"title"},[t._v(" 订单商品信息 ")])],1),a("div",{staticClass:"order-info-cont"},[a("div",[a("div",{staticClass:"design-img",style:{backgroundImage:"url("+t.preview_image}})]),a("div",{staticClass:"order-cell"},[a("span",{staticClass:"order-cell__label"},[t._v("款式：")]),a("span",{staticClass:"order-cell__value"},[t._v(t._s(t.ksInfo.ks))])]),a("div",{staticClass:"order-cell"},[a("span",{staticClass:"order-cell__label"},[t._v("材质：")]),a("span",{staticClass:"order-cell__value"},[t._v(t._s(t.ksInfo.cz))])]),t.ksInfo.kz?a("div",{staticClass:"order-cell"},[a("span",{staticClass:"order-cell__label"},[t._v("刻字：")]),a("span",{staticClass:"order-cell__value"},[t._v(t._s(t.ksInfo.kz))])]):t._e(),a("div",{staticClass:"order-cell"},[a("span",{staticClass:"order-cell__label"},[t._v("戒臂：")]),a("span",{staticClass:"order-cell__value"},[t._v(t._s(t.ksInfo.jb))])]),a("div",{staticClass:"order-cell"},[a("span",{staticClass:"order-cell__label"},[t._v("花头：")]),a("span",{staticClass:"order-cell__value"},[t._v(t._s(t.ksInfo.ht))])])]),a("div",{staticClass:"cont-info-more"},[a("label",{staticClass:"remark-label",attrs:{for:"remark"}},[t._v("订单备注")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],staticClass:"remark",attrs:{id:"remark",type:"text",placeholder:"请填写"},domProps:{value:t.comment},on:{input:function(e){e.target.composing||(t.comment=e.target.value)}}})])]),a("section",{staticClass:"order-info-item"},[a("div",{staticClass:"flex order-title-cont"},[a("van-icon",{attrs:{name:"gold-coin-o icon-style"}}),a("div",{staticClass:"title flex1 fs-18"},[t._v(" 订单总金额 ")]),a("div",{staticClass:"title yellow fs-18"},[t._v(" ¥ "+t._s(t.ddInfo.total_amount)+" ")])],1),a("div",{staticClass:"order-info-cont"},[t.userInfo.is_vip?a("div",{staticClass:"flex yellow fs-18"},[a("van-icon",{attrs:{name:"coupon-o icon-style"}}),a("div",{staticClass:"flex1"},[t._v("VIP优惠")]),a("div",[t._v("- "+t._s(t.ddInfo.total_amount-t.ddInfo.total_vip||0)+"元")])],1):t._e(),a("div",{staticClass:"flex pt10 fs-18"},[a("van-icon",{attrs:{name:"balance-list-o icon-style"}}),a("div",{staticClass:"flex1"},[t._v("支付")]),a("div",[a("span",[t._v("定金："+t._s(t.ddInfo.deposit)+"元 + ")]),a("span",[t._v("尾款："+t._s(t.userInfo.is_vip?t.ddInfo.total_vip-t.ddInfo.deposit:t.ddInfo.total_amount-t.ddInfo.deposit)+"元")])])],1),a("div",{staticClass:"jump-vip",on:{click:t.jumpVip}},[t._v("成为会员，享价格优惠！")])])]),a("div",{staticClass:"btns-box"},[a("a",{staticClass:"btn",on:{click:t.buy}},[t._v("立即购买")])])],1)},N=[],z=(a("2ca0"),a("b0c0"),a("159b"),a("99af"),a("9e2c")),W={components:{},data:function(){return{bn:this.$route.query.bn,comment:"",preview_image:"",ksInfo:{sc:{value:"12 51.2mm",index:"12"},ks:"圆款钻石定制",cz:"",jb:"",ht:"",fs:"天然钻石(白)"},userInfo:{balance:0,is_vip:0},zsInfo:{zs:"GIA 232813821738",zz:"0.15ct",xz:"圆形",ys:"K",jd:"SI2",yg:"无",pg:"EX",qg:"VG",dc:"EX"},ddInfo:{cost:0,deposit:0,total_amount:0,total_vip:0}}},created:function(){this.onLoad()},computed:{},methods:{onLoad:function(){var t=this;Promise.all([this.$get({url:"/api/3d/design_detail",data:{design_bn:this.bn}}),this.$get({url:"/api/3d/order",data:{design_bn:this.bn}})]).then((function(e){if(1==e.status){var a=e[0].data,s=e[1].data;t.preview_image=a.preview_image,t.preview_image&&t.preview_image.startsWith("uploads")&&(t.preview_image=""+t.preview_image),a.title&&(t.name=a.title),t.ksInfo.sc=a.ring_size,t.ksInfo.kz=a.ring_print,t.ksInfo.ht=a.flower_head_id,t.ksInfo.jb=a.ring_arm_id,t.zsInfo.zs=a.diamond_id,t.ddInfo=s,t.userInfo.balance=s.user_info.balance,t.userInfo.is_vip=s.user_info.is_vip,z["c"].forEach((function(e){e.id===a.texture_id&&(t.ksInfo.cz=e.nameCn)}))}else t.$toast.fail(e.message||"获取数据失败")})).catch((function(e){t.$toast.fail("获取数据失败")}))},buy:function(){var t=this;this.$store.state.orderConfirm.currtAddress.id?this.$post({url:"/api/3d/order",data:{design_bn:this.$route.query.bn,coupon_id:0,comment:this.comment,address_id:this.$store.state.orderConfirm.currtAddress.id,vip:0}}).then((function(e){if(1==e.status){if(t.$toast.success("提交订单成功"),window.uni){var a={vip:t.userInfo.is_vip?1:0,menber_price:t.userInfo.balance?+t.userInfo.balance:0,shop_price:t.ddInfo.deposit?+t.ddInfo.deposit:0};window.uni.navigateTo({url:"../my/payments?data=".concat(+e.data.deposit_bn_id,"&shop=").concat(JSON.stringify(a),"&source=3d")})}}else t.$toast.fail(e.message||"提交订单失败")})).catch((function(){t.$toast.fail("提交订单失败")})):this.$toast("请先选择收货地址")},changeAddress:function(){this.$router.push("/address")},jumpVip:function(){window.uni&&window.uni.navigateTo({url:"../my/vip_member"})}}},H=W,Y=(a("aec3"),Object(M["a"])(H,L,N,!1,null,"958a0346",null)),U=Y.exports,K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"address"},[a("title-bar",{attrs:{title:"地址列表"}}),a("van-address-list",{attrs:{list:t.list,"default-tag-text":"默认",editable:"false"},on:{add:t.onAdd,select:t.select},model:{value:t.chosenAddressId,callback:function(e){t.chosenAddressId=e},expression:"chosenAddressId"}})],1)},J=[],V=(a("d81d"),{data:function(){return{chosenAddressId:0,list:[]}},created:function(){this.loadAddressInfo()},methods:{loadAddressInfo:function(){var t=this;this.$get({url:"/api/address",data:{is_mine:1},options:{token:localStorage.getItem("token")}}).then((function(e){t.list=e.data,t.list.map((function(t){t.name=t.contact,t.tel=t.mobile,t.address=t.province+"-"+t.area+"-"+t.city+"-"+t.address}))})).catch((function(){}))},onAdd:function(){window.uni&&window.uni.navigateTo({url:"../my/addAddress?is_mine=1&onShow=0"})},select:function(t,e){this.$store.commit("setState",{currtAddress:t}),this.$router.back()}}}),Z=V,q=(a("54e6"),Object(M["a"])(Z,K,J,!1,null,"698f094f",null)),X=q.exports,F=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"design"},[s("title-bar",{attrs:{title:"3D设计"}}),t.loading?s("Loading"):t._e(),s("img",{staticClass:"img2",attrs:{src:a("f923"),alt:""}}),t._m(0),"design"===t.footerTabId?s("section",{staticClass:"page-footer"},[s("div",{staticClass:"design-tabs-title"},[s("div",{staticClass:"back",on:{click:function(){return t.footerTabId="default"}}},[s("van-icon",{attrs:{name:"arrow-left"}}),t._v("返回 ")],1),s("a",{class:1===t.designTab?"active":"",on:{click:function(){t.designTab=1,t.edit3dPartType=1}}},[t._v("花头款式")]),s("a",{class:2===t.designTab?"active":"",on:{click:function(){t.designTab=2,t.edit3dPartType=2}}},[t._v("戒托款式")]),s("a",{class:3===t.designTab?"active":"",on:{click:function(){return t.designTab=3}}},[t._v("戒托材质")])]),s("div",{staticClass:"design-tabs-cont"},[1===t.designTab?s("div",{staticClass:"list"},t._l(t.$store.state.design.parts,(function(e,a){return s("div",{key:a,staticClass:"item",class:t.$store.state.design.partId===e.id?"active":"",on:{click:function(){t.changePartId(e.id)}}},[s("div",{staticClass:"img-box"},[s("i",{staticClass:"img-border"}),s("i",{staticClass:"parts-img img",style:{backgroundImage:"url(https://design.bavlo.com/PartRes/webImg/"+e.defaultImg+"!600)"}})]),s("div",{staticClass:"txt"},[t._v("花头"+t._s(t._f("formatIndex")(a)))])])})),0):t._e(),2===t.designTab?s("div",{staticClass:"list"},t._l(t.$store.state.design.mainParts,(function(e,a){return s("div",{key:a,staticClass:"item",class:t.$store.state.design.mainPartId===e.id?"active":"",on:{click:function(){t.changeMainPartId(e.id)}}},[s("div",{staticClass:"img-box"},[s("i",{staticClass:"img-border"}),s("i",{staticClass:"main-parts-img img",style:{backgroundImage:"url(https://design.bavlo.com/PartRes/webImg/"+e.defaultImg+"!600)"}})]),s("div",{staticClass:"txt"},[t._v("戒托"+t._s(t._f("formatIndex")(a)))])])})),0):t._e(),3===t.designTab?s("div",{staticClass:"list"},t._l(t.$store.state.design.metals,(function(e,a){return s("div",{key:a,staticClass:"item",class:t.$store.state.design.metalId===e.id?"active":"",on:{click:function(){t.changeMetalId(e.id)}}},[s("div",{staticClass:"img-box"},[s("i",{staticClass:"img-border"}),s("i",{staticClass:"metals-img img",style:{backgroundImage:"url(https://design.bavlo.com/IconRes/RoundMetalIcons/"+e.id+".png)"}})]),s("div",{staticClass:"txt"},[t._v(t._s(e.nameCn))])])})),0):t._e()])]):"diamond"===t.footerTabId?s("section",{staticClass:"page-footer"},[s("div",{staticClass:"design-tabs-title"},[s("div",{staticClass:"back",on:{click:function(){return t.footerTabId="default"}}},[s("van-icon",{attrs:{name:"arrow-left"}}),t._v("返回 ")],1),s("a",{staticClass:"active"},[t._v("选择主钻")])]),s("div",{staticClass:"design-tabs-cont"},[this.$store.state.design.diamondId?s("div",{staticClass:"diamond-detail"},[s("div",{staticClass:"diamond-info-cont"},[s("img",{staticClass:"diamond-img",attrs:{src:a("1c85"),alt:""}}),s("div",{staticClass:"diamond-info"},[s("p",[t._v("GIA "+t._s(t.$store.state.design.diamondInfo.size))]),s("p",[t._v("详情: "+t._s(t.$store.state.design.diamondInfo.detail||"_"))]),s("p",[t._v("售价 ¥ "+t._s(t.$store.state.design.diamondInfo.price||"-")+"元")])])]),s("a",{staticClass:"change-btn",on:{click:t.selectDiamond}},[s("van-icon",{attrs:{name:"exchange"}}),s("span",{staticClass:"txt"},[t._v("更换")])],1)]):s("img",{attrs:{src:a("e381"),alt:"",width:"100%"},on:{click:t.selectDiamond}})])]):"mark"===t.footerTabId?s("section",{staticClass:"page-footer"},[s("div",{staticClass:"design-tabs-title"},[s("div",{staticClass:"back",on:{click:t.markBack}},[s("van-icon",{attrs:{name:"arrow-left"}}),t._v("返回 ")],1),s("a",{staticClass:"active"},[t._v("文字印记")])]),s("div",{staticClass:"design-tabs-cont"},[s("div",{staticClass:"mark-cont"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.mark,expression:"mark"}],staticClass:"mark-input",attrs:{type:"text",maxlength:"16",placeholder:"印刻彼此名字或誓言(16字内)"},domProps:{value:t.mark},on:{keyup:t.onKeyup,input:function(e){e.target.composing||(t.mark=e.target.value)}}}),s("a",{staticClass:"mark-btn",on:{click:t.saveMark}},[t._v("确认")])])])]):s("section",{staticClass:"page-footer"},[s("div",{staticClass:"btns-group"},[s("a",{staticClass:"option",on:{click:function(){return t.footerTabId="design"}}},[s("i",{staticClass:"icon-design"}),s("span",{staticClass:"txt"},[t._v("设计")])]),s("a",{staticClass:"option",on:{click:function(){return t.footerTabId="diamond"}}},[s("i",{staticClass:"icon-diamond"}),s("span",{staticClass:"txt"},[t._v("选钻")])]),s("a",{staticClass:"option",on:{click:function(){return t.footerTabId="mark"}}},[s("i",{staticClass:"icon-mark"}),s("span",{staticClass:"txt"},[t._v("印记")])]),s("a",{staticClass:"option",on:{click:function(){return t.handPicker=!0}}},[s("i",{staticClass:"icon-try"}),s("span",{staticClass:"txt"},[t._v("手寸")])]),s("a",{staticClass:"option",on:{click:t.tryOn}},[s("i",{staticClass:"icon-try"}),s("span",{staticClass:"txt"},[t._v("试戴")])])]),s("div",{staticClass:"buy-group"},[s("div",{staticClass:"cost"},[t._v("¥ "+t._s(t._f("formatCost")(t.price)))]),s("div",{staticClass:"buy-btn",on:{click:t.confirmDesign}},[t._v("确认设计")])])]),s("van-popup",{attrs:{round:"",position:"bottom"},model:{value:t.handPicker,callback:function(e){t.handPicker=e},expression:"handPicker"}},[s("van-picker",{attrs:{"show-toolbar":"","default-index":"8",columns:t.handInch},on:{cancel:function(e){t.handPicker=!1},confirm:t.changeHandInch}})],1)],1)},tt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"web3d-cont"},[a("div",{staticStyle:{},attrs:{id:"web3d"}})])}],et=a("ade3"),at=a("1da1"),st=(a("96cf"),a("25f0"),a("fb6a"),a("a9e3"),a("865f")),nt=a("4260"),it={components:{Loading:st["default"]},props:[],data:function(){return{handInch:z["d"],handPicker:!1,mark:"",footerTabId:"default",designTab:1,edit3dPartType:1,imgUrl:"",loading:!0,saveDesignInfo:null,design_bn:"",price:"-"}},computed:{},created:function(){this.$store.dispatch("loadUserInfo");var t=Object(nt["a"])("diamondId");this.getDiamond(t,!0)},mounted:function(){var t=this;Promise.all([this.$store.dispatch("loadDesignInfo"),this.$store.dispatch("loadMetalList"),this.$store.dispatch("loadMetalWeb"),this.$store.dispatch("loadGemList"),this.$store.dispatch("loadGemWeb")]).then((function(){console.log("mounted -> data loaded -> init3D");var e=Object(nt["a"])("bn"),a=Object(nt["a"])("partId"),s=Object(nt["a"])("mainPartId"),n=Object(nt["a"])("metalId"),i=Object(nt["a"])("mark"),o=Object(nt["a"])("currentHandInch"),r=Object(nt["a"])("diamondId");e?t.$store.dispatch("getDesignInfo",{design_bn:e}).then((function(c){t.saveDesignInfo=c.data,t.design_bn=e;var d=c.data,l=d.ring_size,u=d.diamond_id,m=d.ring_arm_id,f=d.flower_head_id,h=d.texture_id,v=d.ring_print,g=d.title;t.getDiamond(u),console.log({partId:a||f,mainPartId:s||m,metalId:n||h,mark:i||v,currentHandInch:o||l,diamondId:r||u,title:g}),t.mark=i||v||"",t.setRenderParams({partId:a||f,mainPartId:s||m,metalId:n||h,mark:i||v,currentHandInch:o||l,diamondId:r||u,title:g})})):t.setRenderParams({partId:a,mainPartId:s,metalId:n,mark:i,currentHandInch:o})}))},methods:(s={setRenderParams:function(t){var e=this;for(var a in t)t[a]||delete t[a];this.$store.commit("setState",t),setTimeout((function(){e.init3D()}),0)},getDiamond:function(t,e){t&&(this.$store.dispatch("getDiamondInfo",{id:t}),this.$store.commit("setState",{diamondId:t}),e&&(this.footerTabId="diamond"))},init3D:function(){var t=this;return Object(at["a"])(regeneratorRuntime.mark((function e(){var a,s,n,i,o,r,c,d,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t.$store.state.design,s=a.designInfo,n=a.partId,i=a.mainPartId,o=a.metalWeb,r=a.metalWebDefault,c=a.gemWeb,d=a.gemWebDefault,l=a.metalId,console.log("partId",n),t.my3d=Bavlo.initWeb3D(z["b"],"web3d",!1,z["e"],!1),t.my3d.onWindowResize(2),window.onresize=function(){t.my3d.onWindowResize(2)},t.my3d.initUserMatInfo(r,o,d,c),t.my3d.changeBackground("37,37,42"),t.my3d.loadVarDesign(s,i,n.toString()),setTimeout((function(){t.loading=!1,t.changeMetalId(l),t.my3d.changeCameraPos(!1,-45,85,-65)}),3e3);case 9:case"end":return e.stop()}}),e)})))()},confirmDesign:function(){var t=this,e=this.$store.state.design,a=e.currentHandInch,s=e.diamondId;if(a)if(s){var n=this.my3d.getTryOnState();console.log(12312312,n),0!==n&&(this.my3d.setModelTryonMode(!1,null),this.my3d.onWindowResize(2))}else this.$dialog.alert({title:"请选择钻石",message:"您未选择钻石，请选择钻石"}).then((function(){t.footerTabId="diamond"}));else this.$dialog.alert({title:"请选择手寸",message:"您未选择手寸，请选择戒指手寸大小"}).then((function(){t.handPicker=!0}))},selectDiamond:function(){var t=this.$store.state.design,e=t.mark,a=t.mainPartId,s=t.partId,n=t.metalId,i=t.diamondId,o=t.currentHandInch,r={};r.mark=e,r.mainPartId=a,r.partId=s,r.metalId=n,r.diamondId=i,r.currentHandInch=o,r.bn=this.design_bn;var c="//"+location.host+location.pathname+"?";for(var d in r)r[d]&&(c+=d+"="+r[d]+"&");c=c.slice(0,c.length-1),this.$router.push("/diamondList?backUrl=".concat(encodeURIComponent(c)))},tryOn:function(){},saveMark:function(){this.$store.commit("setState",{mark:this.mark}),this.my3d.printUserTextOfLayer(940,this.mark),this.my3d.changeCameraPos(!1,0,80,-60)},markBack:function(){this.footerTabId="default",this.my3d.setRotationState(!0)},onKeyup:function(t){"13"==t.keyCode&&this.saveMark()},changeHandInch:function(t){this.$store.commit("setState",{currentHandInch:t}),this.handPicker=!1,this.getPrice()},changePartId:function(t){console.log("partId",t);var e=this.my3d.getLoadModelState();2==e&&(this.my3d.switchPart(this.edit3dPartType,Number(t)),this.$store.commit("setState",{partId:t})),this.getPrice()},changeMainPartId:function(t){var e=this;console.log("mainPartId",t);var a=this.my3d.getLoadModelState();2==a&&(this.my3d.switchPart(this.edit3dPartType,Number(t)),this.$store.commit("setState",{mainPartId:t}),setTimeout((function(){e.mark&&(e.my3d.printUserTextOfLayer(940,e.mark),setTimeout((function(){e.my3d.setRotationState(!0)}),200))}),1e3)),this.getPrice()},changeMetalId:function(t){var e,a=this.$store.state.design.metals;a.forEach((function(a){+a.id===+t&&(e=a)})),console.log("changeMetalId",t,e),this.$store.commit("setState",{metalId:t}),e&&this.my3d.customizeMetalClass("金属图层",e),this.getPrice()}},Object(et["a"])(s,"tryOn",(function(){var t=this,e=this.$store.state.design.webModelPics;console.log(e),e&&e.length?this.hasModeltryOn():this.$store.dispatch("loadModelPicList").then((function(){t.hasModeltryOn()}))})),Object(et["a"])(s,"hasModeltryOn",(function(){var t=this.$store.state.design,e=t.webModelPics,a=t.userNo,s=this.my3d.getTryOnState();if(0===s){this.my3d.onWindowResize(0);var n=e[0];n.imgUrl="https://design.bavlo.com/WebModelPics/"+a+"/"+n.name,this.my3d.setModelTryonMode(!0,n)}else this.my3d.setModelTryonMode(!1,null),this.my3d.onWindowResize(2)})),Object(et["a"])(s,"getPrice",(function(){var t=this,e=this.$store.state.design,a=e.partId,s=e.mainPartId,n=e.metalId,i=e.currentHandInch,o=e.diamondId;this.$store.dispatch("getDesignPrice",{currentHandInch:i||13,partId:a,mainPartId:s,metalId:n,diamondId:o}).then((function(e){t.price=e}))})),s),filters:{formatIndex:function(t){return t+=1,t<10?"0"+t:t},formatCost:function(t){if("number"===typeof t&&!isNaN(t))return t.toString()+".00"}}},ot=it,rt=(a("18df"),Object(M["a"])(ot,F,tt,!1,null,"2c3bbc61",null)),ct=rt.exports,dt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"share"},[t.loading?s("Loading"):t._e(),s("div",{staticClass:"page-header"},[t._v(" 用户"+t._s(t.ksInfo.nickname||"-")+" 给您分享了他设计的钻戒 ")]),s("img",{staticClass:"img2",attrs:{src:a("f923"),alt:""}}),t._m(0),s("section",{staticClass:"page-footer"},[s("div",{staticClass:"list"},[s("div",{staticClass:"order-cell"},[s("span",{staticClass:"order-cell__label"},[t._v("价格：")]),s("span",{staticClass:"order-cell__value"},[t._v("¥ "+t._s(t.price||"-"))])]),s("div",{staticClass:"order-cell"},[s("span",{staticClass:"order-cell__label"},[t._v("款式：")]),s("span",{staticClass:"order-cell__value"},[t._v(t._s(t.ksInfo.title))])]),t._m(1),t._m(2)]),t._m(3)])],1)},lt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"web3d-cont"},[a("div",{staticStyle:{},attrs:{id:"web3d"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"order-cell"},[a("span",{staticClass:"order-cell__label"},[t._v("视角：")]),a("span",{staticClass:"order-cell__value"},[t._v("360°任意切换")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"order-cell"},[a("span",{staticClass:"order-cell__label"},[t._v("钻石：")]),a("span",{staticClass:"order-cell__value"},[t._v("GIA认证")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"buy-group"},[s("img",{staticClass:"qr-code",attrs:{src:a("7874"),alt:""}}),s("div",{staticClass:"tip"},[t._v("下载奢美饰界APP，设计你的钻戒！")])])}],ut={components:{Loading:st["default"]},props:[],data:function(){return{loading:!0,price:"",ksInfo:{}}},computed:{},created:function(){var t=this,e=this.$route.query.bn;this.$store.dispatch("share_loadUserInfo"),this.$store.dispatch("share_getDesignInfo",{design_bn:e}).then((function(e){t.ksInfo=e.data,t.getPrice(e.data),Promise.all([t.$store.dispatch("share_loadDesignInfo"),t.$store.dispatch("share_loadMetalList"),t.$store.dispatch("share_loadMetalWeb"),t.$store.dispatch("share_loadGemList"),t.$store.dispatch("share_loadGemWeb")]).then((function(){console.log("mounted -> data loaded -> init3D"),t.init3D()})).catch((function(t){console.log(t)}))}))},methods:{init3D:function(){var t=this;return Object(at["a"])(regeneratorRuntime.mark((function e(){var a,s,n,i,o,r,c,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t.$store.state.share,s=a.designInfo,n=a.partId,i=a.mainPartId,o=a.metalWeb,r=a.metalWebDefault,c=a.gemWeb,d=a.gemWebDefault,a.metalId,console.log("mainPartId",n,i),t.my3d=Bavlo.initWeb3D(z["b"],"web3d",!0,z["e"],!1),t.my3d.onWindowResize(2),window.onresize=function(){t.my3d.onWindowResize(2)},t.my3d.initUserMatInfo(r,o,d,c),t.my3d.changeBackground("37,37,42"),t.my3d.loadVarDesign(s,i,n.toString()),setTimeout((function(){t.loading=!1,t.my3d.changeCameraPos(!1,-45,85,-65)}),3e3);case 9:case"end":return e.stop()}}),e)})))()},getPrice:function(t){var e=this,a=t.ring_size,s=t.diamond_id,n=t.ring_arm_id,i=t.flower_head_id,o=t.texture_id;this.$store.dispatch("share_getDesignPrice",{currentHandInch:a||13,partId:i,mainPartId:n,metalId:o,diamondId:s}).then((function(t){e.price=t}))}}},mt=ut,ft=(a("d46c"),Object(M["a"])(mt,dt,lt,!1,null,"7b42cfa1",null)),ht=ft.exports;y["a"].use(P["a"]);var vt=[{path:"/debug",name:"DebugList",component:R},{path:"/",name:"Home",component:j},{path:"/design",name:"Design",component:ct},{path:"/share",name:"Share",component:ht},{path:"/mydesign",name:"MyDesign",component:function(){return a.e("chunk-322e0fc0").then(a.bind(null,"069e"))}},{path:"/order",name:"Order",component:function(){return a.e("chunk-67ed77fc").then(a.bind(null,"cf2a"))}},{path:"/diamondList",name:"DiamondList",component:function(){return a.e("chunk-173e4fe8").then(a.bind(null,"bab3"))}},{path:"/diamondDetail",name:"diamondDetail",component:function(){return a.e("chunk-73e37404").then(a.bind(null,"e385"))}},{path:"/orderConfirm",name:"OrderConfirm",component:U},{path:"/address",name:"Address",component:X},{path:"/myOrderList",name:"MyOrderList",component:function(){return a.e("chunk-35f47541").then(a.bind(null,"f35c"))}},{path:"/orderDetail",name:"OrderDetail",component:function(){return a.e("chunk-65c4127e").then(a.bind(null,"d3bb"))}},{path:"*",name:"404",component:j}],gt=new P["a"]({mode:"history",routes:vt}),pt=gt,_t=a("4360"),bt=(a("157a"),a("31ca")),It=a("a1e1");y["a"].use(k["a"]),y["a"].use(A["a"]),y["a"].use(C["a"]),y["a"].use(I["a"]),y["a"].use(b["a"]),y["a"].use(_["a"]),y["a"].use(p["a"]),y["a"].use(g["a"]),y["a"].use(v["a"]),y["a"].use(h["a"]),y["a"].use(f["a"]),y["a"].use(m["a"]),y["a"].use(u["a"]),y["a"].use(l["a"]),y["a"].use(d["a"]),y["a"].use(c["a"]),y["a"].use(r["a"]),y["a"].use(o["a"]),y["a"].use(i["a"]),y["a"].use(n["a"]),y["a"].component("title-bar",It["a"]),y["a"].prototype.$get=bt["a"],y["a"].prototype.$post=bt["b"],y["a"].prototype.$toast=d["a"],y["a"].config.productionTip=!1,new y["a"]({router:pt,store:_t["a"],render:function(t){return t(w["default"])}}).$mount("#app")},5951:function(t,e,a){},"5c0b":function(t,e,a){"use strict";a("9c0c")},7267:function(t,e,a){"use strict";a.d(e,"a",(function(){return s})),a.d(e,"b",(function(){return n}));var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},n=[]},7874:function(t,e){t.exports="data:image/png;base64,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"},"7acf":function(t,e,a){"use strict";a("1669")},"9c0c":function(t,e,a){},aec3:function(t,e,a){"use strict";a("3947")},c385:function(t,e,a){},cb49:function(t,e,a){},d46c:function(t,e,a){"use strict";a("cb49")}});
//# sourceMappingURL=index.15640d77.js.map