(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3b3dc931"],{b286:function(s,t,i){},cf2a:function(s,t,i){"use strict";i.r(t);var e=function(){var s=this,t=s.$createElement,i=s._self._c||t;return i("div",{staticClass:"order"},[i("title-bar",{attrs:{title:"设计信息"}}),i("div",{staticClass:"order-header"},[i("div",{staticClass:"design-img",style:{backgroundImage:"url("+s.preview_image}}),i("p",{staticClass:"order-tip"},[s._v("3D定制效果仅供参考，商品以实物为准")])]),s.title?i("div",{staticClass:"order-name",on:{click:s.toggleShow}},[i("span",{staticStyle:{"line-height":"24px"}},[s._v("设计名称：")]),i("span",{staticClass:"order-title"},[s._v(s._s(s.title))]),i("span",{staticClass:"tip-icon"},[i("van-icon",{attrs:{name:"edit"}})],1)]):s._e(),i("div",{staticClass:"order-tab"},[i("van-tabs",{staticClass:"order-tabs",model:{value:s.active,callback:function(t){s.active=t},expression:"active"}},[i("van-tab",{attrs:{title:"款式参数"}},[i("div",{staticClass:"order-ks"},[i("div",{staticClass:"order-cell order-cell__picker"},[i("span",{staticClass:"order-cell__label"},[s._v("手寸")]),i("span",{staticClass:"order-cell__value"},[s._v(s._s(s.ksInfo.sc))]),i("van-icon",{staticClass:"order-cell__picker-icon",attrs:{name:"question-o",size:"24px"},on:{click:s.showHelpPopup}}),i("van-popup",{attrs:{closeable:""},model:{value:s.showHelp,callback:function(t){s.showHelp=t},expression:"showHelp"}},[i("div",{staticClass:"order-help"},[i("p",[s._v("如何测量正确的手寸？")]),i("van-swipe",{staticClass:"my-swipe"},[i("van-swipe-item",[i("img",{attrs:{src:"https://h5.zbird.com/hybrid/html/custom/assets/size1.png",width:"315px",height:"220px"}})]),i("van-swipe-item",[i("img",{attrs:{src:"https://h5.zbird.com/hybrid/html/custom/assets/size2.png",width:"315px",height:"220px"}})]),i("van-swipe-item",[i("img",{attrs:{src:"https://h5.zbird.com/hybrid/html/custom/assets/size3.png",width:"315px",height:"220px"}})]),i("van-swipe-item",[i("img",{attrs:{src:"https://h5.zbird.com/hybrid/html/custom/assets/size4.png",width:"315px",height:"220px"}})])],1)],1)])],1),i("div",{staticClass:"order-cell"},[i("span",{staticClass:"order-cell__label"},[s._v("材质")]),i("span",{staticClass:"order-cell__value"},[s._v(s._s(s.ksInfo.cz))])]),i("div",{staticClass:"order-cell"},[i("span",{staticClass:"order-cell__label"},[s._v("戒臂")]),i("span",{staticClass:"order-cell__value"},[s._v(s._s(s.ksInfo.jb))])]),i("div",{staticClass:"order-cell"},[i("span",{staticClass:"order-cell__label"},[s._v("花头")]),i("span",{staticClass:"order-cell__value"},[s._v(s._s(s.ksInfo.ht))])]),i("div",{staticClass:"order-cell"},[i("span",{staticClass:"order-cell__label"},[s._v("刻字")]),i("span",{staticClass:"order-cell__value"},[s._v(s._s(s.ksInfo.kz))])])])]),i("van-tab",{attrs:{title:"钻石参数"}},[i("div",{staticClass:"order-ks"},[i("div",{staticClass:"order-cell"},[i("span",{staticClass:"order-cell__label"},[s._v("钻石价格")]),i("span",{staticClass:"order-cell__value"},[s._v("¥"+s._s(s.zsInfo.price||"1500"))])]),i("div",{staticClass:"order-cell"},[i("span",{staticClass:"order-cell__label"},[s._v("形状")]),i("span",{staticClass:"order-cell__value"},[s._v(s._s(s.zsInfo.shape))])]),i("div",{staticClass:"order-cell"},[i("span",{staticClass:"order-cell__label"},[s._v("颜色")]),i("span",{staticClass:"order-cell__value"},[s._v(s._s(s.zsInfo.color))])]),i("div",{staticClass:"order-cell"},[i("span",{staticClass:"order-cell__label"},[s._v("净度")]),i("span",{staticClass:"order-cell__value"},[s._v(s._s(s.zsInfo.clarity))])]),i("div",{staticClass:"order-cell"},[i("span",{staticClass:"order-cell__label"},[s._v("荧光")]),i("span",{staticClass:"order-cell__value"},[s._v(s._s(s.zsInfo.flr_intensity))])]),i("div",{staticClass:"order-cell"},[i("span",{staticClass:"order-cell__label"},[s._v("抛光")]),i("span",{staticClass:"order-cell__value"},[s._v(s._s(s.zsInfo.polish))])]),i("div",{staticClass:"order-cell"},[i("span",{staticClass:"order-cell__label"},[s._v("切工")]),i("span",{staticClass:"order-cell__value"},[s._v(s._s(s.zsInfo.cut))])]),i("div",{staticClass:"order-cell"},[i("span",{staticClass:"order-cell__label"},[s._v("对称")]),i("span",{staticClass:"order-cell__value"},[s._v(s._s(s.zsInfo.symmetry))])])])])],1)],1),i("div",{staticClass:"bag-btns"},[i("div",{staticClass:"price"},[s._v("¥ "+s._s(s._f("formatCost")(s.price)))]),i("div",{staticClass:"btns"},[i("van-icon",{staticClass:"icon-my-design",attrs:{name:"bag-o",color:"rgb(193, 177, 138)",size:"25"},on:{click:function(){s.$router.push("/mydesign")}}}),i("div",[i("van-button",{staticClass:"button bag-list__btn--save",attrs:{type:"primary"},on:{click:s.toggleShow}},[s._v("保存设计")])],1),i("div",{staticClass:"flex1"}),i("div",[i("van-button",{staticClass:"button bag-list__btn--buy",attrs:{type:"primary"},on:{click:s.buy}},[s._v("确认购买")])],1)],1)]),i("van-dialog",{staticClass:"dialog",attrs:{title:"设计名称","show-cancel-button":""},on:{open:s.handleOpen,confirm:s.handleConfirm,close:s.handleClose},model:{value:s.show,callback:function(t){s.show=t},expression:"show"}},[i("van-field",{ref:"inputRef",staticClass:"title-input",attrs:{label:"",placeholder:"请填写设计名称",autofocus:""},model:{value:s.curTitle,callback:function(t){s.curTitle=t},expression:"curTitle"}})],1)],1)},a=[],l=(i("2ca0"),i("159b"),i("d3b7"),i("25f0"),i("9e2c")),c={data:function(){return{price:"",bn:this.$route.query.bn||0,active:2,title:"",curTitle:"",preview_image:"",show:!1,ksInfo:{sc:0,cz:"",cz_id:2,jb:"",ht:"",fs:"",kz:""},zsInfo:{},showSc:!1,showHelp:!1}},created:function(){this.loadDesign()},methods:{loadDesign:function(){var s=this;this.$get({url:"/api/3d/design_detail",data:{design_bn:this.bn}}).then((function(t){var i=t.data;s.preview_image=i.preview_image,s.preview_image&&s.preview_image.startsWith("uploads")&&(s.preview_image=""+s.preview_image),i.title&&(s.title=i.title),s.ksInfo.sc=i.ring_size,s.ksInfo.kz=i.ring_print,s.ksInfo.ht=i.flower_head_id,s.ksInfo.jb=i.ring_arm_id,s.zsInfo=i.diamond_info,l["c"].forEach((function(t){t.id===i.texture_id&&(s.ksInfo.cz=t.nameCn)})),s.$get({url:"/api/3d/order/compute_price",data:{diamond_id:i.diamond_id,texture_id:i.texture_id,ring_size:i.ring_size,ring_arm_id:i.ring_arm_id,flower_head_id:i.flower_head_id}}).then((function(t){1===t.status&&(s.price=t.data.price)}))})).catch((function(){s.$toast.fail("获取数据失败，请稍后重试")}))},showScPopup:function(){this.showSc=!0},showHelpPopup:function(){this.showHelp=!0},onConfirm:function(s,t){this.ksInfo.sc.value=s,this.ksInfo.sc.index=t,this.showSc=!1},onCancel:function(){this.showSc=!1},onClickLeft:function(){this.$router.back()},toggleShow:function(){this.show=!this.show},buy:function(){this.$router.push("./orderConfirm?bn=".concat(this.bn))},handleOpen:function(){this.curTitle=this.title},handleConfirm:function(){var s=this;console.log(this.curTitle),this.title=this.curTitle,this.$post({url:"/api/3d/saveDesign",data:{bn:this.bn,flower_head_id:this.ksInfo.ht,ring_arm_id:this.ksInfo.jb,diamond_id:this.zsInfo.zs,ring_print:this.ksInfo.kz,texture_id:this.ksInfo.cz_id,title:this.title,ring_size:this.ksInfo.sc.index,good_type:1,preview_image:this.preview_image}}).then((function(t){s.$toast.fail("保存成功")})).catch((function(){s.$toast.fail("保存失败")}))},handleClose:function(){this.curTitle=""}},filters:{formatCost:function(s){if("number"===typeof s&&!isNaN(s))return s.toString()+".00"}}},n=c,r=(i("d327"),i("2877")),o=Object(r["a"])(n,e,a,!1,null,"2d31cc6c",null);t["default"]=o.exports},d327:function(s,t,i){"use strict";i("b286")}}]);
//# sourceMappingURL=chunk-3b3dc931.889848e7.js.map