{"version":3,"sources":["webpack:///./src/components/3DLoading/index.vue?bed8","webpack:///./src/util/ajax.js","webpack:///./src/util/index.js","webpack:///./src/store/design.js","webpack:///./src/store/common.js","webpack:///./src/store/orderConfirm.js","webpack:///./src/store/share.js","webpack:///./src/store/index.js","webpack:///./src/components/3DLoading/index.vue?da1b","webpack:///./src/components/3DLoading/index.vue?3526","webpack:///./src/mixins/design.js","webpack:///./src/components/3DLoading/index.vue","webpack:///./src/const/design.js","webpack:///./src/components/TitleBar/index.vue?14dd","webpack:///src/components/TitleBar/index.vue","webpack:///./src/components/TitleBar/index.vue?1380","webpack:///./src/components/TitleBar/index.vue","webpack:///./src/components/TitleBar/index.vue?74f7","webpack:///./src/assets/diamond-list/bg.png"],"names":["render","_vm","this","_h","$createElement","_self","_c","_m","staticRenderFns","staticClass","_v","host","location","includes","axios","defaults","baseURL","getRequest","method","url","data","options","isForm","tokenHeader","localStorage","getItem","token","stringify","params","headers","then","res","Promise","reject","errcode","catch","err","get","post","getUrlParam","name","reg","RegExp","r","window","search","substr","match","unescape","urlParse","URL","obj","arr","forEach","item","tempArr","substring","split","key","decodeURIComponent","val","state","userNo","desNo","userInfo","designInfo","partId","parts","allParts","mainParts","mainPartId","allMainParts","metals","metalId","mark","currentHandInch","diamondId","diamondInfo","title","comboList","allComboList","comboId","otherGems","metalWeb","metalWebDefault","gemWeb","gemWebDefault","materialWeb","materialWebDefault","webModelPics","mutations","setState","payload","actions","loadUserInfo","commit","apiUrl","id","code","user","getDesignList","typeId","rows","dgpage","userId","loadType","list","loadMetalList","length","map","console","log","metal","nameCn","colorList","myAlert","loadDesignInfo","all","heads","rings","status","info","mainPartsFilter","d","ring_arm_id","filter","m","partsFilter","flower_id","loadGemList","gems","gem","loadOtherGemList","loadMetalWeb","loadGemWeb","loadMaterialWeb","loadModelPicList","desTypeId","type","submitDesign","image","bn","isCombo","base64","message","alert","preview_image","query","diamond_id","ring_print","texture_id","ring_size","good_type","flower_head_id","combo_id","getDiamondInfo","detail","color","clarity","cut","symmetry","polish","flr_intensity","getDesignInfo","_","design_bn","getDesignPrice","price","loadComboList","combos","filters","c","f","getComboInfo","combo","designId","layers","newComboList","optionList","modules","currtAddress","tel","address","share_loadUserInfo","share_loadMetalList","share_loadDesignInfo","share_loadGemList","share_loadMetalWeb","share_loadGemWeb","share_getDesignInfo","share_getDesignPrice","Vue","use","Vuex","Store","common","design","orderConfirm","share","components","Loading","props","loading","saveDesignInfo","created","$store","dispatch","mounted","getDiamond","Boolean","Number","setRenderParams","methods","setTimeout","changeComboId","init3D","clearAndPrepare3D","__pre_isCombo","my3d","onClose","document","querySelector","innerHTML","Bavlo","initWeb3D","baseUrl","resourceDomainName","onWindowResize","onresize","initUserMatInfo","changeBackground","loadVarDesign","toString","loaded","initCombo3D","Combo","loadDesign","getLoadModelState","setInitCameraPos","changeMetalId","printUserMark","setRotationState","changeCameraPos","material","cus","getCustomization","target","find","test","customizeMetalClass","getPrice","force","printUserTextOfLayer","switchIt","$dialog","confirm","formatIndex","num","formatCost","isNaN","component","handInch","attrs","on","onClickLeft","module","exports"],"mappings":"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","file":"js/chunk-common.e718a3d5.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"loading-cont\"},[_c('div',{staticClass:\"loadEffect\"},[_c('span'),_c('span'),_c('span'),_c('span'),_c('span'),_c('span'),_c('span'),_c('span')]),_c('div',{staticClass:\"tips\"},[_vm._v(\"你的钻戒，我要亲手设计\")])])}]\n\nexport { render, staticRenderFns }","import axios from 'axios'\nimport { stringify } from 'qs'\n\n// 正式环境是dis 其他都是nxm\nconst host = location.host.includes('zuanshi.dis.wanheweb.com') ? 'http://zuanshi.dis.wanheweb.com/' : 'http://zuanshi.nxm.wanheweb.com/'\n// const host = 'https://yapi.kyy1996.com/mock/29';\n\naxios.defaults.baseURL = host;\n\nconst getRequest = method => {\n  return ({ url, data, options = {}, isForm = true }) => {\n    let tokenHeader = {}\n\n    if (localStorage.getItem('token') && !url.includes('jcd.bavlo.com')) {\n      tokenHeader.token = localStorage.getItem('token');\n    }\n    return axios({\n      url,\n      method,\n      ...(method === 'POST'\n        ? { data: isForm ? stringify(data) : data }\n        : { }),\n      params: method === 'GET' ? data : options.params,\n      headers: {\n        'X-Requested-With': 'XMLHttpRequest',\n        'Content-Type': isForm\n          ? 'application/x-www-form-urlencoded; charset=UTF-8'\n          : 'application/json',\n        ...options.headers,\n        ...tokenHeader\n      }\n    })\n      .then(res => {\n        if (typeof res.data !== 'object') {\n          return Promise.reject(res)\n        }\n        if (res.data.errcode) {\n          return Promise.reject(res.data)\n        }\n\n        return res.data\n      })\n      .catch(err => {\n        return Promise.reject(err)\n      })\n  }\n}\n\nexport const get = getRequest('GET')\n\nexport const post = getRequest('POST')\n","export function cc (s) {\n  if (/[^0-9.]/.test(s)) return 'invalid value'\n  s = s.replace(/^(\\d*)$/, '$1.')\n  s = (s + '00').replace(/(\\d*\\.\\d\\d)\\d*/, '$1')\n  s = s.replace('.', ',')\n  var re = /(\\d)(\\d{3},)/\n  while (re.test(s)) { s = s.replace(re, '$1,$2') }\n  s = s.replace(/,(\\d\\d)$/, '.$1')\n  return '￥' + s.replace(/^\\./, '0.')\n}\n\nconst loeded = {}\n\nexport function cssLoader (url) {\n  const status = loeded[url] || false\n  if (status) {\n    return Promise.resolve()\n  }\n  const style = document.createElement('link')\n  style.rel = 'stylesheet'\n  style.href = url\n  document.head.appendChild(style)\n  return new Promise((resolve) => {\n    style.addEventListener(\n      'load',\n      () => {\n        loeded[url] = true\n        resolve()\n      }\n    )\n  })\n}\n\nexport function jsLoader (url) {\n  const status = loeded[url] || false\n  if (status) {\n    return Promise.resolve()\n  }\n  const script = document.createElement('script')\n  script.src = url\n  document.body.appendChild(script)\n  return new Promise((resolve) => {\n    script.addEventListener(\n      'load',\n      () => {\n        loeded[url] = true\n        resolve()\n      })\n  })\n}\n\nexport const getUrlParam = (name) => {\n  let reg = new RegExp(`(^|&)${name}=([^&]*)(&|$)`);\n  let r = window.location.search.substr(1).match(reg);\n  if (r != null) return unescape(r[2]);\n  return null;\n}\n\nexport function urlParse(URL) {\n  let url = URL || window.location.search;\n  let obj = {};\n  let reg = /[?&][^?&]+=[^?&]+/g;\n  let arr = url.match(reg);\n  if (arr) {\n    arr.forEach((item) => {\n      let tempArr = item.substring(1).split('=');\n      let key = decodeURIComponent(tempArr[0]);\n      let val = decodeURIComponent(tempArr[1]);\n      obj[key] = val;\n    });\n  }\n  return obj;\n};\n","import { apiUrl, colorList } from '../const/design'\nimport { get, post } from '../util/ajax'\n\nexport default {\n  state: {\n    userNo: 20230,\n    desNo: 30163,\n    userInfo: {},\n    // all信息\n    designInfo: {},\n    // 花头\n    partId: '',\n    parts: [],\n    allParts: [], // 不过滤的全部\n    // 戒臂\n    mainParts: [],\n    mainPartId: '',\n    allMainParts: [], // 不过滤的全部\n    // 材质\n    metals: [],\n    metalId: '',\n    // 刻印\n    mark: '',\n    // 当前手寸\n    currentHandInch: '',\n    // 当前钻石\n    diamondId: '',\n    diamondInfo: {},\n    // 设计标题\n    title: '',\n    // 固定款\n    comboList: [],\n    allComboList: [], // 不过滤的全部\n    comboId: '',\n\n    otherGems: [],\n    metalWeb: [],\n    metalWebDefault: [],\n    gemWeb: [],\n    gemWebDefault: [],\n    materialWeb: [],\n    materialWebDefault: [],\n    webModelPics: [],\n  },\n  mutations: {\n    setState(state, payload) {\n      for (let key in payload) {\n        state[key] = payload[key]\n      }\n    },\n  },\n  actions: {\n    /**\n     * 1 加载账号信息\n     * @param userId\n     */\n    loadUserInfo({ commit, state }) {\n      return post({\n        url: apiUrl + 'app/userInfo',\n        data: {\n          id: state.userNo\n        },\n      }).then((data) => {\n        if (data.code === 0) {\n          const userInfo = data.user\n          commit('setState', { userInfo })\n        }\n      })\n    },\n\n    // 勿删，查看全部定制款\n    getDesignList ({ commit, state }) {\n      return post({\n        url: apiUrl + 'app/designList',\n        data: {\n          typeId: 1,\n          rows: 50,\n          dgpage: 1,\n          userId: state.userNo,\n          loadType: 1\n        },\n      }).then((data) => {\n        if (data.code === 0) {\n          let all = ''\n          data.list.forEach((item) => {\n            all += ',' + item.id\n          })\n        }\n      })\n\n    },\n\n    /**\n     * 2 获取金属材质列表（用于切换材质）\n     */\n    loadMetalList({ commit, state }) {\n      let metals = []\n      return post({\n        url: apiUrl + 'app/findUserMetalByUser',\n        data: {\n          userId: state.userNo\n        },\n      }).then((data) => {\n        if (data.code === 0) {\n          if (data.list.length > 0) {\n            let metalId = ''\n            metals = data.list.map(item => {\n              console.log(item.metal);\n              if (item.metal && item.metal.nameCn && item.metal.nameCn === '铂金') {\n                metalId = item.metal.id\n              }\n              return item.metal\n            })\n\n            metalId = metalId || metals[0].id\n\n            commit('setState', {\n              metals,\n              metalId,\n            })\n          } else {\n            post({\n              url: apiUrl + 'app/desMetalList',\n            }).then((data) => {\n              if (data.code === 0) {\n                let metalId = ''\n                // metals = data.list\n                metals = colorList\n\n                metals.forEach(item => {\n                  if (item && item.nameCn && item.nameCn === '铂金') {\n                    metalId = item.id\n                  }\n                });\n\n                metalId = metalId || metals[0].id\n\n                commit('setState', {\n                  metals,\n                  metalId\n                })\n              } else {\n                myAlert('数据加载失败！', 'alert-danger')\n              }\n            })\n          }\n        } else {\n          myAlert('数据加载失败！', 'alert-danger')\n        }\n      })\n    },\n    /**\n     * 3 加载款式信息\n     */\n    loadDesignInfo({ commit, state }) {\n      return Promise.all([\n        post({\n          url: apiUrl + 'app/getVariableDesignLayerInfo',\n          data: {\n            id: state.desNo\n          }\n        }),\n        get({ // 花头\n          url: '/api/3d/getAllHead'\n        }),\n        get({ // 戒臂\n          url: '/api/3d/getAllRing'\n        }),\n      ]).then(([data, heads, rings]) => {\n        if (data.code === 0 && heads.status === 1 && rings.status === 1) {\n          const designInfo = data.info\n\n          // let { mainParts } = designInfo\n          const allMainParts = designInfo.mainParts || []\n          const mainPartsFilter = (rings.data || []).map(d => d.ring_arm_id)\n          const mainParts = allMainParts.filter((m) => mainPartsFilter.includes(m.id))\n\n          // 花头ID列表\n          const allParts = designInfo.parts && designInfo.parts[0] || []\n          const partsFilter = (heads.data || []).map(d => d.flower_id)\n          const parts = allParts.filter((m) => partsFilter.includes(m.id))\n\n          // 当前戒臂ID （主part ID）\n          const mainPartId = mainParts[0] ? mainParts[0].id : ''\n          // 当前花头ID\n          const partId = parts[0] ? parts[0].id : ''\n\n          commit('setState', {\n            designInfo,\n            mainParts,\n            mainPartId,\n            partId,\n            parts,\n            allMainParts,\n            allParts,\n          })\n\n        } else {\n          console.log('数据加载失败！')\n        }\n      })\n    },\n\n    /**\n     * 4 获取宝石材质列表（用于切换材质）\n     */\n    loadGemList({ commit, state }) {\n      return post({\n        url: apiUrl + 'app/findUserGemByUser',\n        data: {\n          userId: state.userNo\n        }\n      }).then((data) => {\n        let gems = []\n        if (data.code === 0) {\n          if (data.list.length > 0) {\n            gems = data.list.map(item => item.gem)\n            commit('setState', { gems })\n          } else {\n            post({\n              url: apiUrl + 'app/desGemList',\n            }).then((data) => {\n              if (data.code === 0) {\n                gems = data.list\n                commit('setState', { gems })\n              } else {\n                myAlert('数据加载失败！', 'alert-danger')\n              }\n            })\n          }\n        } else {\n          myAlert('数据加载失败！', 'alert-danger')\n        }\n      })\n    },\n\n    /**\n     * 5 获取其它宝石列表（用于切换材质）\n     */\n    loadOtherGemList({ commit, state }) {\n      post({\n        url: apiUrl + 'app/otherGemList',\n      }).then((data) => {\n        if (data.code === 0) {\n          const otherGems = data.list\n          commit('setState', { otherGems })\n        } else {\n          myAlert('数据加载失败！', 'alert-danger')\n        }\n      })\n    },\n\n    /**\n     * 6 获取金属web材质参数（用于渲染）\n     * @param userId\n     */\n    loadMetalWeb({ commit, state }) {\n      post({\n        url: apiUrl + 'app/findMetalWebsByUser',\n        data: {\n          userId: state.userNo\n        }\n      }).then((data) => {\n        if (data.code === 0) {\n          const metalWebDefault = data.list\n          const metalWeb = data.list\n          commit('setState', {\n            metalWeb,\n            metalWebDefault\n          })\n        } else {\n          myAlert('数据加载失败！', 'alert-danger')\n        }\n      })\n    },\n\n    /**\n     * 7 获取宝石web材质列表（用于渲染）\n     * @param userId\n     */\n    loadGemWeb({ commit, state }) {\n      post({\n        url: apiUrl + 'app/findGemWebsByUser',\n        data: {\n          userId: state.userNo\n        }\n      }).then((data) => {\n        if (data.code === 0) {\n          const gemWebDefault = data.list\n          const gemWeb = data.list\n          commit('setState', {\n            gemWeb,\n            gemWebDefault\n          })\n        } else {\n          myAlert('数据加载失败！', 'alert-danger')\n        }\n      })\n    },\n\n    /**\n     * 8 获取其它材质web材质列表（用于渲染、切换材质）\n     * @param userId\n     */\n    loadMaterialWeb({ commit, state }) {\n      post({\n        url: apiUrl + 'app/findMaterialWebsByUserAndType',\n        data: {\n          userId: state.userNo\n        }\n      }).then((data) => {\n        if (data.code === 0) {\n          const materialWebDefault = data.list\n          const materialWeb = data.list\n          commit('setState', {\n            materialWeb,\n            materialWebDefault\n          })\n        } else {\n          myAlert('数据加载失败！', 'alert-danger')\n        }\n      })\n    },\n\n    /**\n     * 9 获取试戴背景图列表\n     */\n    loadModelPicList({ commit, state }) {\n      return post({\n        url: apiUrl + 'app/webModelPicList',\n        data: {\n          userId: state.userNo,\n          desTypeId: state.designInfo.type.id\n        },\n      }).then((data) => {\n        if (data.code === 0) {\n          const webModelPics = data.list\n          commit('setState', { webModelPics })\n        } else {\n          myAlert('数据加载失败！', 'alert-danger')\n        }\n      })\n    },\n    \n\n    /**\n     * 10 提交设计\n     */\n    async submitDesign({ commit, state }, { image, bn, isCombo }) {\n      const { data, message } = await post({\n        url:'/api/3d/design/upload_image',\n        data: {\n          base64: image\n        }\n      })\n      if (!data) {\n        return alert('err： ' + message)\n      }\n      const preview_image = data.url\n      const {\n        mark,\n        mainPartId,\n        partId,\n        metalId,\n        diamondId,\n        currentHandInch,\n        title,\n        comboId,\n      } = state\n\n      const query = {\n        diamond_id: diamondId,\n        ring_print: mark,\n        texture_id: metalId,\n        ring_size: currentHandInch,\n        good_type: 1,\n        title: title, \n        preview_image,\n        ring_arm_id: isCombo ? 0 : mainPartId,\n        flower_head_id: isCombo ? 0 : partId,\n        combo_id: isCombo ? comboId : 0,\n      }\n\n      if (bn) {\n        query.bn = bn\n      }\n\n      return post({\n        url: '/api/3d/saveDesign',\n        data: query\n      }).then((data) => {\n        return data\n      })\n    },\n\n    /**\n     * 11 获取钻石信息\n     */\n    getDiamondInfo({ commit, state }, { id }) {\n      get({\n        url: '/api/3d/get_diamond',\n        data: {\n          id\n        }\n      }).then((data) => {\n        if (data.status === 1) {\n          const diamondInfo = data.data\n          diamondInfo.detail = `${diamondInfo.color}色 ${diamondInfo.clarity} ${diamondInfo.cut} ${diamondInfo.symmetry} ${diamondInfo.polish} ${diamondInfo.flr_intensity}`\n          commit('setState', { diamondInfo })\n        }\n      })\n    },\n\n    /**\n     * 12 获取设计信息\n     */\n    getDesignInfo(_, { design_bn }) {\n      return get({\n        url: '/api/3d/design_detail',\n        data: {\n          design_bn\n        }\n      }).then((data) => {\n        return data\n      })\n    },\n\n    /**\n     * 13 实时计算价钱\n     */\n    getDesignPrice(_, {\n      isCombo,\n      currentHandInch,\n      partId,\n      mainPartId,\n      metalId,\n      diamondId,\n      comboId,\n    }) {\n      return get({\n        url: '/api/3d/order/compute_price',\n        data: {\n          diamond_id: diamondId,\n          texture_id: metalId,\n          ring_size: currentHandInch,\n          ring_arm_id: isCombo ? 0 : mainPartId,\n          flower_head_id: isCombo ? 0 : partId,\n          combo_id: isCombo ? comboId : 0,\n        }\n      }).then((data) => {\n        if (data.status === 1) {\n          return data.data.price\n        } else {\n          return '-'\n        }\n      })\n    },\n\n    /**\n     * 14 获取固定款列表\n     */\n    loadComboList({ commit, state }) {\n      return Promise.all([\n        post({\n          url: apiUrl + 'app/designList',\n          data: {\n            userId: state.userNo,\n            loadType: 1,\n            dgpage: 1,\n            rows: 200,\n          },\n        }),\n        get({\n          url: '/api/3d/getAllCombo'\n        }),\n      ]).then(([data, combos]) => {\n        if (data.code === 0 && combos.status === 1) {\n          const allComboList = data.list || []\n          const filters = (combos.data || []).map((c) => c.combo_id)\n          const comboList = allComboList.filter((f) => filters.includes(f.id))\n\n          commit('setState', { comboList, allComboList })\n        } else {\n          myAlert('数据加载失败！', 'alert-danger')\n        }\n      })\n    },\n\n    /**\n     * 15 获取固定款信息\n     */\n    getComboInfo({ commit, state }, { designId }) {\n      const {\n        comboList\n      } = state\n      let combo;\n      comboList.forEach((item) => {\n        if (+item.id === +designId) {\n          combo = item;\n        }\n      });\n\n      if (combo && combo.layers) {\n        return combo;\n      }\n\n      return post({\n        url: apiUrl + 'app/designLayerInfo',\n        data: {\n          designId\n        }\n      }).then((data) => {\n        if (data.code === 0) {\n          combo = data.designInfo\n          const newComboList = comboList.map((item) => {\n            if (+item.id === +designId) {\n              return { ...item, ...data.designInfo }\n            }\n            return item;\n          })\n          commit('setState', { comboList: newComboList })\n          return combo;\n        } else {\n          myAlert('数据加载失败！', 'alert-danger')\n        }\n      })\n    },\n    \n\n  }\n}","export default {\n  state: {\n    optionList: [\n      1,2,3\n    ]\n  },\n  mutations: {\n\n  },\n  actions: {\n\n  },\n  modules: {\n\n  }\n}","export default {\n  state: {\n    currtAddress: {\n      id: 0,\n      name: '',\n      tel: '',\n      address: ''\n    }\n  },\n  mutations: {\n    setState (state, payload) {\n      for (const key in payload) {\n        state[key] = payload[key]\n      }\n    }\n  },\n  actions: {\n\n  },\n  modules: {\n\n  }\n}\n","\nimport { apiUrl } from '../const/design'\nimport { get, post } from '../util/ajax'\n\nexport default {\n  state: {\n    userNo: 20230,\n    desNo: 30163,\n    userInfo: {},\n    // all信息\n    designInfo: {},\n    // 花头\n    partId: '',\n    parts: [],\n    // 戒臂\n    mainParts: [],\n    mainPartId: '',\n    // 材质\n    metals: [],\n    metalId: '',\n    // 当前钻石\n    diamondId: '',\n    diamondInfo: {},\n\n    otherGems: [],\n    metalWeb: [],\n    metalWebDefault: [],\n    gemWeb: [],\n    gemWebDefault: [],\n    materialWeb: [],\n    materialWebDefault: [],\n    webModelPics: [],\n    \n  },\n  mutations: {\n    setState(state, payload) {\n      for (let key in payload) {\n        state[key] = payload[key]\n      }\n    },\n  },\n  actions: {\n    /**\n     * 1 加载账号信息\n     * @param userId\n     */\n    share_loadUserInfo({ commit, state }) {\n      return post({\n        url: apiUrl + 'app/userInfo',\n        data: {\n          id: state.userNo\n        },\n      }).then((data) => {\n        if (data.code === 0) {\n          const userInfo = data.user\n          commit('setState', { userInfo })\n        }\n      })\n    },\n\n    /**\n     * 2 获取金属材质列表（用于切换材质）\n     */\n     share_loadMetalList({ commit, state }) {\n      let metals = []\n      return post({\n        url: apiUrl + 'app/findUserMetalByUser',\n        data: {\n          userId: state.userNo\n        },\n      }).then((data) => {\n        if (data.code === 0) {\n          if (data.list.length > 0) {\n            let metalId = ''\n            metals = data.list.map(item => {\n              console.log(item.metal);\n              if (item.metal && item.metal.nameCn && item.metal.nameCn === '铂金') {\n                metalId = item.metal.id\n              }\n              return item.metal\n            })\n\n            metalId = metalId || metals[0].id\n\n            commit('setState', {\n              metals,\n              metalId,\n            })\n          } else {\n            post({\n              url: apiUrl + 'app/desMetalList',\n            }).then((data) => {\n              if (data.code === 0) {\n                let metalId = ''\n                metals = data.list\n                metals.forEach(item => {\n                  if (item && item.nameCn && item.nameCn === '铂金') {\n                    metalId = item.id\n                  }\n                });\n\n                metalId = metalId || metals[0].id\n\n                commit('setState', {\n                  metals,\n                  metalId\n                })\n              } else {\n                myAlert('数据加载失败！', 'alert-danger')\n              }\n            })\n          }\n        } else {\n          myAlert('数据加载失败！', 'alert-danger')\n        }\n      })\n    },\n    /**\n     * 3 加载款式信息\n     */\n     share_loadDesignInfo({ commit, state }) {\n      return post({\n        url: apiUrl + 'app/getVariableDesignLayerInfo',\n        data: {\n          id: state.desNo\n        }\n      }).then((data) => {\n        if (data.code === 0) {\n          const designInfo = data.info\n          const { mainParts } = designInfo\n          // 当前戒臂ID （主part ID）\n          const mainPartId = designInfo.mainParts[0].id\n          // 花头ID列表\n          const parts = designInfo.parts && designInfo.parts[0] || []\n          // 当前花头ID\n          const partId = parts[0] ? parts[0].id : ''\n\n          commit('setState', {\n            designInfo,\n            mainParts,\n            mainPartId,\n            partId,\n            parts\n          })\n\n        } else {\n          console.log('数据加载失败！')\n        }\n      })\n    },\n\n    /**\n     * 4 获取宝石材质列表（用于切换材质）\n     */\n     share_loadGemList({ commit, state }) {\n      return post({\n        url: apiUrl + 'app/findUserGemByUser',\n        data: {\n          userId: state.userNo\n        }\n      }).then((data) => {\n        let gems = []\n        if (data.code === 0) {\n          if (data.list.length > 0) {\n            gems = data.list.map(item => item.gem)\n            commit('setState', { gems })\n          } else {\n            post({\n              url: apiUrl + 'app/desGemList',\n            }).then((data) => {\n              if (data.code === 0) {\n                gems = data.list\n                commit('setState', { gems })\n              } else {\n                myAlert('数据加载失败！', 'alert-danger')\n              }\n            })\n          }\n        } else {\n          myAlert('数据加载失败！', 'alert-danger')\n        }\n      })\n    },\n\n    /**\n     * 6 获取金属web材质参数（用于渲染）\n     * @param userId\n     */\n     share_loadMetalWeb({ commit, state }) {\n      post({\n        url: apiUrl + 'app/findMetalWebsByUser',\n        data: {\n          userId: state.userNo\n        }\n      }).then((data) => {\n        if (data.code === 0) {\n          const metalWebDefault = data.list\n          const metalWeb = data.list\n          commit('setState', {\n            metalWeb,\n            metalWebDefault\n          })\n        } else {\n          myAlert('数据加载失败！', 'alert-danger')\n        }\n      })\n    },\n\n    /**\n     * 7 获取宝石web材质列表（用于渲染）\n     * @param userId\n     */\n     share_loadGemWeb({ commit, state }) {\n      post({\n        url: apiUrl + 'app/findGemWebsByUser',\n        data: {\n          userId: state.userNo\n        }\n      }).then((data) => {\n        if (data.code === 0) {\n          const gemWebDefault = data.list\n          const gemWeb = data.list\n          commit('setState', {\n            gemWeb,\n            gemWebDefault\n          })\n        } else {\n          myAlert('数据加载失败！', 'alert-danger')\n        }\n      })\n    },\n\n    /**\n     * 11 获取设计信息\n     */\n    share_getDesignInfo(_, { design_bn }) {\n      return get({\n        url: 'api/3d/design_detail',\n        data: {\n          design_bn\n        }\n      }).then((data) => {\n        return data\n      })\n    },\n\n    /**\n     * 13 实时计算价钱\n     */\n     share_getDesignPrice(_, {\n      currentHandInch,\n      partId,\n      mainPartId,\n      metalId,\n      diamondId\n    }) {\n    return get({\n      url: '/api/3d/order/compute_price',\n      data: {\n        diamond_id: diamondId,\t\n        texture_id: metalId,\n        ring_size: currentHandInch,\n        ring_arm_id: mainPartId,\n        flower_head_id: partId,\n      }\n    }).then((data) => {\n      if (data.status === 1) {\n        return data.data.price\n      } else {\n        return '-'\n      }\n    })\n  },\n\n  }\n}\n","import Vue from 'vue'\nimport Vuex from 'vuex'\nimport design from './design'\nimport common from './common'\nimport orderConfirm from './orderConfirm'\nimport share from './share'\n\nVue.use(Vuex)\n\nexport default new Vuex.Store({\n  modules: {\n    common,\n    design,\n    orderConfirm,\n    share,\n  }\n})\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=1b20d147&lang=scss&scoped=true&\"","import Loading from '../components/3DLoading'\nimport { resourceDomainName, baseUrl } from '../const/design';\nimport { getUrlParam } from '../util/index';\n\nexport default {\n  components: {\n    Loading\n  },\n  props: [],\n  data() {\n    return {\n      // loading\n      loading: true,\n\n      // 保存的设计信息\n      saveDesignInfo: {},\n      design_bn: '',\n\n      // price\n      price: '-',\n\n      // 是否是固定款\n      isCombo: false,\n    };\n  },\n  created() {\n    // 加载账号信息\n    this.$store.dispatch('loadUserInfo');\n  },\n  mounted() {\n    // 请求：材质、宝石、设计数据\n    Promise.all([\n      this.$store.dispatch('loadDesignInfo'),\n      this.$store.dispatch('loadMetalList'),\n      this.$store.dispatch('loadMetalWeb'),\n      this.$store.dispatch('loadGemList'),\n      this.$store.dispatch('loadGemWeb'),\n      this.$store.dispatch('loadComboList'),\n    ]).then(() => {\n      console.log('mounted -> data loaded -> init3D');\n\n      const design_bn = getUrlParam('bn');\n      const partId = getUrlParam('partId');\n      const mainPartId = getUrlParam('mainPartId');\n      const metalId = getUrlParam('metalId');\n      const mark = getUrlParam('mark');\n      const currentHandInch = getUrlParam('currentHandInch');\n      const diamondId = getUrlParam('diamondId');\n      const comboId = getUrlParam('comboId');\n      const isCombo = getUrlParam('isCombo');\n\n      if (design_bn) {\n        this.$store.dispatch('getDesignInfo', { design_bn }).then((res) => {\n          this.saveDesignInfo = res.data\n          this.design_bn = design_bn\n          const {\n            ring_size,\n            diamond_id,\n            ring_arm_id,\n            flower_head_id,\n            combo_id,\n            texture_id,\n            ring_print,\n            title,\n          } = res.data\n\n          this.getDiamond(diamondId || diamond_id)\n          this.mark = mark || ring_print || ''\n          this.isCombo = isCombo == null ? Boolean(combo_id) : !!Number(isCombo)\n\n          this.setRenderParams({\n            partId: partId || flower_head_id,\n            mainPartId: mainPartId || ring_arm_id,\n            metalId: metalId || texture_id,\n            mark: mark || ring_print,\n            currentHandInch: currentHandInch || ring_size,\n            diamondId: diamondId || diamond_id,\n            title,\n            comboId: comboId || combo_id,\n          })\n        });\n      } else {\n        this.getDiamond(diamondId)\n        this.mark = mark || ''\n        this.isCombo = !!Number(isCombo)\n        this.setRenderParams({\n          partId,\n          mainPartId,\n          metalId,\n          mark,\n          currentHandInch,\n          comboId: comboId,\n        })\n      }\n    });\n  },\n\n  methods: {\n    // 设置参数\n    setRenderParams(obj) {\n      for(let key in obj) {\n        if (!obj[key]) {\n          delete obj[key]\n        }\n      }\n\n      this.$store.commit('setState', obj);\n      const { comboId } = this.$store.state.design;\n      setTimeout(() => {\n        if (this.isCombo) {\n          this.changeComboId(comboId);\n        } else {\n          this.init3D();\n        }\n      }, 0)\n    },\n\n    // 获取钻石信息\n    getDiamond(diamondId) {\n      if (diamondId) {\n        this.$store.dispatch('getDiamondInfo', { id: diamondId });\n        this.$store.commit('setState', {\n          diamondId,\n        });\n      }\n    },\n    // 切换前的清理工作\n    clearAndPrepare3D() {\n      if (this.__pre_isCombo == null || this.isCombo !== this.__pre_isCombo) {\n        if (this.my3d && this.my3d) {\n          this.my3d.onClose();\n        }\n        document.querySelector('#web3d').innerHTML = '';\n\n        const {\n          metalWeb,\n          metalWebDefault,\n          gemWeb,\n          gemWebDefault,\n        } = this.$store.state.design;\n\n        // 加载3D第一步：初始化3D场景\n        this.my3d = Bavlo.initWeb3D(\n          baseUrl,\n          'web3d',\n          false,\n          resourceDomainName,\n          // false\n          // 是否是固定搭配\n          this.isCombo\n        );\n\n        // 加载3D第二步：定义3D窗口尺寸\n        this.my3d.onWindowResize(2);\n        window.onresize = () => {\n          this.my3d.onWindowResize(2);\n        };\n\n        // 加载3D第三步：初始化web材质\n        this.my3d.initUserMatInfo(\n          metalWebDefault,\n          metalWeb,\n          gemWebDefault,\n          gemWeb\n        );\n\n        // 加载3D第四步：设置3D场景背景色\n        this.my3d.changeBackground('37,37,42');\n      }\n      this.__pre_isCombo = this.isCombo;\n    },\n    // 初始化定制款3D\n    async init3D() {\n      this.isCombo = false;\n      this.clearAndPrepare3D();\n\n      const {\n        designInfo,\n        partId,\n        mainPartId,\n      } = this.$store.state.design;\n\n      // 加载3D第五步：加载款式3D\n      this.my3d.loadVarDesign(designInfo, mainPartId, partId.toString());\n\n      this.loaded();\n    },\n\n    // 初始化固定款3D\n    async initCombo3D(Combo) {\n      this.isCombo = true;\n      this.clearAndPrepare3D();\n\n      // 加载3D第五步：加载款式3D\n      this.my3d.loadDesign(Combo);\n\n      this.loaded();\n    },\n    // 加载完\n    loaded() {\n      setTimeout(() => {\n        if (this.my3d.getLoadModelState() !== 2) {\n          this.loaded()\n        } else {\n          const { metalId } = this.$store.state.design;\n          // 设置材质\n          this.loading = false\n\n          // 设置角度\n          this.setInitCameraPos();\n\n          // 设置材质\n          this.changeMetalId(metalId);\n\n          // 用户刻印\n          this.printUserMark();\n          if (this.mark) {\n            setTimeout(() => {\n              this.my3d.setRotationState(true);\n            }, 200)\n          }\n        }\n      }, 1000);\n    },\n\n    /**\n     * 设置相机角度\n     */\n    setInitCameraPos() {\n      this.my3d.changeCameraPos(false, -45, 100, -65)\n    },\n\n    /**\n     * 切换材料\n     * @param metalId\n     */\n    changeMetalId(metalId) {\n      const { metals } = this.$store.state.design;\n      let material;\n      metals.forEach((item) => {\n        if (+item.id === +metalId) {\n          material = item;\n        }\n      });\n      this.$store.commit('setState', {\n        metalId,\n      });\n\n      let name = '金属图层';\n      if (this.isCombo) {\n        const cus = this.my3d.getCustomization()\n        const target = cus.find((c) => (/^Metal/i).test(c.name))\n        if (target) {\n          name = target.name\n        }\n      }\n\n      // 金属图层\n      material && this.my3d.customizeMetalClass(name, material);\n      this.getPrice()\n    },\n\n    /**\n     * 用户刻印\n     */\n    printUserMark(force = false) {\n      if (force || this.mark) {\n        let id = 940;\n        if (this.isCombo) {\n          const cus = this.my3d.getCustomization()\n          const target = cus.find((c) => (/^Engrave/i).test(c.name))\n          if (target) {\n            id = target.id\n          }\n        }\n        this.my3d.printUserTextOfLayer(id, this.mark || ' ')\n      }\n    },\n\n    /**\n     * 切换固定款\n     * @param comboId\n     */\n    changeComboId(comboId) {\n      const switchIt = async () => {\n        this.$store.commit('setState', {\n          comboId,\n        });\n        this.$store.dispatch('getComboInfo', { designId: comboId })\n          .then((combo) => {\n            combo && this.initCombo3D(combo);\n            this.getPrice()\n          });\n      }\n      if (this.isCombo) {\n        switchIt()\n      } else {\n        this.$dialog.confirm({\n          title: '提示',\n          message: '是否以当前固定款式覆盖设计款式方案？',\n        })\n          .then(switchIt);\n      }\n    },\n\n    // 实时获取金额\n    getPrice() {\n      const {\n        partId,\n        mainPartId,\n        metalId,\n        currentHandInch,\n        diamondId,\n        comboId,\n      } = this.$store.state.design;\n\n      this.$store.dispatch('getDesignPrice', {\n        isCombo: this.isCombo,\n        currentHandInch: currentHandInch || 13,\n        partId,\n        mainPartId,\n        metalId,\n        diamondId,\n        comboId: comboId,\n      }).then((price) => {\n        this.price = price\n      })\n    }\n  },\n\n  filters: {\n    formatIndex(num) {\n      num = num + 1;\n      return num < 10 ? '0' + num : num;\n    },\n    formatCost(num) {\n      if (typeof num === 'number' && !isNaN(num) ) {\n        return num.toString() + '.00'\n      }\n    },\n  },\n};","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=1b20d147&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=1b20d147&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1b20d147\",\n  null\n  \n)\n\nexport default component.exports","export const baseUrl = ''\nexport const apiUrl = 'https://jcd.bavlo.com/manage/'\nexport const resourceDomainName = 'https://design.bavlo.com/'\nexport const normalMapUrl = resourceDomainName + 'NormalFiles/'\nexport const handInch = ['6', '7', '8', '9', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20']\n\nexport const colorList = [\n{\n    \"color\":\"190,190,190\",\n    \"density\":0.0152,\n    \"fMetallic\":\"1\",\n    \"fSmoothness\":\"0.9\",\n    \"id\":2,\n    \"name\":\"W18k\",\n    \"nameCn\":\"白18K金\",\n    \"parentId\":0,\n    \"price\":310,\n    \"purity\":0.76,\n    \"type\":0,\n    \"userId\":0,\n    \"waste\":0.13\n},\n{\n    \"color\":\"238, 175, 144\",\n    \"density\":0.0152,\n    \"fMetallic\":\"1\",\n    \"fSmoothness\":\"0.9\",\n    \"id\":3,\n    \"name\":\"R18k\",\n    \"nameCn\":\"红18K金\",\n    \"parentId\":0,\n    \"price\":310,\n    \"purity\":0.76,\n    \"type\":0,\n    \"userId\":0,\n    \"waste\":0.13\n},\n{\n  \"color\":\"255,200,112\",\n  \"density\":0.0152,\n  \"fMetallic\":\"1\",\n  \"fSmoothness\":\"0.9\",\n  \"id\":1,\n  \"name\":\"Y18k\",\n  \"nameCn\":\"黄18K金\",\n  \"parentId\":0,\n  \"price\":310,\n  \"purity\":0.76,\n  \"type\":0,\n  \"userId\":0,\n  \"waste\":0.13\n},\n{\n  \"color\":\"225,225,225\",\n  \"density\":0.0214,\n  \"fMetallic\":\"1\",\n  \"fSmoothness\":\"0.9\",\n  \"id\":6,\n  \"name\":\"PT950\",\n  \"nameCn\":\"铂金\",\n  \"parentId\":0,\n  \"price\":310,\n  \"purity\":0.96,\n  \"type\":0,\n  \"userId\":0,\n  \"waste\":0.13\n},\n]","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"title-bar-box\"},[_c('van-nav-bar',{staticClass:\"bag-bar\",attrs:{\"title\":_vm.title,\"left-text\":\"\",\"left-arrow\":\"\",\"safe-area-inset-top\":\"\"},on:{\"click-left\":_vm.onClickLeft}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"title-bar-box\">\n    <!-- <div class=\"status-bar\"></div> -->\n    <van-nav-bar\n      :title=\"title\"\n      left-text=\"\"\n      left-arrow\n      @click-left=\"onClickLeft\"\n      safe-area-inset-top\n      class=\"bag-bar\"\n    />\n  </div>\n</template>\n\n<script>\n  export default {\n\t\tname: 'TitleBar',\n    props: {\n      title: {\n        type: String,\n        default: ''\n      },\n\t\t\ttype: {\n\t\t\t\ttype: Number,\n\t\t\t\tdefault: 1 // 1默认返回 2uni返回\n\t\t\t}\n    },\n    methods: {\n      onClickLeft () {\n\t\t\t\tif (this.type === 1) {\n        \twindow.history.go(-1)\n\t\t\t\t} else if (window.uni.reLaunch) {\n\t\t\t\t\twindow.uni.reLaunch({\n\t\t\t\t\t\turl: '../../pages/index/index'\n\t\t\t\t\t});\n\t\t\t\t}\n      }\n    },\n  }\n</script>\n\n<style lang=\"scss\" scoped>\n.title-bar-box {\n\t/* height: 72px; */\n  height: 44px;\n  background: #fff;\n}\n/* .status-bar {\n  width: 100%;\n  height: 24px;\n  background: #fff;\n  position: fixed;\n  top:0;\n  z-index: 9;\n} */\n/deep/.bag-bar {\n    position: fixed;\n    width: 100%;\n    /* top: 24px; */\n    top: 0;\n    .van-icon {\n      color: #000 !important;\n    }\n    .van-nav-bar__content {\n      height: 50px;\n    }\n    .van-nav-bar__title {\n      line-height: 50px;\n      font-size: 16px;\n      font-weight: 700 !important;\n      color: #000;\n    }\n    .van-nav-bar__arrow {\n      font-size: 24px;\n    }\n    .van-nav-bar__left, .van-nav-bar__right {\n      padding: 8px;\n    }\n  }\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=ad12edbc&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=ad12edbc&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ad12edbc\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=ad12edbc&lang=scss&scoped=true&\"","module.exports = __webpack_public_path__ + \"img/bg.fc782997.png\";"],"sourceRoot":""}